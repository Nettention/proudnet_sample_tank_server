# ProudNet UE5 ì˜ˆì œ

ProudNet ë„¤íŠ¸ì›Œí‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ Unreal Engine 5ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„ì„ êµ¬í˜„í•˜ëŠ” ì¢…í•© ê°€ì´ë“œì…ë‹ˆë‹¤. ì±„íŒ… ì‹œìŠ¤í…œ, ìºë¦­í„° ë„¤íŠ¸ì›Œí‚¹, ê³ ê¸‰ ë©€í‹°í”Œë ˆì´ì–´ ê¸°ëŠ¥ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

### [1. í”„ë¡œì íŠ¸ ì¤€ë¹„í•˜ê¸°](#1-í”„ë¡œì íŠ¸-ì¤€ë¹„í•˜ê¸°)
ProudNet í†µí•©ì„ ìœ„í•œ Unreal Engine 5 í”„ë¡œì íŠ¸ ì¤€ë¹„ ë° êµ¬ì„±

### [2. ë¡œì»¬ ì±„íŒ…ì°½ ë§Œë“¤ê¸°](#2-ë¡œì»¬-ì±„íŒ…ì°½-ë§Œë“¤ê¸°)
í…ŒìŠ¤íŠ¸ ë° ê¸°ë°˜ì„ ìœ„í•œ ê¸°ë³¸ ë¡œì»¬ ì±„íŒ… ì‹œìŠ¤í…œ ìƒì„±

### [3. ì˜¨ë¼ì¸ ì±„íŒ…ì°½ ë§Œë“¤ê¸°](#3-ì˜¨ë¼ì¸-ì±„íŒ…ì°½-ë§Œë“¤ê¸°)
ProudNetì„ ì‚¬ìš©í•œ ë„¤íŠ¸ì›Œí¬ ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„

### [4. ë¯¸ë¼ì§€ ìºë¦­í„° êµ¬í˜„í•˜ê¸°](#4-ë¯¸ë¼ì§€-ìºë¦­í„°-êµ¬í˜„í•˜ê¸°)
í–¥ìƒëœ ê²Œì„í”Œë ˆì´ ê¸°ëŠ¥ì„ ê°€ì§„ ë¯¸ë¼ì§€ ìºë¦­í„° êµ¬ì¶•

### [5. ë¯¸ë¼ì§€ ìºë¦­í„° ì˜¨ë¼ì¸ ì—°ë™í•˜ê¸°](#5-ë¯¸ë¼ì§€-ìºë¦­í„°-ì˜¨ë¼ì¸-ì—°ë™í•˜ê¸°)
ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„í”Œë ˆì´ë¥¼ ìœ„í•œ ë¯¸ë¼ì§€ ìºë¦­í„°ì™€ ProudNet ë„¤íŠ¸ì›Œí‚¹ í†µí•©

### [6. ë§ˆë¬´ë¦¬ í›„ í”„ë¡œì íŠ¸ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸](#6-ë§ˆë¬´ë¦¬-í›„-í”„ë¡œì íŠ¸-ë¹Œë“œ-ë°-í…ŒìŠ¤íŠ¸)
í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬, ë¹Œë“œ ë° ì¢…í•© í…ŒìŠ¤íŠ¸ ì ˆì°¨

---

## 1. í”„ë¡œì íŠ¸ ì¤€ë¹„í•˜ê¸°

ì´ ì„¹ì…˜ì—ì„œëŠ” ProudNetì´ í™œì„±í™”ëœ Unreal Engine 5 í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ë° í•„ìš”í•œ ì´ˆê¸° ì„¤ì • ë° êµ¬ì„±ì„ ë‹¤ë£¹ë‹ˆë‹¤.

### 1.1. ProudNet ì„¤ì¹˜

1. https://github.com/Nettention/ProudNet ì €ì¥ì†Œì—ì„œ ìµœì‹  ë¦´ë¦¬ì¦ˆë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
   1. ê¸°ë³¸ ì„¤ì¹˜ ê²½ë¡œëŠ” "C:\Program Files (x86)\Nettention\ProudNet"ì…ë‹ˆë‹¤.
   í•´ë‹¹ ê°€ì´ë“œì™€ UE5 í”ŒëŸ¬ê·¸ì¸ì€ ì´ ê²½ë¡œì— ë§ì¶”ì–´ì ¸ ìˆìœ¼ë¯€ë¡œ, ì„¤ì¹˜ ê²½ë¡œ ë³€ê²½ ì‹œ í”ŒëŸ¬ê·¸ì¸ì˜ ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì • ë° ê°€ì´ë“œ í™•ì¸ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### 1.2. Visual Studio í”„ë¡œì íŠ¸ êµ¬ì„±

1. VisualStudioì—ì„œ ë¹ˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
   - ì´ ê°€ì´ë“œì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ê²½ë¡œ/ì´ë¦„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
        
     ![image.png](img/image_017-1.png)
        
2. chat_serverí”„ë¡œì íŠ¸ì— 3ê°œì˜ ìƒˆ í•­ëª© main.cpp, setting.cpp, setting.h ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
    
  ![image.png](img/image_017.png)
    
   ![image.png](img/image_018.png)
    
3. chat_server í”„ë¡œì íŠ¸ì˜ ì†ì„±ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. "C/C++ - ì–¸ì–´ - C++ ì–¸ì–´ í‘œì¤€"
      1. ë“œë¡­ë‹¤ìš´ì—ì„œ "ISO C++20 í‘œì¤€ (/std:C++20)" ì„ íƒ
   2. "C/C++ - ì¼ë°˜ - ì¶”ê°€ í¬í•¨ ë””ë ‰í„°ë¦¬"
      1. ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      2. íŒì—… ì°½ì— ì•„ë˜ ê²½ë¡œ ì¶”ê°€
            
   ```
   C:\Program Files (x86)\Nettention\ProudNet\include
   ```

   3. "ë§ì»¤ - ì¼ë°˜ - ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë””ë ‰í„°ë¦¬"
      1. ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      2. íŒì—… ì°½ì— ì•„ë˜ ê²½ë¡œ ì¶”ê°€
            
   ```
   C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)
   ```

   4. "ë§ì»¤ - ì…ë ¥ - ì¶”ê°€ ì¢…ì†ì„±"
      1. ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      2. íŒì—… ì°½ì— ì•„ë˜ íŒŒì¼ëª… ì¶”ê°€
            
   ```
   ProudNetServer.lib
   ProudNetClient.lib
   ```

   5. "ë¹Œë“œ ì´ë²¤íŠ¸ - ë¹Œë“œ í›„ ì´ë²¤íŠ¸ - ëª…ë ¹ì¤„"
      1. ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      2. íŒì—… ì°½ì— ì•„ë˜ ëª…ë ¹ ì¶”ê°€
            
         ```
         xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libcrypto-3-x64.dll" "$(OutDir)"
         xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libssl-3-x64.dll" "$(OutDir)"
         ```
            
4. ê° ì†ŒìŠ¤ íŒŒì¼ì— ì½”ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
   - setting.h (diff)
        
     ```diff
     + #pragma once
     + 
     + namespace ProudSetting
     + {
     +     namespace CHAT
     +     {
     +         extern const ::Proud::Guid version;
     +         extern const int server_port;
     +     }
     + }
     + 
     ```
        
   - setting.cpp (diff)
        
     ```diff
     + #include <ProudNetClient.h>
     + #include "setting.h"
     + 
     + namespace ProudSetting
     + {
     +     namespace CHAT
     +     {
     +         const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
     +         const ::Proud::Guid version = ::Proud::Guid(guid);
     +         const int server_port = 33337;
     +     }
     + }
     + 
     ```
        
   - main.cpp (diff)
        
     ```diff
     + #include <iostream>
     + #include <format>
     + #include <memory>
     + 
     + #include <ProudNetServer.h>
     + #include "setting.h"
     + 
     + std::shared_ptr<Proud::CNetServer> net_server;
     + 
     + int main()
     + {
     + 	net_server = std::shared_ptr<Proud::CNetServer>(Proud::CNetServer::Create());
     + 
     + 	net_server->OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
     + 		{
     + 			std::cout << "Client[" << (int)clientInfo->m_HostID << "] connected.\n";
     + 		};
     + 	net_server->OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
     + 		{
     + 			std::cout << "Client[" << (int)clientInfo->m_HostID << "] disconnected.\n";
     + 		};
     + 
     + 	Proud::CStartServerParameter start_param;
     + 	start_param.m_protocolVersion = ProudSetting::CHAT::version;
     + 	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);
     + 
     + 	try
     + 	{
     + 		net_server->Start(start_param);
     + 	}
     + 	catch (Proud::Exception& error)
     + 	{
     + 		std::cout << "Server start failed: " << error.what() << endl;
     + 		return 0;
     + 	}
     + 
     + 	std::cout << ("Server started. Enterable commands:\n");
     + 	std::cout << ("-q : Quit.\n");
     + 	std::string input;
     + 	while (true)
     + 	{
     + 		std::cin >> input;
     + 		if (input[0] == '-')
     + 		{
     + 			if (input == "-q")
     + 				break;
     + 		}
     + 	}
     + 
     + 	std::cout << "Stopping server...\n";
     + 	net_server->Stop();
     + 	net_server = nullptr;
     + 	std::cout << "Server stopped.\n";
     + 	return 0;
     + }
     + 
     ```
        
   - ì „ì²´ ì½”ë“œ
     - setting.h
            
       ```cpp
       #pragma once

       namespace ProudSetting
       {
           namespace CHAT
           {
               extern const ::Proud::Guid version;
               extern const int server_port;
           }
       }
       ```
            
     - setting.cpp
            
       ```cpp
       #include <ProudNetClient.h>
       #include "setting.h"

       namespace ProudSetting
       {
           namespace CHAT
           {
               const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
               const ::Proud::Guid version = ::Proud::Guid(guid);
               const int server_port = 33337;
           }
       }
       ```
            
     - main.cpp
            
       ```cpp
       #include <iostream>
       #include <format>
       #include <memory>

       #include <ProudNetServer.h>
       #include "setting.h"

       std::shared_ptr<Proud::CNetServer> net_server;

       int main()
       {
       	net_server = std::shared_ptr<Proud::CNetServer>(Proud::CNetServer::Create());

       	net_server->OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] connected.\n";
       		};
       	net_server->OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] disconnected.\n";
       		};

       	Proud::CStartServerParameter start_param;
       	start_param.m_protocolVersion = ProudSetting::CHAT::version;
       	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);

       	try
       	{
       		net_server->Start(start_param);
       	}
       	catch (Proud::Exception& error)
       	{
       		std::cout << "Server start failed: " << error.what() << endl;
       		return 0;
       	}

       	std::cout << ("Server started. Enterable commands:\n");
       	std::cout << ("-q : Quit.\n");
       	std::string input;
       	while (true)
       	{
       		std::cin >> input;
       		if (input[0] == '-')
       		{
       			if (input == "-q")
       				break;
       		}
       	}

       	std::cout << "Stopping server...\n";
       	net_server->Stop();
       	net_server = nullptr;
       	std::cout << "Server stopped.\n";
       	return 0;
       }
       ```
            
5. í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œ ë° ì‹¤í–‰(F5) í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
   ![image.png](img/image_018-1.png)

### 1.3. Unreal Engine í”„ë¡œì íŠ¸ êµ¬ì„±

1. [Infima Gamesì˜ Free FPS Template](https://www.fab.com/listings/6a0af880-2b74-480c-a82c-8e597918dffe)ë¥¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¶”ê°€í•©ë‹ˆë‹¤.
2. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ í…œí”Œë¦¿ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
   1. ì—í”½ê²Œì„ì¦ˆ ëŸ°ì²˜ ì‹¤í–‰
   2. ì–¸ë¦¬ì–¼ ì—”ì§„ íƒ­ìœ¼ë¡œ ì´ë™
   3. ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ­ìœ¼ë¡œ ì´ë™
   4. íŒ¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª©ë¡ì—ì„œ "Free FPS Template & Tutorial"ì˜ í”„ë¡œì íŠ¸ ìƒì„± í´ë¦­
   5. ì´ë¦„ ë° í´ë”ë¥¼ ë³€ê²½í•˜ê³  ìƒì„± í´ë¦­
      - ê°€ì´ë“œì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ì´ë¦„ê³¼ ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
            
        ![image.png](img/image_019-0.png)
            
3. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ C++ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
   1. ìƒë‹¨ íˆ´ë°” - í‹€ - ìƒˆë¡œìš´ C++ í´ë˜ìŠ¤
        
      ![image.png](img/image_019.png)
        
   2. ëª¨ë“  í´ë˜ìŠ¤ ì§€ì • í›„ GameInstanceSubsystem ì„ íƒ
        
      ![image.png](img/image_020.png)
        
   3. í´ë˜ìŠ¤ íƒ€ì… - í¼ë¸”ë¦­ ì„ íƒ ë° í´ë˜ìŠ¤ ì´ë¦„ ì…ë ¥ í›„ í´ë˜ìŠ¤ ìƒì„±
      1. ê°€ì´ë“œì—ì„œëŠ” GissChatNetì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_021.png)
            
4. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ì˜ VS ì†”ë£¨ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.
   1. ì–¸ë¦¬ì–¼ ì—”ì§„ ì—ë””í„°ë¥¼ ë‹«ìŠµë‹ˆë‹¤.
   2. ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™í•©ë‹ˆë‹¤.
   3. PdnUE5ExampleClient.uproject ìš°í´ë¦­ í›„ Generate Visual Studio project files ì„ íƒ
5. ì‹œì‘ í”„ë¡œì íŠ¸ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤ (ê¶Œì¥)
   - ê°€ì´ë“œ ì´ë¯¸ì§€
        
     ![image.png](img/image_022.png)
        
6. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ UE5 ProudNet í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•©ë‹ˆë‹¤.
   1. ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ í´ë”ë¥¼ ì—½ë‹ˆë‹¤.
        
      ìˆì»· : ì—í”½ê²Œì„ì¦ˆ ëŸ°ì²˜ â†’ ë‚´ í”„ë¡œì íŠ¸ ëª©ë¡ â†’ í”„ë¡œì íŠ¸ ìš°í´ë¦­ â†’ í´ë” ë³´ê¸°
        
   2. ì•„ë˜ íŒŒì¼ì„ ì••ì¶• í•´ì œí•œ ë’¤ Plugins í´ë”ì— ë„£ìŠµë‹ˆë‹¤.
        
      Plugins í´ë”ê°€ ì—†ë‹¤ë©´ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤.
        
      [ProudNet UE5 Lib Linker Plugin.zip](attachment:3e5108f9-f75b-439a-a9d3-fd1c3312e52c:ProudNet_UE5_Linker_Plugin.zip)
        
      ![image.png](img/image_023.png)
        
   3. Visual Project ì†”ë£¨ì…˜ì„ ë‹¤ì‹œ ìƒì„± í•©ë‹ˆë‹¤.
      1. VisualStudio IDEë¥¼ ë‹«ìŠµë‹ˆë‹¤.
      2. PdnUE5ExampleClient.uproject ìš°í´ë¦­ í›„ Generate Visual Studio project files ì„ íƒ
   4. PdnUE5ExampleClient.Build.csì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      - ê°€ì´ë“œ ì´ë¯¸ì§€
            
        ![image.png](img/image_023-0.png)
            
      - ìˆ˜ì • ì‚¬í•­
            
   ```diff
   // Fill out your copyright notice in the Description page of Project Settings.
   
   using UnrealBuildTool;
   
   public class PdnUE5ExampleClient : ModuleRules
   {
   	public PdnUE5ExampleClient(ReadOnlyTargetRules Target) : base(Target)
   	{
   		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;
   	
        - 		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore" });
        + 		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore", "ProudNet" });
   
   		PrivateDependencyModuleNames.AddRange(new string[] {  });
   
   		// Uncomment if you are using Slate UI
   		// PrivateDependencyModuleNames.AddRange(new string[] { "Slate", "SlateCore" });
   		
   		// Uncomment if you are using online features
   		// PrivateDependencyModuleNames.Add("OnlineSubsystem");
   
   		// To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true
   	}
   }
        
   ```
   
      - ì „ì²´ ì½”ë“œ
            
   ```cpp
   // Fill out your copyright notice in the Description page of Project Settings.
   
   using UnrealBuildTool;
   
   public class PdnUE5ExampleClient : ModuleRules
   {
   	public PdnUE5ExampleClient(ReadOnlyTargetRules Target) : base(Target)
   	{
   		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;
   	
   		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore", "ProudNet" });
   
   		PrivateDependencyModuleNames.AddRange(new string[] {  });
   
   		// Uncomment if you are using Slate UI
   		// PrivateDependencyModuleNames.AddRange(new string[] { "Slate", "SlateCore" });
   		
   		// Uncomment if you are using online features
   		// PrivateDependencyModuleNames.Add("OnlineSubsystem");
   
   		// To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true
   	}
   }
   ```

7. GissChatNet.hì™€ .cppì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ê°€ì´ë“œ ì´ë¯¸ì§€
        
     ![image.png](img/image_023-1.png)
        
   - GissChatNet.h (diff)
        
     ```diff
       // Fill out your copyright notice in the Description page of Project Settings.
       
       #pragma once
       
       #include "CoreMinimal.h"
       #include "Subsystems/GameInstanceSubsystem.h"
       #include "GissChatNet.generated.h"
       
       /**
        *
        */
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
       {
       	GENERATED_BODY()
     
     +   private:
     + 	  virtual void Initialize(FSubsystemCollectionBase& Collection) override;
     + 	  virtual void Deinitialize() override;
       };
       
     ```
        
   - GissChatNet.cpp (diff)
        
     ```diff
       // Fill out your copyright notice in the Description page of Project Settings.
       
       
       #include "GissChatNet.h"
       
     + #include <format>
     + #include <functional>
     + 
     + #include <ProudNetClient.h>
     + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.h"
     + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.cpp"
     + 
     + static void LogPrint(const std::string& str)
     + {
     + 	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
     + }
     + 
     + static Proud::CriticalSection global_critical_section;
     + static std::shared_ptr<Proud::CNetClient> net_client;
     + static FDelegateHandle update_handle;
     + 
     + void UGissChatNet::Initialize(FSubsystemCollectionBase& Collection)
     + {
     + 	net_client = std::shared_ptr<Proud::CNetClient>(Proud::CNetClient::Create());
     + 
     + 	bool connected = false;
     + 
     + 	net_client->OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
     + 		{
     + 			Proud::CriticalSectionLock lock(global_critical_section, true);
     + 
     + 			if (info->m_errorType == Proud::ErrorType::Ok)
     + 			{
     + 				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client->GetLocalHostID());
     + 				LogPrint(log);
     + 
     + 				connected = true;
     + 			}
     + 			else
     + 			{
     + 				auto log = "Failed to connect to server.\n";
     + 				LogPrint(log);
     + 			}
     + 		};
     + 
     + 	net_client->OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
     + 		{
     + 			Proud::CriticalSectionLock lock(global_critical_section, true);
     + 
     + 			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo->m_comment).GetString());
     + 			LogPrint(log);
     + 
     + 			connected = false;
     + 			if (update_handle.IsValid())
     + 			{
     + 				FCoreDelegates::OnEndFrame.Remove(update_handle);
     + 				update_handle.Reset();
     + 			}
     + 		};
     + 
     + 
     + 	Proud::CNetConnectionParam connection_param;
     + 	connection_param.m_protocolVersion = ProudSetting::CHAT::version;
     + 	connection_param.m_serverIP = _PNT("localhost");
     + 	connection_param.m_serverPort = ProudSetting::CHAT::server_port;
     + 	connection_param.m_closeNoPingPongTcpConnections = false;
     + 
     + 	net_client->Connect(connection_param);
     + 
     + 	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
     + 		{
     + 			if (net_client)
     + 				net_client->FrameMove();
     + 		}
     + 	);
     + }
     + 
     + void UGissChatNet::Deinitialize()
     + {
     + 	net_client->Disconnect();
     + 	net_client = nullptr;
     + }
     + 
     ```
        
   - ì „ì²´ ì½”ë“œ
     - GissChatNet.h
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.

       #pragma once

       #include "CoreMinimal.h"
       #include "Subsystems/GameInstanceSubsystem.h"
       #include "GissChatNet.generated.h"

       /**
        *
        */
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
       {
       	GENERATED_BODY()

       private:
       	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
       	virtual void Deinitialize() override;
       };
       ```
            
     - GissChatNet.cpp
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.

       #include "GissChatNet.h"

       #include <format>
       #include <functional>

       #include <ProudNetClient.h>
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.cpp"

       static void LogPrint(const std::string& str)
       {
       	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
       }

       static Proud::CriticalSection global_critical_section;
       static std::shared_ptr<Proud::CNetClient> net_client;
       static FDelegateHandle update_handle;

       void UGissChatNet::Initialize(FSubsystemCollectionBase& Collection)
       {
       	net_client = std::shared_ptr<Proud::CNetClient>(Proud::CNetClient::Create());

       	bool connected = false;

       	net_client->OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);

       			if (info->m_errorType == Proud::ErrorType::Ok)
       			{
       				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client->GetLocalHostID());
       				LogPrint(log);

       				connected = true;
       			}
       			else
       			{
       				auto log = "Failed to connect to server.\n";
       				LogPrint(log);
       			}
       		};

       	net_client->OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);

       			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo->m_comment).GetString());
       			LogPrint(log);

       			connected = false;
       			if (update_handle.IsValid())
       			{
       				FCoreDelegates::OnEndFrame.Remove(update_handle);
       				update_handle.Reset();
       			}
       		};

       	Proud::CNetConnectionParam connection_param;
       	connection_param.m_protocolVersion = ProudSetting::CHAT::version;
       	connection_param.m_serverIP = _PNT("localhost");
       	connection_param.m_serverPort = ProudSetting::CHAT::server_port;
       	connection_param.m_closeNoPingPongTcpConnections = false;

       	net_client->Connect(connection_param);

       	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
       		{
       			if (net_client)
       				net_client->FrameMove();
       		}
       	);
       }

       void UGissChatNet::Deinitialize()
       {
       	net_client->Disconnect();
       	net_client = nullptr;
       }
       ```
            
8. í…ŒìŠ¤íŠ¸
   1. PdnUE5ExampleServerì˜ chat_serverë¥¼ ë¹Œë“œ ë° ì‹¤í–‰í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_024.png)
        
   2. PdnUE5ExampleClientë¥¼ ë¹Œë“œí•˜ê³  ì–¸ë¦¬ì–¼ ì—”ì§„ ì—ë””í„°ì—ì„œ ë ˆë²¨ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_025.png)
        
   3. ì•„ë˜ì™€ ê°™ì´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì—°ê²°ë˜ë©´ ì„±ê³µì…ë‹ˆë‹¤.
      ![image.png](img/image_026.png)
      ![image.png](img/image_027.png)

---

## 2. ë¡œì»¬ ì±„íŒ…ì°½ ë§Œë“¤ê¸°

ì´ ì„¹ì…˜ì—ì„œëŠ” Unreal Engine 5ì—ì„œ ë¡œì»¬ ì±„íŒ…ì°½ì„ ë§Œë“¤ê³  ê¸°ë³¸ì ì¸ ì±„íŒ… ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### 2.1. ì±„íŒ…ì°½ ìœ„ì ¯ ë§Œë“¤ê¸°

1. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ BP_ChatWidget ìœ„ì ¯ ë¸”ë£¨í”„ë¦°íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
   1. ì½˜í…ì¸  ë¸Œë¼ìš°ì €ì˜ ë¹ˆ ê³³ì„ ìš°í´ë¦­ í•˜ì—¬ ì½˜í…ìŠ¤íŠ¸ ë©”ë‰´ë¥¼ ì—½ë‹ˆë‹¤.
   2. "ê³ ê¸‰ ì• ì…‹ ìƒì„± - ìœ ì € ì¸í„°í˜ì´ìŠ¤ - ìœ„ì ¯ ë¸”ë£¨í”„ë¦°íŠ¸"ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
        
      ![image.png](img/image_028.png)
        
   3. "ì‚¬ìš©ì ìœ„ì ¯"ì„ ì„ íƒí•©ë‹ˆë‹¤
   4. ì´ë¦„ì„ BP_ChatWidget ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤
        
      ![image.png](img/image_029.png)
        
2. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ BP_ChatWidget ìœ„ì ¯ì˜ ëª¨ìŠµì„ êµ¬ì„±í•©ë‹ˆë‹¤.
   1. BP_ChatWidget ë¥¼ ë”ë¸”í´ë¦­í•˜ì—¬ ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—½ë‹ˆë‹¤.
   2. ì•„ë˜ì˜ êµ¬ì¡°ì— ë§ê²Œ ìœ„ì ¯ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
      - ìœ„ì ¯ ìš”ì†Œ êµ¬ì¡°
            
        ```
        >> ìº”ë²„ìŠ¤ íŒ¨ë„
        	>> ìº”ë²„ìŠ¤ íŒ¨ë„
        		- ì•µì»¤: ì¢Œí•˜ë‹¨
        		- ìœ„ì¹˜: [x: 100, y: -200]
        		- í¬ê¸°: [x: 640, y: 360]
        		- ì •ë ¬: [x: 0, y: 1]
        		>> ìŠ¤í¬ë¡¤ ë°•ìŠ¤
        			- ì•µì»¤: ìƒë‹¨
        			- ìœ„ì¹˜: [x: 0, y: 0]
        			- í¬ê¸°: [x: 640, y: 300]
        			- ì •ë ¬: [x: 0.5, y: 0]
        		>> ìº”ë²„ìŠ¤ íŒ¨ë„
        			- ì•µì»¤: í•˜ë‹¨
        			- ìœ„ì¹˜: [x: 0, y: 0]
        			- í¬ê¸°: [x: 640, y: 48]
        			- ì •ë ¬: [x: 0.5, y: 1]
        			>> í…ìŠ¤íŠ¸ ë°•ìŠ¤
        				- ì•µì»¤: ì™¼ìª½
        				- ìœ„ì¹˜: [x: 0, y: 0]
        				- í¬ê¸°: [x: 520, y: 48]
        				- ì •ë ¬: [x: 0, y: 0.5]
        			>> ë²„íŠ¼
        				- ì•µì»¤: ì˜¤ë¥¸ìª½
        				- ìœ„ì¹˜: [x: 0, y: 0]
        				- í¬ê¸°: [x: 100, y: 48]
        				- ì •ë ¬: [x: 1, y: 0.5]
        				>> í…ìŠ¤íŠ¸
        					- í…ìŠ¤íŠ¸: "ì „ì†¡"
        ```
            
      êµ¬ì„± ì™„ë£Œ ì‹œ ëª¨ìŠµì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_030.png)
        
3. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ BP_ChatWidgetì„ ë·°í¬íŠ¸ì— ì¶”ê°€í•©ë‹ˆë‹¤.
   1. ë ˆë²¨ ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—½ë‹ˆë‹¤.
        
      ![image.png](img/image_031.png)
        
   2. Create Widget ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³ , í´ë˜ìŠ¤ë¥¼ BP_ChatWidgetìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_032.png)
        
      ![image.png](img/image_033.png)
        
   3. Add to Viewport ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_034.png)
        
      ![image.png](img/image_035.png)
        
4. ë ˆë²¨ì„ ì‹¤í–‰í•˜ê³  ì±„íŒ…ì°½ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.
    
   ![image.png](img/image_036.png)

### 2.2. ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°

1. ìƒˆë¡œìš´ ìœ„ì ¯ ë¸”ë£¨í”„ë¦°íŠ¸ BP_ChatBlockì„ ë§Œë“¤ê³  ëª¨ìŠµì„ êµ¬ì„±í•©ë‹ˆë‹¤.
   1. ì•„ë˜ì˜ êµ¬ì¡°ì— ë§ê²Œ ìœ„ì ¯ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
      - ìœ„ì ¯ ìš”ì†Œ êµ¬ì¡°
            
        ```
        >> ìº”ë²„ìŠ¤ íŒ¨ë„
        	>> ë³´ë”
        		- ì•µì»¤: ì¢Œìƒë‹¨
        		- ìœ„ì¹˜: [x: 0, y: 0]
        		- í¬ê¸°: [x: 640, y: 40]
        		- ì •ë ¬: [x: 0, y: 0]
        		- ë¸ŒëŸ¬ì‹œ ì»¬ëŸ¬: [R: 1, G: 1, B: 1, A: 0.5]
        		>> í…ìŠ¤íŠ¸
        			> ì´ë¦„: ChatText
        			> ë³€ìˆ˜ ì—¬ë¶€ ì²´í¬
        			- ê°€ë¡œì •ë ¬: ì™¼ìª½
        			- ì„¸ë¡œì •ë ¬: ì¤‘ì•™
        			- í°íŠ¸-í¬ê¸°: 20
        ```
            
      êµ¬ì„± ì™„ë£Œ ì‹œ ëª¨ìŠµì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_037.png)
        
2. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ BP_ChatBlock ìœ„ì ¯ì˜ ë¸”ë£¨í”„ë¦°íŠ¸ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
   1. ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_038.png)
        
   2. SetChatText í•¨ìˆ˜ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
      1. ë¸”ë£¨í”„ë¦°íŠ¸ ì°½ì—ì„œ í•¨ìˆ˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_039.png)
            
      2. ë””í…Œì¼ ì°½ì—ì„œ í•¨ìˆ˜ ì¸ìë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_040.png)
            
      3. ë¸”ë£¨í”„ë¦°íŠ¸ ì°½ì˜ ë³€ìˆ˜ ëª©ë¡ì—ì„œ ChatTextë¥¼ ë“œë˜ê·¸ í•˜ì—¬ Get ChatTextë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
      4. SetText (Text) ë…¸ë“œë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
      ë‹¤ë¥¸ í•­ëª©ì„ ì°©ê°í•˜ì—¬ ì„ íƒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_041.png)
            
         ![image.png](img/image_042.png)
            
3. ì•„ë˜ ì ˆì°¨ì— ë”°ë¼ BP_ChatWidget ìœ„ì ¯ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
   1. BP_ChatWidget ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—´ê³ , ë””ìì´ë„ˆ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤.
   2. ì•„ë˜ë¥¼ ì°¸ê³ í•˜ì—¬ ìœ„ì ¯ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
      - ìœ„ì ¯ ìš”ì†Œ êµ¬ì¡°
            
        ```
        -> ìº”ë²„ìŠ¤ íŒ¨ë„
        	-> ìº”ë²„ìŠ¤ íŒ¨ë„
        		-> ìŠ¤í¬ë¡¤ ë°•ìŠ¤
        			> ì´ë¦„: ChatBlockArea
        			> ë³€ìˆ˜ ì—¬ë¶€ ì²´í¬
        		-> ìº”ë²„ìŠ¤ íŒ¨ë„
        			-> ë²„íŠ¼
        				> ì´ë¦„: SendButton
        				> ë³€ìˆ˜ ì—¬ë¶€ ì²´í¬
        			-> í…ìŠ¤íŠ¸ ë°•ìŠ¤
        				> ì´ë¦„: ChatTextBox
        				> ë³€ìˆ˜ ì—¬ë¶€ ì²´í¬
        ```
            
      ìˆ˜ì • í›„ ëª¨ìŠµì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_043.png)
        
   3. ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ê·¸ë˜í”„ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤.
   4. PrintChat í•¨ìˆ˜ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
      1. í•¨ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_044.png)
            
      2. Create Widget ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  í´ë˜ìŠ¤ì— BP_ChatBlockì„ ì§€ì •í•©ë‹ˆë‹¤.
      3. BP_ChatBlockì˜ SetChatText ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
      4. ë³€ìˆ˜ì˜ ChatBlockAreaë¥¼ ë“œë˜ê·¸í•˜ì—¬ ì¶”ê°€í•©ë‹ˆë‹¤.
      5. Add Child ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_045.png)
            
   5. ì±„íŒ… ë©”ì„¸ì§€ ì „ì†¡ ì´ë²¤íŠ¸ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
      1. ë³€ìˆ˜ì—ì„œ SendButtonë¥¼ ì„ íƒí•˜ê³  í´ë¦­ ì‹œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_046.png)
            
      2. ë³€ìˆ˜ ChatTextBoxì™€ í•¨ìˆ˜ PrintChatë¥¼ ë“œë˜ê·¸ í•˜ì—¬ ì¶”ê°€í•©ë‹ˆë‹¤.
      3. Get Text (Text Box) ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ëª¨ë‘ ì—°ê²°í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_047.png)
            
   6. ì•„ë˜ì™€ ê°™ì´ ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•˜ì—¬ ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì„ íƒ ì‚¬í•­)
        
      ![image.png](img/image_048.png)
        
      ![image.png](img/image_049.png)
        
      1. ì…ë ¥ëœ ë©”ì„¸ì§€ê°€ ì—†ìœ¼ë©´ ì „ì†¡ ë¬´ì‹œ
      2. ë©”ì„¸ì§€ ì „ì†¡ í›„ ì…ë ¥í•œ ë©”ì„¸ì§€ ìë™ ì‚­ì œ
      3. ìƒˆë¡œìš´ ì±„íŒ…ì´ ìˆìœ¼ë©´ ì±„íŒ…ì°½ì´ ë§¨ ì•„ë˜ë¡œ ìë™ ìŠ¤í¬ë¡¤
4. ë ˆë²¨ì„ ì‹¤í–‰í•˜ê³  ì±„íŒ… ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.
    
   ![image.png](img/image_050.png)

---

## 3. ì˜¨ë¼ì¸ ì±„íŒ…ì°½ ë§Œë“¤ê¸°

ì´ ì„¹ì…˜ì—ì„œëŠ” ProudNetì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì±„íŒ… ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### 3.1. Visual Studio í”„ë¡œì íŠ¸ ì‘ì—…

1. PdnUE5ExampleServerì—ì„œ ìƒˆë¡œìš´ ë¹ˆ í”„ë¡œì íŠ¸ chat_pidlì„ ì¶”ê°€í•©ë‹ˆë‹¤.

2. ë‘ ê°œì˜ íŒŒì¼ C2S.PIDL, S2C.PIDLì„ ì¶”ê°€í•˜ê³ , ì†ì„±ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. "ì¼ë°˜ - í•­ëª© í˜•ì‹"
      ë“œë¡­ë‹¤ìš´ì—ì„œ "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬" ì„ íƒ
   2. "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬ - ì¼ë°˜ - ëª…ë ¹ì¤„"
      í…ìŠ¤íŠ¸ ì…ë ¥
      ```
      C:\"Program Files (x86)"\Nettention\ProudNet\util\PIDL.exe "%(FullPath)" -cpp
      ```
   3. "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬ - ì¼ë°˜ - ì„¤ëª…"
      í…ìŠ¤íŠ¸ ì…ë ¥
      ```
      %(Filename).PIDL Compiling...
      ```
   4. "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬ - ì¼ë°˜ - ì¶œë ¥"
      ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      íŒì—… ì°½ì— ì•„ë˜ ê²½ë¡œ ì¶”ê°€
      ```
      %(RootDir)%(Directory)\%(Filename)_common.cpp
      %(RootDir)%(Directory)\%(Filename)_common.h
      %(RootDir)%(Directory)\%(Filename)_proxy.cpp
      %(RootDir)%(Directory)\%(Filename)_proxy.h
      %(RootDir)%(Directory)\%(Filename)_stub.cpp
      %(RootDir)%(Directory)\%(Filename)_stub.h
      ```

3. ê° íŒŒì¼ì— ì½”ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
   - ì „ì²´ ì½”ë“œ
     - C2S.PIDL
       ```pidl
       [access=public]
       global CHAT_C2S 3000
       {
           Chat([in] Proud::String message);
       }
       ```
     - S2C.PIDL
       ```pidl
       [access=public]
       global CHAT_S2C 4000
       {
           SystemChat([in] Proud::String message);
           BroadcastChat([in] int sender_id, [in] Proud::String message);
       }
       ```

4. chat_pidl í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.
   chat_pidl í”„ë¡œì íŠ¸ í´ë”ì—ì„œ ë¹Œë“œëœ ì†ŒìŠ¤ ì½”ë“œ íŒŒì¼ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

   ![image.png](img/image_051.png)

5. chat_server í”„ë¡œì íŠ¸ì˜ main.cpp ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     ```diff
       #include <iostream>
       #include <format>
       #include <memory>
       
       #include <ProudNetServer.h>
       #include "setting.h"
       
     + #include "../chat_pidl/S2C_common.h"
     + #include "../chat_pidl/S2C_common.cpp"
     + #include "../chat_pidl/S2C_proxy.h"
     + #include "../chat_pidl/S2C_proxy.cpp"
     + 
     + #include "../chat_pidl/C2S_common.h"
     + #include "../chat_pidl/C2S_common.cpp"
     + #include "../chat_pidl/C2S_stub.h"
     + #include "../chat_pidl/C2S_stub.cpp"
     + 
     + 
     + Proud::HostID group_host_id = Proud::HostID_None;
     + CHAT_S2C::Proxy s2c_proxy;
     + 
     + struct CHAT_C2S_Stub : public CHAT_C2S::Stub
     + {
     + public:
     + 	DECRMI_CHAT_C2S_Chat;
     + };
     + 
     + DEFRMI_CHAT_C2S_Chat(CHAT_C2S_Stub)
     + {
     + 	Proud::RmiContext rmi_context;
     + 	rmi_context.m_enableLoopback = false;
     + 	s2c_proxy.BroadcastChat(group_host_id, rmi_context, (int)remote, message);
     + 	std::cout << std::format("Player[{}] say {}\n", (int)remote, StringT2A(message).GetString());
     + 	return true;
     + }
     + 
     + CHAT_C2S_Stub c2s_stub;
       std::shared_ptr<Proud::CNetServer> net_server;
       
       int main()
       {
       	net_server = std::shared_ptr<Proud::CNetServer>(Proud::CNetServer::Create());
       
       	net_server->OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] connected.\n";
     + 
     + 			Proud::HostID list[100];
     + 			int listCount = net_server->GetClientHostIDs(list, 100);
     + 			group_host_id = net_server->CreateP2PGroup(list, listCount, Proud::ByteArray());
     + 
     + 			auto message = std::format("Player[{}] has joined.", (int)clientInfo->m_HostID);
     + 			Proud::RmiContext rmi_context;
     + 			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
       		};
       	net_server->OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] disconnected.\n";
     + 
     + 			auto message = std::format("Player[{}] has left the game.", (int)clientInfo->m_HostID);
     + 			Proud::RmiContext rmi_context;
     + 			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
       		};
       
     + 	net_server->AttachProxy(&s2c_proxy);
     + 	net_server->AttachStub(&c2s_stub);
     + 
       	Proud::CStartServerParameter start_param;
       	start_param.m_protocolVersion = ProudSetting::CHAT::version;
       	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);
       
       	try
       	{
       		net_server->Start(start_param);
       	}
       	catch (Proud::Exception& error)
       	{
       		std::cout << "Server start failed: " << error.what() << endl;
       		return 0;
       	}
       
       	std::cout << ("Server started. Enterable commands:\n");
       	std::cout << ("-q : Quit.\n");
       	std::string input;
       	while (true)
       	{
       		std::cin >> input;
       		if (input[0] == '-')
       		{
       			if (input == "-q")
       				break;
       		}
     + 		else
     + 		{
     + 			Proud::RmiContext rmi_context;
     + 			s2c_proxy.SystemChat(group_host_id, rmi_context, input);
     + 		}
       	}
       
       	std::cout << "Stopping server...\n";
       	net_server->Stop();
       	net_server = nullptr;
       	std::cout << "Server stopped.\n";
       	return 0;
       }
     ```

   - ì „ì²´ ì½”ë“œ
     - main.cpp
       ```cpp
       #include <iostream>
       #include <format>
       #include <memory>

       #include <ProudNetServer.h>
       #include "setting.h"

       #include "../chat_pidl/S2C_common.h"
       #include "../chat_pidl/S2C_common.cpp"
       #include "../chat_pidl/S2C_proxy.h"
       #include "../chat_pidl/S2C_proxy.cpp"

       #include "../chat_pidl/C2S_common.h"
       #include "../chat_pidl/C2S_common.cpp"
       #include "../chat_pidl/C2S_stub.h"
       #include "../chat_pidl/C2S_stub.cpp"


       Proud::HostID group_host_id = Proud::HostID_None;
       CHAT_S2C::Proxy s2c_proxy;

       struct CHAT_C2S_Stub : public CHAT_C2S::Stub
       {
       public:
       	DECRMI_CHAT_C2S_Chat;
       };

       DEFRMI_CHAT_C2S_Chat(CHAT_C2S_Stub)
       {
       	Proud::RmiContext rmi_context;
       	rmi_context.m_enableLoopback = false;
       	s2c_proxy.BroadcastChat(group_host_id, rmi_context, (int)remote, message);
       	std::cout << std::format("Player[{}] say {}\n", (int)remote, StringT2A(message).GetString());
       	return true;
       }

       CHAT_C2S_Stub c2s_stub;
       std::shared_ptr<Proud::CNetServer> net_server;

       int main()
       {
       	net_server = std::shared_ptr<Proud::CNetServer>(Proud::CNetServer::Create());

       	net_server->OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] connected.\n";

       			Proud::HostID list[100];
       			int listCount = net_server->GetClientHostIDs(list, 100);
       			group_host_id = net_server->CreateP2PGroup(list, listCount, Proud::ByteArray());

       			auto message = std::format("Player[{}] has joined.", (int)clientInfo->m_HostID);
       			Proud::RmiContext rmi_context;
       			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
       		};
       	net_server->OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] disconnected.\n";

       			auto message = std::format("Player[{}] has left the game.", (int)clientInfo->m_HostID);
       			Proud::RmiContext rmi_context;
       			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
       		};

       	net_server->AttachProxy(&s2c_proxy);
       	net_server->AttachStub(&c2s_stub);

       	Proud::CStartServerParameter start_param;
       	start_param.m_protocolVersion = ProudSetting::CHAT::version;
       	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);

       	try
       	{
       		net_server->Start(start_param);
       	}
       	catch (Proud::Exception& error)
       	{
       		std::cout << "Server start failed: " << error.what() << endl;
       		return 0;
       	}

       	std::cout << ("Server started. Enterable commands:\n");
       	std::cout << ("-q : Quit.\n");
       	std::string input;
       	while (true)
       	{
       		std::cin >> input;
       		if (input[0] == '-')
       		{
       			if (input == "-q")
       				break;
       		}
       		else
       		{
       			Proud::RmiContext rmi_context;
       			s2c_proxy.SystemChat(group_host_id, rmi_context, input);
       		}
       	}

       	std::cout << "Stopping server...\n";
       	net_server->Stop();
       	net_server = nullptr;
       	std::cout << "Server stopped.\n";
       	return 0;
               }
        ```

### 3.2. ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ ì‘ì—…

1. ì–¸ë¦¬ì–¼ ì—”ì§„ ì—ë””í„°ì—ì„œ UserWidgetì„ ìƒì†ë°›ëŠ” C++ í´ë˜ìŠ¤ BaseChatWidgetì„ ìƒì„±í•©ë‹ˆë‹¤.

2. ìƒì„±ëœ BaseChatWidget í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - BaseChatWidget.h
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         #pragma once
         
         #include "CoreMinimal.h"
         #include "Blueprint/UserWidget.h"
         #include "BaseChatWidget.generated.h"
         
         /**
          * 
          */
         UCLASS()
         class PDNUE5EXAMPLECLIENT_API UBaseChatWidget : public UUserWidget
         {
         	GENERATED_BODY()
         
       + public:
       + 	UFUNCTION(BlueprintImplementableEvent)
       + 	void PrintChat(const FText& message);
         };
       ```
            
   - ì „ì²´ ì½”ë“œ
     - BaseChatWidget.h
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.

       #pragma once

       #include "CoreMinimal.h"
       #include "Blueprint/UserWidget.h"
       #include "BaseChatWidget.generated.h"

       /**
        * 
        */
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API UBaseChatWidget : public UUserWidget
       {
       	GENERATED_BODY()
       	
       public:
       	UFUNCTION(BlueprintImplementableEvent)
       	void PrintChat(const FText& message);
       };
       ```
            
3. GissChatNet í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - GissChatNet.h
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         #pragma once
         
         #include "CoreMinimal.h"
         #include "Subsystems/GameInstanceSubsystem.h"
         #include "GissChatNet.generated.h"
         
         /**
          *
          */
         UCLASS()
         class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
         {
         	GENERATED_BODY()
         
       + public:
       + 	UFUNCTION(BlueprintCallable)
       + 	void SendChat(const FText& message);
       + 
         private:
         	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
         	virtual void Deinitialize() override;
         };
       ```
            
     - GissChatNet.cpp
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         
         #include "GissChatNet.h"
         
         #include <format>
         #include <functional>
         
         #include <ProudNetClient.h>
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.h"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.cpp"
         
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_common.h"
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_common.cpp"
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_proxy.h"
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_proxy.cpp"
       + 
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_common.h"
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_common.cpp"
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_stub.h"
       + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_stub.cpp"
       + 
       + 
       + static Proud::HostID pop_group_host_id = Proud::HostID_None;
       + static CHAT_C2S::Proxy c2s_proxy;
       + 
       + struct CHAT_S2C_Stub : public CHAT_S2C::Stub
       + {
       + public:
       + 	DECRMI_CHAT_S2C_SystemChat;
       + 	DECRMI_CHAT_S2C_BroadcastChat;
       + 
       + 	std::function<void(Proud::String message)> sys_chat_evenet;
       + 	std::function<void(int user_id, Proud::String message)> user_chat_evenet;
       + };
       + 
       + DEFRMI_CHAT_S2C_SystemChat(CHAT_S2C_Stub)
       + {
       + 	if (sys_chat_evenet)
       + 		sys_chat_evenet(message);
       + 	return true;
       + }
       + 
       + DEFRMI_CHAT_S2C_BroadcastChat(CHAT_S2C_Stub)
       + {
       + 	if (user_chat_evenet)
       + 		user_chat_evenet(sender_id, message);
       + 	return true;
       + }
       + 
       + static CHAT_S2C_Stub s2c_stub;
       + 
         static void LogPrint(const std::string& str)
         {
         	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
         }
         
         static Proud::CriticalSection global_critical_section;
         static std::shared_ptr<Proud::CNetClient> net_client;
         static FDelegateHandle update_handle;
         
       + void UGissChatNet::SendChat(const FText& message)
       + {
       + 	Proud::String message_pstr(*message.ToString());
       + 	Proud::RmiContext context;
       + 	context.m_enableLoopback = true;
       + 	c2s_proxy.Chat(Proud::HostID_Server, context, message_pstr);
       + }
       + 
       + #include "Blueprint/WidgetBlueprintLibrary.h"
       + #include "BaseChatWidget.h"
       + void PrintChatToWIdget(UObject* uobj, const FText& message)
       + {
       + 	if (!IsValid(uobj))
       + 	{
       + 		UE_LOG(LogTemp, Warning, TEXT("uobjê°€ ì—ëŸ¬ê°’ì„"));
       + 		return;
       + 	}
       + 
       + 	if (UWorld* World = uobj->GetWorld())
       + 	{
       + 		TArray<UUserWidget*> FoundWidgets;
       + 		UWidgetBlueprintLibrary::GetAllWidgetsOfClass(World, FoundWidgets, UBaseChatWidget::StaticClass(), false);
       + 		if (FoundWidgets.Num() > 0)
       + 		{
       + 			UBaseChatWidget* chat_widget = Cast<UBaseChatWidget>(FoundWidgets[0]);
       + 			if (chat_widget)
       + 				chat_widget->PrintChat(message);
       + 			else
       + 				UE_LOG(LogTemp, Warning, TEXT("UMyChatWidget íƒ€ì… ë¶ˆì¼ì¹˜?"));
       + 		}
       + 		else
       + 			UE_LOG(LogTemp, Warning, TEXT("UMyChatWidget ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."));
       + 	}
       + 	else
       + 		UE_LOG(LogTemp, Warning, TEXT("World ì°¸ì¡°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
       + }
       + 
         void UGissChatNet::Initialize(FSubsystemCollectionBase& Collection)
         {
       + 	s2c_stub.sys_chat_evenet = [this](Proud::String message)
       + 		{
       + 			auto chat = std::format(L"< Server > : {}", message.c_str());
       + 			PrintChatToWIdget(this, FText::FromString(chat.c_str()));
       + 		};
       + 	s2c_stub.user_chat_evenet = [this](int user_id, Proud::String message)
       + 		{
       + 			auto chat = std::format(L"User[{}] : {}", user_id, message.c_str());
       + 			PrintChatToWIdget(this, FText::FromString(chat.c_str()));
       + 		};
       + 
         	net_client = std::shared_ptr<Proud::CNetClient>(Proud::CNetClient::Create());
         
         	bool connected = false;
         
         	net_client->OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
         		{
         			Proud::CriticalSectionLock lock(global_critical_section, true);
         
         			if (info->m_errorType == Proud::ErrorType::Ok)
         			{
         				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client->GetLocalHostID());
         				LogPrint(log);
         
         				connected = true;
         			}
         			else
         			{
         				auto log = "Failed to connect to server.\n";
         				LogPrint(log);
         			}
         		};
         
         	net_client->OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
         		{
         			Proud::CriticalSectionLock lock(global_critical_section, true);
         
         			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo->m_comment).GetString());
         			LogPrint(log);
         
         			connected = false;
         			if (update_handle.IsValid())
         			{
         				FCoreDelegates::OnEndFrame.Remove(update_handle);
         				update_handle.Reset();
         			}
         		};
         
         
       + 	net_client->AttachProxy(&c2s_proxy);
       + 	net_client->AttachStub(&s2c_stub);
       + 
         	Proud::CNetConnectionParam connection_param;
         	connection_param.m_protocolVersion = ProudSetting::CHAT::version;
         	connection_param.m_serverIP = _PNT("localhost");
         	connection_param.m_serverPort = ProudSetting::CHAT::server_port;
         	connection_param.m_closeNoPingPongTcpConnections = false;
         
         	net_client->Connect(connection_param);
         
         	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
         		{
         			if (net_client)
         				net_client->FrameMove();
         		}
         	);
         }
         
         void UGissChatNet::Deinitialize()
         {
       + 	s2c_stub.sys_chat_evenet = nullptr;
       + 	s2c_stub.user_chat_evenet = nullptr;
       + 
         	net_client->Disconnect();
         	net_client = nullptr;
         }
       ```
            
   - ì „ì²´ ì½”ë“œ
     - GissChatNet.h
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.

       #pragma once

       #include "CoreMinimal.h"
       #include "Subsystems/GameInstanceSubsystem.h"
       #include "GissChatNet.generated.h"

       /**
        *
        */
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
       {
       	GENERATED_BODY()
       	
       public:
       	UFUNCTION(BlueprintCallable)
       	void SendChat(const FText& message);

       private:
       	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
       	virtual void Deinitialize() override;
       };
       ```
            
     - GissChatNet.cpp
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.

       #include "GissChatNet.h"

       #include <format>
       #include <functional>

       #include <ProudNetClient.h>
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.cpp"

       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_common.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_common.cpp"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_proxy.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_proxy.cpp"

       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_common.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_common.cpp"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_stub.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_stub.cpp"

       static Proud::HostID pop_group_host_id = Proud::HostID_None;
       static CHAT_C2S::Proxy c2s_proxy;

       struct CHAT_S2C_Stub : public CHAT_S2C::Stub
       {
       public:
       	DECRMI_CHAT_S2C_SystemChat;
       	DECRMI_CHAT_S2C_BroadcastChat;

       	std::function<void(Proud::String message)> sys_chat_evenet;
       	std::function<void(int user_id, Proud::String message)> user_chat_evenet;
       };

       DEFRMI_CHAT_S2C_SystemChat(CHAT_S2C_Stub)
       {
       	if (sys_chat_evenet)
       		sys_chat_evenet(message);
       	return true;
       }

       DEFRMI_CHAT_S2C_BroadcastChat(CHAT_S2C_Stub)
       {
       	if (user_chat_evenet)
       		user_chat_evenet(sender_id, message);
       	return true;
       }

       static CHAT_S2C_Stub s2c_stub;

       static void LogPrint(const std::string& str)
       {
       	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
       }

       static Proud::CriticalSection global_critical_section;
       static std::shared_ptr<Proud::CNetClient> net_client;
       static FDelegateHandle update_handle;

       void UGissChatNet::SendChat(const FText& message)
       {
       	Proud::String message_pstr(*message.ToString());
       	Proud::RmiContext context;
       	context.m_enableLoopback = true;
       	c2s_proxy.Chat(Proud::HostID_Server, context, message_pstr);
       }

       #include "Blueprint/WidgetBlueprintLibrary.h"
       #include "BaseChatWidget.h"
       void PrintChatToWIdget(UObject* uobj, const FText& message)
       {
       	if (!IsValid(uobj))
       	{
       		UE_LOG(LogTemp, Warning, TEXT("uobjê°€ ì—ëŸ¬ê°’ì„"));
       		return;
       	}

       	if (UWorld* World = uobj->GetWorld())
       	{
       		TArray<UUserWidget*> FoundWidgets;
       		UWidgetBlueprintLibrary::GetAllWidgetsOfClass(World, FoundWidgets, UBaseChatWidget::StaticClass(), false);
       		if (FoundWidgets.Num() > 0)
       		{
       			UBaseChatWidget* chat_widget = Cast<UBaseChatWidget>(FoundWidgets[0]);
       			if (chat_widget)
       				chat_widget->PrintChat(message);
       			else
       				UE_LOG(LogTemp, Warning, TEXT("UMyChatWidget íƒ€ì… ë¶ˆì¼ì¹˜?"));
       		}
       		else
       			UE_LOG(LogTemp, Warning, TEXT("UMyChatWidget ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."));
       	}
       	else
       		UE_LOG(LogTemp, Warning, TEXT("World ì°¸ì¡°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
       }

       void UGissChatNet::Initialize(FSubsystemCollectionBase& Collection)
       {
       	s2c_stub.sys_chat_evenet = [this](Proud::String message)
       		{
       			auto chat = std::format(L"< Server > : {}", message.c_str());
       			PrintChatToWIdget(this, FText::FromString(chat.c_str()));
       		};
       	s2c_stub.user_chat_evenet = [this](int user_id, Proud::String message)
       		{
       			auto chat = std::format(L"User[{}] : {}", user_id, message.c_str());
       			PrintChatToWIdget(this, FText::FromString(chat.c_str()));
       		};

       	net_client = std::shared_ptr<Proud::CNetClient>(Proud::CNetClient::Create());

       	bool connected = false;

       	net_client->OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);

       			if (info->m_errorType == Proud::ErrorType::Ok)
       			{
       				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client->GetLocalHostID());
       				LogPrint(log);

       				connected = true;
       			}
       			else
       			{
       				auto log = "Failed to connect to server.\n";
       				LogPrint(log);
       			}
       		};

       	net_client->OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);

       			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo->m_comment).GetString());
       			LogPrint(log);

       			connected = false;
       			if (update_handle.IsValid())
       			{
       				FCoreDelegates::OnEndFrame.Remove(update_handle);
       				update_handle.Reset();
       			}
       		};

       	net_client->AttachProxy(&c2s_proxy);
       	net_client->AttachStub(&s2c_stub);

       	Proud::CNetConnectionParam connection_param;
       	connection_param.m_protocolVersion = ProudSetting::CHAT::version;
       	connection_param.m_serverIP = _PNT("localhost");
       	connection_param.m_serverPort = ProudSetting::CHAT::server_port;
       	connection_param.m_closeNoPingPongTcpConnections = false;

       	net_client->Connect(connection_param);

       	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
       		{
       			if (net_client)
       				net_client->FrameMove();
       		}
       	);
       }

       void UGissChatNet::Deinitialize()
       {
       	s2c_stub.sys_chat_evenet = nullptr;
       	s2c_stub.user_chat_evenet = nullptr;

       	net_client->Disconnect();
       	net_client = nullptr;
       }
       ```
            
4. BP_ChatWidgetì˜ ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. PrintChat í•¨ìˆ˜ë¥¼ ì´ë²¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_052.png)
        
   2. BP_ChatWidgetì˜ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ BaseChatWidgetìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_053.png)
        
   3. SendButton í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      1. Get GissChatNet ë…¸ë“œì™€ Send Chat ë…¸ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤
            
         ![image.png](img/image_054.png)
            
      2. ê¸°ì¡´ì˜ Print Chat ë…¸ë“œë¥¼ Send Chat ë…¸ë“œë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
   4. BP_ChatWidget ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ì˜ ìµœì¢… ëª¨ìŠµì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_055.png)

### 3.3. ì±„íŒ…ì°½ í…ŒìŠ¤íŠ¸

1. chat_server í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.

2. ì–¸ë¦¬ì–¼ ì—”ì§„ í”„ë¡œì íŠ¸ ë ˆë²¨ì„ ì‹¤í–‰í•˜ê³  ì±„íŒ… ê¸°ëŠ¥ì„ í™•ì¸í•©ë‹ˆë‹¤.
    
   ![image.png](img/image_056.png)
    
   ![image.png](img/image_057.png)

---

## 4. ë¯¸ë¼ì§€ ìºë¦­í„° êµ¬í˜„í•˜ê¸°

ì´ ì„¹ì…˜ì—ì„œëŠ” í–¥ìƒëœ ê²Œì„í”Œë ˆì´ ê¸°ëŠ¥ì„ ê°€ì§„ ë¯¸ë¼ì§€ ìºë¦­í„°ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.

### 4.1. ë¯¸ë¼ì§€ ë¸”ë£¨í”„ë¦°íŠ¸ ìºë¦­í„° ì¶”ê°€

1. ë‘ ê°œì˜ ë¸”ë£¨í”„ë¦°íŠ¸ í´ë˜ìŠ¤ë¥¼ ë³µì œí•©ë‹ˆë‹¤.
   1. ì½˜í…ì¸  ë¸Œë¼ìš°ì €ì—ì„œ "All - ì½˜í…ì¸  - InfimaGames - FreeFPSTemplate - Core"ë¡œ ì´ë™í•©ë‹ˆë‹¤.
   2. ë‘ ê°œì˜ ë¸”ë£¨í”„ë¦°íŠ¸ í´ë˜ìŠ¤ BP_Character, ABP_Characterë¥¼ ë³µì œí•©ë‹ˆë‹¤.
   3. ê°ê° BP_MirageCharacter, ABP_MirageCharacterë¡œ ì´ë¦„ì„ ë³€ê²½í•©ë‹ˆë‹¤.

2. BP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—´ê³  ì•„ë˜ ì ˆì°¨ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
   1. ì»´í¬ë„ŒíŠ¸ ì°½ì—ì„œ CharacterArmsë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
   2. ì• ë‹ˆë©”ì´ì…˜ì˜ ì• ë‹˜ í´ë˜ìŠ¤ë¥¼ ABP_MirageCharacterë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
   3. ë©”ì‹œì˜ ìŠ¤ì¼ˆë ˆíƒˆ ë©”ì‹œ ì—ì…‹ì„ SKM_Manny_Simpleë¡œ ì§€ì •í•©ë‹ˆë‹¤.
    
   ![image.png](img/image_058.png)
    
3. BP_MirageCharacterë¥¼ ë ˆë²¨ì— ë°°ì¹˜í•˜ê³  ì‹¤í–‰í•˜ì—¬ í™•ì¸í•©ë‹ˆë‹¤.
    
   ì•„ë˜ì™€ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë°°ì¹˜ë˜ë©´ í˜„ ì‹œì  ê¸°ì¤€ ì •ìƒì…ë‹ˆë‹¤.
    ![image.png](img/image_059.png)

### 4.2. ì´ë™ ì• ë‹ˆë©”ì´ì…˜ ë¯¸ëŸ¬ë§

#### 4.2.1. ì• ë‹ˆë©”ì´ì…˜ ë³€ìˆ˜ ë³µì œ

1. C++ í´ë˜ìŠ¤ BaseMirageCharacterë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
   1. Characterë¥¼ ìƒì†ë°›ëŠ” BaseMirageCharacter í´ë˜ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
   2. ìƒì„±ëœ í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      - ìˆ˜ì • ë‚´ì—­
        - BaseMirageCharacter.h
            
          ```diff
            // Fill out your copyright notice in the Description page of Project Settings.
            
            #pragma once
            
            #include "CoreMinimal.h"
            #include "GameFramework/Character.h"
            #include "BaseMirageCharacter.generated.h"
            
            UCLASS()
            class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
            {
            	GENERATED_BODY()
            
            public:
            	// Sets default values for this character's properties
            	ABaseMirageCharacter();
            
            protected:
            	// Called when the game starts or when spawned
            	virtual void BeginPlay() override;
            
            public:	
            	// Called every frame
            	virtual void Tick(float DeltaTime) override;
            
            	// Called to bind functionality to input
            	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
            
          + 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
          + 	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
          + 
            };
            
          ```
            
      - ì „ì²´ ì½”ë“œ
        - BaseMirageCharacter.h
            
          ```cpp
          // Fill out your copyright notice in the Description page of Project Settings.
          
          #pragma once
          
          #include "CoreMinimal.h"
          #include "GameFramework/Character.h"
          #include "BaseMirageCharacter.generated.h"
          
          UCLASS()
          class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
          {
          	GENERATED_BODY()
          
          public:
          	// Sets default values for this character's properties
          	ABaseMirageCharacter();
          
          protected:
          	// Called when the game starts or when spawned
          	virtual void BeginPlay() override;
          
          public:	
          	// Called every frame
          	virtual void Tick(float DeltaTime) override;
          
          	// Called to bind functionality to input
          	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
          
          	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
          	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
          
          };
          ```
            
2. BP_MirageCharacterì˜ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ BaseMirageCharacterë¥¼ ì§€ì •í•©ë‹ˆë‹¤

3. ì´ë²¤íŠ¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ì• ë‹ˆë©”ì´ì…˜ ë³€ìˆ˜ ë³µì œë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
   1. ABP_Character ë¸”ë£¨í”„ë¦°íŠ¸ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      1. ABP_Character ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—´ê³  ì´ë²¤íŠ¸ ê·¸ë˜í”„ íƒ­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
      2. BlueprintUpdateAnimation ì´ë²¤íŠ¸ ì‹¤í–‰ íë¦„ì˜ ë ë¶€ë¶„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
        
         ![image.png](img/image_060.png)
        
      3. Get Actor Of Class ë…¸ë“œë¥¼ ìƒì„± ë° ì—°ê²°í•˜ê³  Classì— BP_MirageCharacterë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
      4. Update Animation Parameter ë…¸ë“œë¥¼ ìƒì„± ë° ì—°ê²°í•˜ê³  ëª¨ë“  ë³€ìˆ˜ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
         ëª¨ë“  ë³€ìˆ˜ëŠ” ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ë³€ìˆ˜ ëª©ë¡ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            
         ![image.png](img/image_061.png)
            
         ![image.png](img/image_062.png)
            
   2. BP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      1. BP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—´ê³  ì´ë²¤íŠ¸ ê·¸ë˜í”„ íƒ­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
      2. 4ê°œ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_063.png)
            
      3. Event UpdateAnimationParameter ë…¸ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
      4. ì´ë²¤íŠ¸ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë¸”ë£¨í”„ë¦°íŠ¸ ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_064.png)
            
      5. Event Tick ë…¸ë“œì˜ ì—°ê²°ì„ ëŠìŠµë‹ˆë‹¤.
            
         ![image.png](img/image_065.png)
            
   3. ABP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      1. ABP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—´ê³  ì´ë²¤íŠ¸ ê·¸ë˜í”„ íƒ­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
      2. Try Get Pawn Owner ë…¸ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
      3. Cast To BP_MirageCharacter ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
      4. í˜•ë³€í™˜ëœ ìºë¦­í„°ë¡œë¶€í„° ë³€ìˆ˜ë¥¼ ê°€ì ¸ì™€ ì• ë‹ˆë©”ì´ì…˜ ë¸”ë£¨í”„ë¦°íŠ¸ ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
        
         ![image.png](img/image_066.png)
        
4. ë ˆë²¨ ì‹¤í–‰ ë° ì• ë‹ˆë©”ì´ì…˜ ë³µì œ ë™ì‘ í™•ì¸
    
   ë‹¬ë¦¬ê¸°, ì í”„, ì¡°ì¤€ ë“±ì˜ ë™ì‘ ì‹œ ëª¨ì…˜ì„ ë”°ë¼í•˜ëŠ” ë¯¸ë¼ì§€ ìºë¦­í„°ì˜ ëª¨ìŠµì„ ê´€ì°° ê°€ëŠ¥í•©ë‹ˆë‹¤.
    
   ![image.png](img/image_067.png)

#### 4.2.2. ë³´ì • ì• ë‹ˆë©”ì´ì…˜ ì ìš©

1. ë³´ì • ì• ë‹ˆë©”ì´ì…˜ ì¤€ë¹„
   1. ì• ë‹ˆë©”ì´ì…˜ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ìŠµë‹ˆë‹¤.
        
      [Invert.fbx](attachment:6af0f185-17bc-41be-8fcf-4ebf4e1a8d2e:Invert.fbx)
        
   2. ë‹¤ìš´ë¡œë“œ ë°›ì€ íŒŒì¼ì„ ì–¸ë¦¬ì–¼ ì—ë””í„°ì˜ ì½˜í…ì¸  ë¸Œë¼ìš°ì €ë¡œ ë“œë˜ê·¸ í•©ë‹ˆë‹¤.
   3. Animations íƒ­ì˜ ìŠ¤ì¼ˆë ˆí†¤ í•­ëª©ì— SKEL_UE5_Mannequinì„ ì§€ì •í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_068.png)
        
   4. ì„í¬íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
   5. ìƒì„±ëœ ë‘ ê°œì˜ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ í•˜ë‚˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. (ì„ íƒ ì‚¬í•­)
        
      ![image.png](img/image_069.png)
        
2. ë³´ì • ì• ë‹ˆë©”ì´ì…˜ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. Inver_Anim_Scene ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤ì˜ ë¸”ë£¨í”„ë¦°íŠ¸ ì—ë””í„°ë¥¼ ì—½ë‹ˆë‹¤.
   2. ì—ì…‹ ë””í…Œì¼ ì°½ì˜ ì• ë””í‹°ë¸Œ ì„¸íŒ…ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
      1. ì• ë””í‹°ë¸Œ ì• ë‹˜ íƒ€ì… - Mesh Space ì„ íƒ
      2. ë² ì´ìŠ¤ í¬ì¦ˆ íƒ€ì… - Selected animation frame ì„ íƒ
      3. ë² ì´ìŠ¤ í¬ì¦ˆ ì• ë‹ˆë©”ì´ì…˜ - A_FP_AssaultRifle_Idle_Loop ì„ íƒ
        
         ![image.png](img/image_070.png)
        
3. ABP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. Apply Additive ë…¸ë“œì™€ Invert_Anim_Scene ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
   2. A_FP_AssaultRifle_Idle_Loop ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œì™€ ì—°ê²°í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_071.png)
        
   3. ë‚˜ë¨¸ì§€ 4ê°œì˜ ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œì— ëŒ€í•´ ê°™ì€ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.
        
      ëª¨ë‘ ë™ì¼í•˜ê²Œ Inver_Anim_Scene, Apply Additiveë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_072.png)
        
4. ë ˆë²¨ ì‹¤í–‰ ë° ì• ë‹ˆë©”ì´ì…˜ ë³´ì • ê²°ê³¼ í™•ì¸
    
   íŒ” ê³¨ê²©ì˜ ìœ„ì¹˜ê°€ ì •ìƒ ë²”ìœ„ ë‚´ë¡œ ë³´ì • ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

   ![image.png](img/image_073.png)

#### 4.2.3. ì´ë™ ì‹œ ë‹¤ë¦¬ ì• ë‹ˆë©”ì´ì…˜ ì ìš©

1. ABP_MirageCharacter - AnimGraph ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ì˜ A_FP_AssaultRifle_Run_Loopì™€ ì—°ê²°ëœ ë¶€ë¶„ì„ ì•„ë˜ì˜ ì ˆì°¨ì— ë”°ë¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. Layered blend per bone ë…¸ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
   2. ì¶”ê°€í•œ ë…¸ë“œì˜ ë””í…Œì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
      1. ì„¤ì • - ë ˆì´ì–´ ì„¤ì • - ì¸ë±ìŠ¤[0]ì— ë‘ ê°œì˜ ë¶„ê¸° í•„í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
      2. ê°ê° ë³¸ ì´ë¦„ì„ thigh_l, thigh_rë¡œ ì§€ì •í•©ë‹ˆë‹¤.
        
         ![image.png](img/image_074.png)
        
   3. ê¸°ì¡´ Apply Additive ë…¸ë“œë¥¼ ìœ„ ë…¸ë“œì˜ Base Poseì— ì—°ê²°í•©ë‹ˆë‹¤.
   4. MM_Run_Fwd ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ìœ„ ë…¸ë“œì˜ Blend Poses 0ì— ì—°ê²°í•©ë‹ˆë‹¤.
   5. MM_Run_Fwd ë…¸ë“œì˜ ë””í…Œì¼ ì°½ì—ì„œ ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„ë¥¼ í™œì„±í™” í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_075.png)
        
   6. ìµœì¢… ëª¨ìŠµì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
        
      ì½”ë©˜íŠ¸ ë…¸ë“œì˜ í¬ê¸° ì¡°ì ˆì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.
        
      ![image.png](img/image_076.png)
        
2. ìœ„ ê³¼ì •ì„ ë‚˜ë¨¸ì§€ 4ê°œì˜ ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œì—ë„ ìœ ì‚¬í•˜ê²Œ ì ìš©í•©ë‹ˆë‹¤.
   1. Layered blend per bone ë…¸ë“œì˜ ì„¤ì •ì€ ë™ì¼í•˜ë¯€ë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   2. MM_Run_Fwd ë…¸ë“œ ëŒ€ì‹  ê²½ìš°ì— MM_Walk_Fwd ë˜ëŠ” MM_Idleì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
   3. ëª¨ë“  ê³¼ì •ì„ ë§ˆì¹œ í›„ ê·¸ë˜í”„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_077.png)
        
      ![image.png](img/image_078.png)
        
3. ë ˆë²¨ ì‹¤í–‰ ë° ë‹¤ë¦¬ ì• ë‹ˆë©”ì´ì…˜ ì ìš© í™•ì¸
    
   ê±·ê¸°ì™€ ë‹¬ë¦¬ê¸° ì• ë‹ˆë©”ì´ì…˜ì´ ì¬ìƒë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

   ![image.png](img/image_079.png)

### 4.3. ì•¡ì…˜ ì• ë‹ˆë©”ì´ì…˜ ë° ë™ì‘ ë³µì œ

1. BaseMirageCharacter í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - BaseMirageCharacter.h
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         #pragma once
         
         #include "CoreMinimal.h"
         #include "GameFramework/Character.h"
         #include "BaseMirageCharacter.generated.h"
         
         UCLASS()
         class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
         {
         	GENERATED_BODY()
         
         public:
         	// Sets default values for this character's properties
         	ABaseMirageCharacter();
         
         protected:
         	// Called when the game starts or when spawned
         	virtual void BeginPlay() override;
         
         public:	
         	// Called every frame
         	virtual void Tick(float DeltaTime) override;
         
         	// Called to bind functionality to input
         	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
         
       + 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       + 	void OnFired();
       + 
       + 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       + 	void OnReloaded();
       + 
         };
         
       ```
            
   - ì „ì²´ ì½”ë“œ
     - BaseMirageCharacter.h
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.
       
       #pragma once
       
       #include "CoreMinimal.h"
       #include "GameFramework/Character.h"
       #include "BaseMirageCharacter.generated.h"
       
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
       {
       	GENERATED_BODY()
       
       public:
       	// Sets default values for this character's properties
       	ABaseMirageCharacter();
       
       protected:
       	// Called when the game starts or when spawned
       	virtual void BeginPlay() override;
       
       public:	
       	// Called every frame
       	virtual void Tick(float DeltaTime) override;
       
       	// Called to bind functionality to input
       	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void OnFired();
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void OnReloaded();
       
       };
       ```
            
2. BP_Character ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. ì¬ì¥ì „ ì‹œ ë¯¸ë¼ì§€ ìºë¦­í„°ì˜ ì¬ì¥ì „ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
      1. ê·¸ë˜í”„ ìƒë‹¨ì—ì„œ Reloadì™€ ê´€ë ¨ëœ êµ¬ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_080.png)
            
      2. Get Actor Of Class ë…¸ë“œë¥¼ ìƒì„±í•˜ê³  í´ë˜ìŠ¤ì— BP_MirageCharacterë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
      3. On Reloaded í•¨ìˆ˜ ë…¸ë“œë¡œ ì—°ê³„í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_081.png)
            
      4. Reloadì™€ Delay í•¨ìˆ˜ ì‚¬ì´ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_082.png)
            
   2. ë°œì‚¬ ì‹œ ë¯¸ë¼ì§€ ìºë¦­í„°ì˜ ë°œì‚¬ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
      1. ê·¸ë˜í”„ ìš°ì¸¡ì—ì„œ Shootê³¼ ê´€ë ¨ëœ êµ¬ì—­ì˜ ì¢…ë‹¨ë¶€ë¡œ ì´ë™í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_083.png)
            
      2. Get Actor Of Class ë…¸ë“œë¥¼ ìƒì„±í•˜ê³  í´ë˜ìŠ¤ì— BP_MirageCharacterë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
      3. On Fired í•¨ìˆ˜ ë…¸ë“œë¡œ ì—°ê³„í•©ë‹ˆë‹¤.
      4. (Current Ammunition) Set ê³¼ Delay í•¨ìˆ˜ ì‚¬ì´ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.
            
         ![image.png](img/image_084.png)
            
3. BP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. ê·¸ë˜í”„ ìƒë‹¨ì—ì„œ Reloadì™€ ê´€ë ¨ëœ êµ¬ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
   2. Play Montage ë…¸ë“œì˜ ì•ì— On Reloaded ì´ë²¤íŠ¸ ë…¸ë“œë¥¼ ì—°ê²°í•©ë‹ˆë‹¤
        
      ![image.png](img/image_085.png)
        
   3. ê·¸ë˜í”„ ìš°ì¸¡ì—ì„œ Shootê³¼ ê´€ë ¨ëœ êµ¬ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
   4. Shoot ë…¸ë“œì˜ ì•ì— On Fired ì´ë²¤íŠ¸ ë…¸ë“œë¥¼ ì—°ê²°í•©ë‹ˆë‹¤
        
      ![image.png](img/image_086.png)
        
4. ë ˆë²¨ì„ ì‹¤í–‰í•˜ê³  ë¯¸ë¼ì§€ ìºë¦­í„°ê°€ ì¥ì „ê³¼ ë°œì‚¬ë¥¼ ë”°ë¼í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
   ![image.png](img/image_087.png)

### 4.4. ìœ„ì¹˜, íšŒì „ ë“± ê¸°íƒ€ ë³µì œ

1. BaseMirageCharacter í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - BaseMirageCharacter.h
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         #pragma once
         
         #include "CoreMinimal.h"
         #include "GameFramework/Character.h"
         #include "BaseMirageCharacter.generated.h"
         
         UCLASS()
         class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
         {
         	GENERATED_BODY()
         
         public:
         	// Sets default values for this character's properties
         	ABaseMirageCharacter();
         
         protected:
         	// Called when the game starts or when spawned
         	virtual void BeginPlay() override;
         
         public:	
         	// Called every frame
         	virtual void Tick(float DeltaTime) override;
         
         	// Called to bind functionality to input
         	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
         
       + 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       + 	void UpdateTransform(FVector3f position, FQuat4f orientation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);
       + 
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void OnFired();
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void OnReloaded();
         
         };
         
       ```
            
   - ì „ì²´ ì½”ë“œ
     - BaseMirageCharacter.h
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.
       
       #pragma once
       
       #include "CoreMinimal.h"
       #include "GameFramework/Character.h"
       #include "BaseMirageCharacter.generated.h"
       
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
       {
       	GENERATED_BODY()
       
       public:
       	// Sets default values for this character's properties
       	ABaseMirageCharacter();
       
       protected:
       	// Called when the game starts or when spawned
       	virtual void BeginPlay() override;
       
       public:	
       	// Called every frame
       	virtual void Tick(float DeltaTime) override;
       
       	// Called to bind functionality to input
       	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void UpdateTransform(FVector3f position, FQuat4f orientation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void OnFired();
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void OnReloaded();
       
       };
       ```
            
2. BP_Character ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. í”Œë¡œíŠ¸ íƒ€ì…ì˜ AimPitch ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_088.png)
        
   2. Tick ì´ë²¤íŠ¸ì˜ ì½”ë“œê°€ ëë‚˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
   3. ë‘ ê°œì˜ ë¼ìš°íŠ¸ ë…¸ë“œë¥¼ ìƒì„±í•˜ê³  Branch ë…¸ë“œì˜ False, Stop Running ë‘ ë…¸ë“œë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_089.png)
        
      ![image.png](img/image_090.png)
        
   4. ë¼ìš°íŠ¸ ë…¸ë“œë¥¼ ì´ë™í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_091.png)
        
   5. BP_MirageCharacterì˜ Update Transformì„ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤
        
      ê·¸ë˜í”„ ì‘ì„±ì´ ëë‚œ ëª¨ìŠµì€ ë‹¤ìŒê³¼ ê°™ìœ¼ë©°, ì•„ë˜ì—ì„œ ê³¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_092.png)
        
      - ê³¼ì • ë³´ê¸°
        1. Get Actor Of Class ë…¸ë“œë¥¼ ìƒì„±í•˜ê³  í´ë˜ìŠ¤ì— BP_MirageCharacterë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
        2. Update Transform í•¨ìˆ˜ ë…¸ë“œë¡œ ì—°ê³„í•©ë‹ˆë‹¤.
                
           ![image.png](img/image_093.png)
                
        3. Get Actor Location, Get Actor Rotationìœ¼ë¡œ ì´ë™/íšŒì „ ê°’ì„ ì–»ëŠ” ë…¸ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
                
           ![image.png](img/image_094.png)
                
        4. Get Actor Rotationì€ To Quaternion ë…¸ë“œë¡œ ì—°ê³„í•©ë‹ˆë‹¤.
                
           ![image.png](img/image_095.png)
                
        5. Get Character Arms ë…¸ë“œë¥¼ ìƒì„±í•˜ê³ , ì†ë„ì™€ ê°ì†ë„ë¥¼ ì–»ëŠ” ë…¸ë“œë¡œ ì—°ê³„í•©ë‹ˆë‹¤.
                
           ![image.png](img/image_096.png)
                
           ![image.png](img/image_097.png)
                
        6. Get Control Rotation ë…¸ë“œë¥¼ ìƒì„±í•˜ê³ , ë°˜í™˜ê°’ìœ¼ë¡œ ë¶€í„° Pitch íšŒì „ ê°’ì„ ì—°ì‚°í•©ë‹ˆë‹¤.
           ëª¨ë“  ë…¸ë“œëŠ” ë…¸ë“œ ì´ë¦„ì„ í†µí•´ ì—°ê³„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
           ì¤‘ê°„ì˜ ê³±ì…‰ ë…¸ë“œëŠ” Multiplyë¡œ ìƒì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.
                
           ![image.png](img/image_098.png)
                
        7. ì¶”ê°€ëœ ëª¨ë“  ë…¸ë“œë¥¼ Update Transformì˜ ì•Œë§ì€ ì¸ìì™€ ì—°ê²°í•©ë‹ˆë‹¤.
           Get Physics Linear Velocity ë…¸ë“œëŠ” ì‹¤í–‰ í•€ì´ ì—°ê²°ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

3. BP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. í”Œë¡œíŠ¸ í˜•ì‹ì˜ AimPitch ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
   2. UpdateTransform ì´ë²¤íŠ¸ ë…¸ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
   3. ì´ë²¤íŠ¸ ë…¸ë“œì— ë§ëŠ” ê° ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_099.png)
        
   4. Position ë…¸ë“œì˜ ì—°ê²°ì„ ëŠê³ , Make Vectorë…¸ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì—°ê²°í•©ë‹ˆë‹¤.
        
      ì‹±ê¸€ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œì˜ ë²„ê·¸ë™ì‘ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ì¡°ì¹˜ì…ë‹ˆë‹¤.
        
      ![image.png](img/image_100.png)
        
   5. Shootê³¼ ê´€ë ¨ëœ ë¶€ë¶„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
   6. ì•„ë˜ì™€ ê°™ì´ ê·¸ë˜í”„ë¥¼ êµ¬ì„±í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_101.png)
        
4. ABP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ì´ë²¤íŠ¸ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. í”Œë¡œíŠ¸ í˜•ì‹ì˜ AimPitch ë³€ìˆ˜ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
   2. í˜•ë³€í™˜ëœ BP_MirageCharacterë¡œë¶€í„° ê°’ì„ ë¶ˆëŸ¬ì™€ ì €ì¥í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_102.png)
        
5. ABP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ì˜ AnimGraphë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. Mouse Sway ê´€ë ¨ ë¶€ë¶„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_103.png)
        
   2. Trasnform (Modify) Bone ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  Mouse Sway ì½”ë©˜íŠ¸ ë…¸ë“œì˜ ì•ì— ì—°ê²°í•©ë‹ˆë‹¤.
   3. AimPitch ë³€ìˆ˜ê°’ìœ¼ë¡œ Rotatorë¥¼ ë§Œë“¤ê³  ë…¸ë“œì˜ Rotationì— ì ìš©í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_104.png)
        
6. ë ˆë²¨ì„ ì‹¤í–‰í•˜ê³  ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
    
   ë¯¸ë¼ì§€ ìºë¦­í„°ê°€ í”Œë ˆì´ì–´ ìºë¦­í„°ì™€ ê°™ì€ ë°©í–¥ì„ ì¡°ì¤€í•˜ë©° ë°œì‚¬í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

   ![image.png](img/image_105.png)

---

## 5. ë¯¸ë¼ì§€ ìºë¦­í„° ì˜¨ë¼ì¸ ì—°ë™í•˜ê¸°

ì´ ì„¹ì…˜ì—ì„œëŠ” ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„í”Œë ˆì´ë¥¼ ìœ„í•œ ë¯¸ë¼ì§€ ìºë¦­í„°ì™€ ProudNet ë„¤íŠ¸ì›Œí‚¹ í†µí•©ì„ ë‹¤ë£¹ë‹ˆë‹¤.

### 5.1. Visual Studio í”„ë¡œì íŠ¸ ì‘ì—…

#### 5.1.1. game_server í”„ë¡œì íŠ¸ ìƒì„±

1. VisualStudioì—ì„œ ë¹ˆ í”„ë¡œì íŠ¸ game_serverë¥¼ ìƒì„±í•©ë‹ˆë‹¤

2. game_serverí”„ë¡œì íŠ¸ì— 3ê°œì˜ ìƒˆ í•­ëª© main.cpp, setting.cpp, setting.hì„ ì¶”ê°€í•©ë‹ˆë‹¤.

3. game_server í”„ë¡œì íŠ¸ì˜ ì†ì„±ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. "C/C++ - ì–¸ì–´ - C++ ì–¸ì–´ í‘œì¤€"
      ë“œë¡­ë‹¤ìš´ì—ì„œ "ISO C++20 í‘œì¤€ (/std:C++20)" ì„ íƒ
   2. "C/C++ - ì¼ë°˜ - ì¶”ê°€ í¬í•¨ ë””ë ‰í„°ë¦¬"
      ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      íŒì—… ì°½ì— ì•„ë˜ ê²½ë¡œ ì¶”ê°€
      ```
      C:\Program Files (x86)\Nettention\ProudNet\include
      ```
   3. "ë§ì»¤ - ì¼ë°˜ - ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë””ë ‰í„°ë¦¬"
      ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      íŒì—… ì°½ì— ì•„ë˜ ê²½ë¡œ ì¶”ê°€
      ```
      C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)
      ```
   4. "ë§ì»¤ - ì…ë ¥ - ì¶”ê°€ ì¢…ì†ì„±"
      ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      íŒì—… ì°½ì— ì•„ë˜ íŒŒì¼ëª… ì¶”ê°€
      ```
      ProudNetServer.lib
      ProudNetClient.lib
      ```
   5. "ë¹Œë“œ ì´ë²¤íŠ¸ - ë¹Œë“œ í›„ ì´ë²¤íŠ¸ - ëª…ë ¹ì¤„"
      ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      íŒì—… ì°½ì— ì•„ë˜ ëª…ë ¹ ì¶”ê°€
      ```
      xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libcrypto-3-x64.dll" "$(OutDir)"
      xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libssl-3-x64.dll" "$(OutDir)"
      ```

4. ê° ì†ŒìŠ¤ íŒŒì¼ì— ì½”ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
   - ì „ì²´ ì½”ë“œ
     - setting.h
       ```cpp
       #pragma once

       namespace ProudSetting
       {
           namespace GAME
           {
               extern const ::Proud::Guid version;
               extern const int server_port;
           }
       }
       ```

     - setting.cpp
       ```cpp
       #include <ProudNetClient.h>
       #include "setting.h"

       namespace ProudSetting
       {
           namespace GAME
           {
               const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
               const ::Proud::Guid version = ::Proud::Guid(guid);
               const int server_port = 33338;
           }
       }
       ```

     - main.cpp
       ```cpp
       #include <iostream>
       #include <format>
       #include <memory>

       #include <ProudNetServer.h>
       #include "setting.h"

       std::shared_ptr<Proud::CNetServer> net_server;

       int main()
       {
       	net_server = std::shared_ptr<Proud::CNetServer>(Proud::CNetServer::Create());

       	net_server->OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] connected.\n";
       		};
       	net_server->OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
       		{
       			std::cout << "Client[" << (int)clientInfo->m_HostID << "] disconnected.\n";
       		};

       	Proud::CStartServerParameter start_param;
       	start_param.m_protocolVersion = ProudSetting::GAME::version;
       	start_param.m_tcpPorts.Add(ProudSetting::GAME::server_port);

       	try
       	{
       		net_server->Start(start_param);
       	}
       	catch (Proud::Exception& error)
       	{
       		std::cout << "Server start failed: " << error.what() << endl;
       		return 0;
       	}

       	std::cout << ("Server started. Enterable commands:\n");
       	std::cout << ("-q : Quit.\n");
       	std::string input;
       	while (true)
       	{
       		std::cin >> input;
       		if (input[0] == '-')
       		{
       			if (input == "-q")
       				break;
       		}
       	}

       	std::cout << "Stopping server...\n";
       	net_server->Stop();
       	net_server = nullptr;
       	std::cout << "Server stopped.\n";
       	return 0;
       }
       ```

#### 5.1.2. game_pidl í”„ë¡œì íŠ¸ ìƒì„±

1. PdnUE5ExampleServerì—ì„œ ìƒˆë¡œìš´ ë¹ˆ í”„ë¡œì íŠ¸ game_pidlì„ ì¶”ê°€í•©ë‹ˆë‹¤.

2. íŒŒì¼ P2P.PIDLì„ ì¶”ê°€í•˜ê³ , ì†ì„±ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. "ì¼ë°˜ - í•­ëª© í˜•ì‹"
      ë“œë¡­ë‹¤ìš´ì—ì„œ "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬" ì„ íƒ
   2. "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬ - ì¼ë°˜ - ëª…ë ¹ì¤„"
      í…ìŠ¤íŠ¸ ì…ë ¥
      ```
      C:\"Program Files (x86)"\Nettention\ProudNet\util\PIDL.exe "%(FullPath)" -cpp
      ```
   3. "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬ - ì¼ë°˜ - ì„¤ëª…"
      í…ìŠ¤íŠ¸ ì…ë ¥
      ```
      %(Filename).PIDL Compiling...
      ```
   4. "ì‚¬ìš©ì ì§€ì • ë¹Œë“œ ë„êµ¬ - ì¼ë°˜ - ì¶œë ¥"
      ë“œë¡­ë‹¤ìš´ì—ì„œ <í¸ì§‘â€¦> ì„ íƒ
      íŒì—… ì°½ì— ì•„ë˜ ê²½ë¡œ ì¶”ê°€
      ```
      %(RootDir)%(Directory)\%(Filename)_common.cpp
      %(RootDir)%(Directory)\%(Filename)_common.h
      %(RootDir)%(Directory)\%(Filename)_proxy.cpp
      %(RootDir)%(Directory)\%(Filename)_proxy.h
      %(RootDir)%(Directory)\%(Filename)_stub.cpp
      %(RootDir)%(Directory)\%(Filename)_stub.h
      ```

3. íŒŒì¼ì— ì½”ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
   - ì „ì²´ ì½”ë“œ
     - P2P.PIDL
       ```pidl
       [access=public]
       global GAME_P2P 3000
       {
           Transform([in] Proud::CharacterTransformData transformData);
           AnimationParams([in] Proud::CharacterAnimationParams animationParams);
           Action([in] Proud::CharacterAction actionId);
       }
       ```

4. game_pidl í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.

#### 5.1.3. game_server í”„ë¡œì íŠ¸ ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì •

1. game_server í”„ë¡œì íŠ¸ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - main.cpp
       ```diff
         #include <iostream>
         #include <format>
         #include <memory>
         
         #include <ProudNetServer.h>
         #include "setting.h"
         
       + Proud::HostID group_host_id = Proud::HostID_None;
       + 
         std::shared_ptr<Proud::CNetServer> net_server;
         
         int main()
         {
         	net_server = std::shared_ptr<Proud::CNetServer>(Proud::CNetServer::Create());
         
         	net_server->OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
         		{
         			std::cout << "Client[" << (int)clientInfo->m_HostID << "] connected.\n";
       + 
       + 			Proud::HostID list[100];
       + 			int listCount = net_server->GetClientHostIDs(list, 100);
       + 			group_host_id = net_server->CreateP2PGroup(list, listCount, Proud::ByteArray());
         		};
         	net_server->OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
         		{
         			std::cout << "Client[" << (int)clientInfo->m_HostID << "] disconnected.\n";
         		};
         
         	Proud::CStartServerParameter start_param;
         	start_param.m_protocolVersion = ProudSetting::GAME::version;
         	start_param.m_tcpPorts.Add(ProudSetting::GAME::server_port);
         
         	try
         	{
         		net_server->Start(start_param);
         	}
         	catch (Proud::Exception& error)
         	{
         		std::cout << "Server start failed: " << error.what() << endl;
         		return 0;
         	}
         
         	std::cout << ("Server started. Enterable commands:\n");
         	std::cout << ("-q : Quit.\n");
         	std::string input;
         	while (true)
         	{
         		std::cin >> input;
         		if (input[0] == '-')
         		{
         			if (input == "-q")
         				break;
         		}
         	}
         
         	std::cout << "Stopping server...\n";
         	net_server->Stop();
         	net_server = nullptr;
         	std::cout << "Server stopped.\n";
         	return 0;
         }
       ```

     - setting.hì— ë°ì´í„° êµ¬ì¡°ì²´ ì¶”ê°€
       ```diff
         #pragma once
         
         namespace ProudSetting
         {
             namespace GAME
             {
                 extern const ::Proud::Guid version;
                 extern const int server_port;
             }
         }
         
       + namespace Proud
       + {
       +     struct float3
       +     {
       +         float3() = default;
       +         float3(float x, float y, float z) : x(x), y(y), z(z) {};
       +         float x, y, z;
       +     };
       +     Proud::CMessage& operator>> (Proud::CMessage& a, float3& b);
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const float3& b);
       + 
       +     struct float4
       +     {
       +         float4() = default;
       +         float4(float x, float y, float z, float w) : x(x), y(y), z(z), w(w) {};
       +         float x, y, z, w;
       +     };
       +     Proud::CMessage& operator>> (Proud::CMessage& a, float4& b);
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const float4& b);
       + 
       +     struct CharacterTransformData
       +     {
       +         float3 pos;
       +         float4 ori;
       + 
       +         float3 linear_velocity, angular_velocity;
       +         float aim_angle; // degree of depression
       +     };
       + 
       +     void AppendTextOut(String& a, Proud::CharacterTransformData& b);
       +     Proud::CMessage& operator>> (Proud::CMessage& a, CharacterTransformData& b);
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const CharacterTransformData& b);
       + 
       +     struct CharacterAnimationParams
       +     {
       +         bool aiming, moving, running, close_to__wall;
       +         float jump_velocity;
       +         float3 mouse_sway_loc, move_sway_loc;
       +     };
       + 
       +     void AppendTextOut(String& a, Proud::CharacterAnimationParams& b);
       +     Proud::CMessage& operator>> (Proud::CMessage& a, CharacterAnimationParams& b);
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const CharacterAnimationParams& b);
       + 
       +     enum class CharacterAction : int
       +     {
       +         Shoot,
       +         Reload,
       +     };
       + 
       +     void AppendTextOut(String& a, const Proud::CharacterAction& b);
       +     Proud::CMessage& operator>> (Proud::CMessage& a, CharacterAction& b);
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const CharacterAction& b);
       + }
       ```

     - setting.cppì— ì§ë ¬í™” êµ¬í˜„ ì¶”ê°€
       ```diff
         #include <ProudNetClient.h>
         #include "setting.h"
         
         namespace ProudSetting
         {
             namespace GAME
             {
                 const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
                 const ::Proud::Guid version = ::Proud::Guid(guid);
                 const int server_port = 33338;
             }
         }
         
       + #include <format>
       + 
       + namespace std
       + {
       +     template<>
       +     struct formatter<Proud::float3, char>
       +     {
       +         std::formatter<float, char> float_fmt;
       +         constexpr auto parse(std::format_parse_context& ctx)
       +         {
       +             return float_fmt.parse(ctx);
       +         }
       +         auto format(const Proud::float3& v, std::format_context& ctx) -> decltype(ctx.out())
       +         {
       +             return std::format_to(ctx.out(), "{}, {}, {}", v.x, v.y, v.z);
       +         }
       +     };
       +     template<>
       +     struct formatter<Proud::float4, char>
       +     {
       +         std::formatter<float, char> float_fmt;
       +         constexpr auto parse(std::format_parse_context& ctx)
       +         {
       +             return float_fmt.parse(ctx);
       +         }
       +         auto format(const Proud::float4& v, std::format_context& ctx) -> decltype(ctx.out())
       +         {
       +             return std::format_to(ctx.out(), "{}, {}, {}, {}", v.x, v.y, v.z, v.w);
       +         }
       +     };
       + }
       + 
       + namespace Proud
       + {
       +     Proud::CMessage& operator>>(Proud::CMessage& a, float3& b) { return a >> b.x >> b.y >> b.z; }
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const float3& b) { return a << b.x << b.y << b.z; }
       +     Proud::CMessage& operator>>(Proud::CMessage& a, float4& b) { return a >> b.x >> b.y >> b.z >> b.w; }
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const float4& b) { return a << b.x << b.y << b.z << b.w; }
       + 
       +     void AppendTextOut(String& a, Proud::CharacterTransformData& b) {}
       + 
       +     CMessage& operator>>(CMessage& a, Proud::CharacterTransformData& b)
       +     {
       +         a >> b.pos >> b.ori;
       +         a >> b.linear_velocity >> b.angular_velocity;
       +         a >> b.aim_angle;
       +         return a;
       +     }
       + 
       +     CMessage& operator<<(CMessage& a, const Proud::CharacterTransformData& b)
       +     {
       +         a << b.pos << b.ori;
       +         a << b.linear_velocity << b.angular_velocity;
       +         a << b.aim_angle;
       +         return a;
       +     }
       + 
       +     void AppendTextOut(String& a, Proud::CharacterAnimationParams& b) {}
       + 
       +     Proud::CMessage& operator>>(Proud::CMessage& a, CharacterAnimationParams& b)
       +     {
       +         a >> b.aiming >> b.moving >> b.running >> b.close_to__wall;
       +         a >> b.jump_velocity;
       +         a >> b.mouse_sway_loc.x >> b.mouse_sway_loc.y >> b.mouse_sway_loc.z;
       +         a >> b.move_sway_loc.x >> b.move_sway_loc.y >> b.move_sway_loc.z;
       +         return a;
       +     }
       + 
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const CharacterAnimationParams& b)
       +     {
       +         a << b.aiming << b.moving << b.running << b.close_to__wall;
       +         a << b.jump_velocity;
       +         a << b.mouse_sway_loc.x << b.mouse_sway_loc.y << b.mouse_sway_loc.z;
       +         a << b.move_sway_loc.x << b.move_sway_loc.y << b.move_sway_loc.z;
       +         return a;
       +     }
       + 
       +     void AppendTextOut(String& a, const CharacterAction& b) {}
       + 
       +     Proud::CMessage& operator>>(Proud::CMessage& a, CharacterAction& b)
       +     {
       +         int buffer;
       +         a >> buffer;
       +         b = static_cast<Proud::CharacterAction>(buffer);
       +         return a;
       +     }
       + 
       +     Proud::CMessage& operator<<(Proud::CMessage& a, const CharacterAction& b)
       +     {
       +         return a << static_cast<int>(b);
       +     }
               + }
        ```

### 5.2. ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ ì‘ì—…

1. GissGameNet C++ í´ë˜ìŠ¤ ìƒì„±
   1. GameInstanceSubsystemì„ ìƒì†ë°›ëŠ” C++ í´ë˜ìŠ¤ GissGameNetì„ ìƒì„±í•©ë‹ˆë‹¤.
   2. GissGameNet í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      - ìˆ˜ì • ë‚´ì—­
        - GissGameNet.h
            
          ```diff
            // Fill out your copyright notice in the Description page of Project Settings.
            
            #pragma once
            
            #include "CoreMinimal.h"
            #include "Subsystems/GameInstanceSubsystem.h"
            #include "GissGameNet.generated.h"
            
            /**
             * 
             */
            UCLASS()
            class PDNUE5EXAMPLECLIENT_API UGissGameNet : public UGameInstanceSubsystem
            {
            	GENERATED_BODY()
            	
          + public:
          + 	UFUNCTION(BlueprintCallable)
          + 	void UpdateCharacterTransform(FVector3f position, FQuat4f rotation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);
          + 
          + 	UFUNCTION(BlueprintCallable)
          + 	void UpdateCharacterAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
          + 
          + 	UFUNCTION(BlueprintCallable)
          + 	void SendCharacterFired();
          + 
          + 	UFUNCTION(BlueprintCallable)
          + 	void SendCharacterReloaded();
          + 
          + private:
          + 	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
          + 	virtual void Deinitialize() override;
            };
          ```
            
        - GissGameNet.cpp (ì£¼ìš” êµ¬í˜„ ë¶€ë¶„ë§Œ í‘œì‹œ)
            
          ```diff
            // Fill out your copyright notice in the Description page of Project Settings.
            
            #include "GissGameNet.h"
            
          + #include <format>
          + #include <functional>
          + 
          + #include <ProudNetClient.h>
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_server/setting.h"
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_server/setting.cpp"
          + 
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_common.h"
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_common.cpp"
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_proxy.h"
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_proxy.cpp"
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_stub.h"
          + #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_stub.cpp"
          + 
          + #include "Kismet/GameplayStatics.h"
          + #include "BaseMirageCharacter.h"
          + 
          + // P2P í†µì‹  ë° ë„¤íŠ¸ì›Œí‚¹ ì½”ë“œ êµ¬í˜„...
          ```
            
      - ì „ì²´ ì½”ë“œ (GissGameNet.cppëŠ” ìƒë‹¹íˆ ê¸¸ë¯€ë¡œ ì£¼ìš” í•¨ìˆ˜ë“¤ë§Œ ëª…ì‹œ)
        - GissGameNet.h
            
          ```cpp
          // Fill out your copyright notice in the Description page of Project Settings.
          
          #pragma once
          
          #include "CoreMinimal.h"
          #include "Subsystems/GameInstanceSubsystem.h"
          #include "GissGameNet.generated.h"
          
          /**
           * 
           */
          UCLASS()
          class PDNUE5EXAMPLECLIENT_API UGissGameNet : public UGameInstanceSubsystem
          {
          	GENERATED_BODY()
          
          public:
          	UFUNCTION(BlueprintCallable)
          	void UpdateCharacterTransform(FVector3f position, FQuat4f rotation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);
          
          	UFUNCTION(BlueprintCallable)
          	void UpdateCharacterAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
          
          	UFUNCTION(BlueprintCallable)
          	void SendCharacterFired();
          
          	UFUNCTION(BlueprintCallable)
          	void SendCharacterReloaded();
          
          private:
          	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
          	virtual void Deinitialize() override;
          };
          ```

2. BP_Character ë¸”ë£¨í”„ë¦°íŠ¸ ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. BP_MirageCharacterì˜ Update Transformì„ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ GissGameNetì˜ Update Character Transformì„ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_106.png)
        
   2. BP_MirageCharacterì˜ On Firedë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ GissGameNetì˜ Send Character Firedë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_107.png)
        
   3. BP_MirageCharacterì˜ On Reloadedë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ GissGameNetì˜ Send Character Reloadedë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_108.png)
        
3. ABP_Character ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ì´ë²¤íŠ¸ê·¸ë˜í”„ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. BP_MirageCharacterì˜ Update Animation Parameterë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¥¼ GissGameNetì˜ Update Character Animation Parameterë¥¼ í˜¸ì¶œí•˜ëŠ” ê·¸ë˜í”„ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_109.png)
        
4. ì„œë²„ ë¹Œë“œ ë° ì‹¤í–‰ í›„ ë ˆë²¨ ì‹¤í–‰ ì‹œ, ì—°ë™ ì‘ì—… ì´ì „ê³¼ ë™ì¼í•œ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 6. ë§ˆë¬´ë¦¬ í›„ í”„ë¡œì íŠ¸ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸

ì´ ì„¹ì…˜ì—ì„œëŠ” í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬, ë¹Œë“œ ë° ì¢…í•© í…ŒìŠ¤íŠ¸ ì ˆì°¨ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.

### 6.1. í…ŒìŠ¤íŠ¸ ì½”ë“œ ìˆ˜ì •

1. BaseMirageCharacter í´ë˜ìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - BaseMirageCharacter.h
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         #pragma once
         
         #include "CoreMinimal.h"
         #include "GameFramework/Character.h"
         #include "BaseMirageCharacter.generated.h"
         
         UCLASS()
         class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
         {
         	GENERATED_BODY()
         
         public:
         	// Sets default values for this character's properties
         	ABaseMirageCharacter();
         
         protected:
         	// Called when the game starts or when spawned
         	virtual void BeginPlay() override;
         
         public:	
         	// Called every frame
         	virtual void Tick(float DeltaTime) override;
         
         	// Called to bind functionality to input
         	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void UpdateTransform(FVector3f position, FQuat4f orientation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void OnFired();
         
         	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
         	void OnReloaded();
         
       + 	UFUNCTION(BlueprintCallable)
       + 	void SetId(int id);
       + 
       + 	UFUNCTION(BlueprintCallable)
       + 	int GetId() const;
       + 
       + private:
       + 	int id;
         };
         
       ```
            
     - BaseMirageCharacter.cpp
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         
         #include "BaseMirageCharacter.h"
         
         // Sets default values
         ABaseMirageCharacter::ABaseMirageCharacter()
         {
         	// Set this character to call Tick() every frame.  You can turn this off to improve performance if you don't need it.
         	PrimaryActorTick.bCanEverTick = true;
         
         }
         
         // Called when the game starts or when spawned
         void ABaseMirageCharacter::BeginPlay()
         {
         	Super::BeginPlay();
         
         }
         
         // Called every frame
         void ABaseMirageCharacter::Tick(float DeltaTime)
         {
         	Super::Tick(DeltaTime);
         
         }
         
         // Called to bind functionality to input
         void ABaseMirageCharacter::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
         {
         	Super::SetupPlayerInputComponent(PlayerInputComponent);
         
         }
         
       + void ABaseMirageCharacter::SetId(int _id)
       + {
       + 	this->id = _id;
       + }
       + 
       + int ABaseMirageCharacter::GetId() const
       + {
       + 	return this->id;
       + }
       + 
       ```
            
   - ì „ì²´ ì½”ë“œ
     - BaseMirageCharacter.h
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.
       
       #pragma once
       
       #include "CoreMinimal.h"
       #include "GameFramework/Character.h"
       #include "BaseMirageCharacter.generated.h"
       
       UCLASS()
       class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
       {
       	GENERATED_BODY()
       
       public:
       	// Sets default values for this character's properties
       	ABaseMirageCharacter();
       
       protected:
       	// Called when the game starts or when spawned
       	virtual void BeginPlay() override;
       
       public:	
       	// Called every frame
       	virtual void Tick(float DeltaTime) override;
       
       	// Called to bind functionality to input
       	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void UpdateTransform(FVector3f position, FQuat4f orientation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void OnFired();
       
       	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
       	void OnReloaded();
       
       	UFUNCTION(BlueprintCallable)
       	void SetId(int id);
       
       	UFUNCTION(BlueprintCallable)
       	int GetId() const;
       
       private:
       	int id;
       };
       
       ```
            
     - BaseMirageCharacter.cpp
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.
       
       #include "BaseMirageCharacter.h"
       
       // Sets default values
       ABaseMirageCharacter::ABaseMirageCharacter()
       {
       	// Set this character to call Tick() every frame.  You can turn this off to improve performance if you don't need it.
       	PrimaryActorTick.bCanEverTick = true;
       
       }
       
       // Called when the game starts or when spawned
       void ABaseMirageCharacter::BeginPlay()
       {
       	Super::BeginPlay();
       
       }
       
       // Called every frame
       void ABaseMirageCharacter::Tick(float DeltaTime)
       {
       	Super::Tick(DeltaTime);
       
       }
       
       // Called to bind functionality to input
       void ABaseMirageCharacter::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
       {
       	Super::SetupPlayerInputComponent(PlayerInputComponent);
       
       }
       
       void ABaseMirageCharacter::SetId(int _id)
       {
       	this->id = _id;
       }
       
       int ABaseMirageCharacter::GetId() const
       {
       	return this->id;
       }
       
       ```
            
2. GissGameNet í´ë˜ìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   - ìˆ˜ì • ë‚´ì—­
     - GissGameNet.cpp
            
       ```diff
         // Fill out your copyright notice in the Description page of Project Settings.
         
         
         #include "GissGameNet.h"
         
         #include <format>
         #include <functional>
         
         #include <ProudNetClient.h>
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_server/setting.h"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_server/setting.cpp"
         
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_common.h"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_common.cpp"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_proxy.h"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_proxy.cpp"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_stub.h"
         #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_stub.cpp"
         
         #include "Kismet/GameplayStatics.h"
         #include "BaseMirageCharacter.h"
         
         inline Proud::float3 UVec3_to_PNFloat3(FVector3f v) { return Proud::float3(v.X, v.Y, v.Z); }
         inline FVector3f PNFloat3_to_UVec3(Proud::float3 v) { return FVector3f(v.x, v.y, v.z); }
         inline Proud::float4 UQuat4_to_PNFloat4(FQuat4f v) { return Proud::float4(v.X, v.Y, v.Z, v.W); }
         inline FQuat4f PNFloat4_to_UQuat4(Proud::float4 v) { return FQuat4f(v.x, v.y, v.z, v.w); }
         
         struct GAME_P2P_Stub : public GAME_P2P::Stub
         {
         public:
         	DECRMI_GAME_P2P_Transform;
         	DECRMI_GAME_P2P_AnimationParams;
         	DECRMI_GAME_P2P_Action;
         
         	std::function<void(Proud::HostID remote, const Proud::CharacterTransformData& transformData)> event_transform;
         	std::function<void(Proud::HostID remote, const Proud::CharacterAnimationParams& animationParams)> event_animationParams;
         	std::function<void(Proud::HostID remote, const Proud::CharacterAction& actionId)>event_action;
         };
         
         Proud::HostID groupHostId = Proud::HostID_None;
         GAME_P2P_Stub p2p_stub;
         GAME_P2P::Proxy p2p_proxy;
         
         DEFRMI_GAME_P2P_Transform(GAME_P2P_Stub)
         {
         	if (event_transform)
         		event_transform(remote, transformData);
         	return true;
         }
         
         DEFRMI_GAME_P2P_AnimationParams(GAME_P2P_Stub)
         {
         	if (event_animationParams)
         		event_animationParams(remote, animationParams);
         	return true;
         }
         
         DEFRMI_GAME_P2P_Action(GAME_P2P_Stub)
         {
         	if (event_action)
         		event_action(remote, actionId);
         	return true;
         }
         
         
         static void LogPrint(const std::string& str)
         {
         	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
         }
         
         static Proud::CriticalSection global_critical_section;
         static std::shared_ptr<Proud::CNetClient> net_client;
         FDelegateHandle update_handle;
         
       - static ABaseMirageCharacter* getMirageCharacter(UObject* uobj)
       - {
       - 	TArray<AActor*> characters;
       - 	UGameplayStatics::GetAllActorsOfClass(uobj->GetWorld(), ABaseMirageCharacter::StaticClass(), characters);
       - 	if (characters.IsEmpty())
       - 		return nullptr;
       - 	ABaseMirageCharacter* character = Cast<ABaseMirageCharacter>(characters[0]);
       - 	if (IsValid(character))
       - 		return character;
       - 	return nullptr;
       - }
       + static ABaseMirageCharacter* getMirageCharacter(UObject* uobj, int id)
       + {
       + 	TArray<AActor*> characters;
       + 	UGameplayStatics::GetAllActorsOfClass(uobj->GetWorld(), ABaseMirageCharacter::StaticClass(), characters);
       + 	for (auto& actor : characters)
       + 	{
       + 		ABaseMirageCharacter* character = Cast<ABaseMirageCharacter>(actor);
       + 		if (IsValid(character) && character->GetId() == id)
       + 			return character;
       + 	}
       + 	return nullptr;
       + }
         
         void UGissGameNet::Initialize(FSubsystemCollectionBase& Collection)
         {
         	net_client = std::shared_ptr<Proud::CNetClient>(Proud::CNetClient::Create());
         
         	bool connected = false;
         
         	net_client->OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
         		{
         			Proud::CriticalSectionLock lock(global_critical_section, true);
         
         			if (info->m_errorType == Proud::ErrorType::Ok)
         			{
         				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client->GetLocalHostID());
         				LogPrint(log);
         
         				connected = true;
         			}
         			else
         			{
         				auto log = "Failed to connect to server.\n";
         				LogPrint(log);
         			}
         		};
         
         	net_client->OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
         		{
         			Proud::CriticalSectionLock lock(global_critical_section, true);
         
         			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo->m_comment).GetString());
         			LogPrint(log);
         
         			connected = false;
         			if (update_handle.IsValid())
         			{
         				FCoreDelegates::OnEndFrame.Remove(update_handle);
         				update_handle.Reset();
         			}
         		};
         
         	net_client->OnP2PMemberJoin = [this](Proud::HostID memberHostID, Proud::HostID groupHostID, int memberCount, const Proud::ByteArray& customField)
         		{
         			Proud::CriticalSectionLock lock(global_critical_section, true);
         			groupHostId = groupHostID;
         
         			UWorld* world = this->GetWorld();
         			if (!world)
         				return;
         			if (memberHostID == net_client->GetLocalHostID())
         				return;
         
         			FVector SpawnLocation(1000.f, 1000.f, 88.f);
         			FRotator SpawnRotation = FRotator::ZeroRotator;
         
         			FActorSpawnParameters SpawnParams;
         			SpawnParams.SpawnCollisionHandlingOverride =
         				ESpawnActorCollisionHandlingMethod::AlwaysSpawn;
         
         			UClass* BPClass = LoadClass<AActor>(
         				nullptr,
         				TEXT("/Game/InfimaGames/FreeFPSTemplate/Core/BP_MirageCharacter.BP_MirageCharacter_C")
         			);
         
         			// 4) ì•¡í„° ìŠ¤í°
         			ABaseMirageCharacter* character = world->SpawnActor<ABaseMirageCharacter>(
         				BPClass,
         				SpawnLocation,
         				SpawnRotation,
         				SpawnParams
         			);
       + 
       + 			if (character)
       + 				character->SetId((int)memberHostID);
         		};
         
         	p2p_stub.event_transform = [this](Proud::HostID userHostId, const Proud::CharacterTransformData& transformData)
         		{
       - 			auto character = getMirageCharacter(this);
       + 			auto character = getMirageCharacter(this, userHostId);
         			if (IsValid(character))
         				character->UpdateTransform(
         					PNFloat3_to_UVec3(transformData.pos),
         					PNFloat4_to_UQuat4(transformData.ori),
         					PNFloat3_to_UVec3(transformData.linear_velocity),
         					PNFloat3_to_UVec3(transformData.angular_velocity),
         					transformData.aim_angle
         				);
         		};
         
         	p2p_stub.event_animationParams = [this](Proud::HostID userHostId, const Proud::CharacterAnimationParams& animationParams)
         		{
       - 			auto character = getMirageCharacter(this);
       + 			auto character = getMirageCharacter(this, userHostId);
         			if (IsValid(character))
         				character->UpdateAnimationParameter(
         					animationParams.aiming,
         					animationParams.close_to__wall,
         					animationParams.moving,
         					animationParams.running,
         					animationParams.jump_velocity,
         					PNFloat3_to_UVec3(animationParams.mouse_sway_loc),
         					PNFloat3_to_UVec3(animationParams.move_sway_loc)
         				);
         		};
         
         	p2p_stub.event_action = [this](Proud::HostID userHostId, const Proud::CharacterAction& actionId)
         		{
       - 			auto character = getMirageCharacter(this);
       + 			auto character = getMirageCharacter(this, userHostId);
         			if (IsValid(character))
         				switch (actionId)
         				{
         				case Proud::CharacterAction::Reload:
         					character->OnReloaded();
         					break;
         				case Proud::CharacterAction::Shoot:
         					character->OnFired();
         					break;
         				}
         		};
         
         
         	net_client->AttachProxy(&p2p_proxy);
         	net_client->AttachStub(&p2p_stub);
         
         	Proud::CNetConnectionParam connection_param;
         	connection_param.m_protocolVersion = ProudSetting::GAME::version;
         	connection_param.m_serverIP = _PNT("localhost");
         	connection_param.m_serverPort = ProudSetting::GAME::server_port;
         	connection_param.m_closeNoPingPongTcpConnections = false;
         
         	net_client->Connect(connection_param);
         
         	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
         		{
         			if (net_client)
         				net_client->FrameMove();
         		}
         	);
         }
         
         void UGissGameNet::Deinitialize()
         {
         	net_client->Disconnect();
         	net_client = nullptr;
         }
         
         
         void UGissGameNet::UpdateCharacterTransform(FVector3f position, FQuat4f rotation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch)
         {
         	auto context = Proud::RmiContext::ReliableSend;
       - 	context.m_enableLoopback = true;
       + 	context.m_enableLoopback = false;
         
         	Proud::float3 pos(UVec3_to_PNFloat3(position));
         	Proud::float4 ori(UQuat4_to_PNFloat4(rotation));
         	Proud::float3 line_velocity(UVec3_to_PNFloat3(linearVelocity));
         	Proud::float3 angular_velocity(UVec3_to_PNFloat3(angularVelocity));
         	p2p_proxy.Transform(groupHostId, context, Proud::CharacterTransformData{ pos, ori, line_velocity, angular_velocity, aimPitch });
         }
         
         void UGissGameNet::UpdateCharacterAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation)
         {
         	auto context = Proud::RmiContext::ReliableSend;
       - 	context.m_enableLoopback = true;
       + 	context.m_enableLoopback = false;
         
         	Proud::CharacterAnimationParams params{
         		aiming,
         		moving,
         		running,
         		closeToWall,
         		jumpVelocity,
         		UVec3_to_PNFloat3(mouseSwayLocation),
         		UVec3_to_PNFloat3(moveSwayLocation)
         	};
         
         	p2p_proxy.AnimationParams(groupHostId, context, params);
         }
         
         void UGissGameNet::SendCharacterFired()
         {
         	auto context = Proud::RmiContext::ReliableSend;
       - 	context.m_enableLoopback = true;
       + 	context.m_enableLoopback = false;
         
         	p2p_proxy.Action(groupHostId, context, Proud::CharacterAction::Shoot);
         }
         
         void UGissGameNet::SendCharacterReloaded()
         {
         	auto context = Proud::RmiContext::ReliableSend;
       - 	context.m_enableLoopback = true;
       + 	context.m_enableLoopback = false;
         
         	p2p_proxy.Action(groupHostId, context, Proud::CharacterAction::Reload);
         }
         
       ```
            
   - ì „ì²´ ì½”ë“œ
     - GissGameNet.cpp
            
       ```cpp
       // Fill out your copyright notice in the Description page of Project Settings.
       
       #include "GissGameNet.h"
       
       #include <format>
       #include <functional>
       
       #include <ProudNetClient.h>
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_server/setting.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_server/setting.cpp"
       
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_common.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_common.cpp"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_proxy.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_proxy.cpp"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_stub.h"
       #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/game_pidl/P2P_stub.cpp"
       
       #include "Kismet/GameplayStatics.h"
       #include "BaseMirageCharacter.h"
       
       inline Proud::float3 UVec3_to_PNFloat3(FVector3f v) { return Proud::float3(v.X, v.Y, v.Z); }
       inline FVector3f PNFloat3_to_UVec3(Proud::float3 v) { return FVector3f(v.x, v.y, v.z); }
       inline Proud::float4 UQuat4_to_PNFloat4(FQuat4f v) { return Proud::float4(v.X, v.Y, v.Z, v.W); }
       inline FQuat4f PNFloat4_to_UQuat4(Proud::float4 v) { return FQuat4f(v.x, v.y, v.z, v.w); }
       
       struct GAME_P2P_Stub : public GAME_P2P::Stub
       {
       public:
       	DECRMI_GAME_P2P_Transform;
       	DECRMI_GAME_P2P_AnimationParams;
       	DECRMI_GAME_P2P_Action;
       
       	std::function<void(Proud::HostID remote, const Proud::CharacterTransformData& transformData)> event_transform;
       	std::function<void(Proud::HostID remote, const Proud::CharacterAnimationParams& animationParams)> event_animationParams;
       	std::function<void(Proud::HostID remote, const Proud::CharacterAction& actionId)>event_action;
       };
       
       Proud::HostID groupHostId = Proud::HostID_None;
       GAME_P2P_Stub p2p_stub;
       GAME_P2P::Proxy p2p_proxy;
       
       DEFRMI_GAME_P2P_Transform(GAME_P2P_Stub)
       {
       	if (event_transform)
       		event_transform(remote, transformData);
       	return true;
       }
       
       DEFRMI_GAME_P2P_AnimationParams(GAME_P2P_Stub)
       {
       	if (event_animationParams)
       		event_animationParams(remote, animationParams);
       	return true;
       }
       
       DEFRMI_GAME_P2P_Action(GAME_P2P_Stub)
       {
       	if (event_action)
       		event_action(remote, actionId);
       	return true;
       }
       
       static void LogPrint(const std::string& str)
       {
       	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
       }
       
       static Proud::CriticalSection global_critical_section;
       static std::shared_ptr<Proud::CNetClient> net_client;
       FDelegateHandle update_handle;
       
       static ABaseMirageCharacter* getMirageCharacter(UObject* uobj, int id)
       {
       	TArray<AActor*> characters;
       	UGameplayStatics::GetAllActorsOfClass(uobj->GetWorld(), ABaseMirageCharacter::StaticClass(), characters);
       	for (auto& actor : characters)
       	{
       		ABaseMirageCharacter* character = Cast<ABaseMirageCharacter>(actor);
       		if (IsValid(character) && character->GetId() == id)
       			return character;
       	}
       	return nullptr;
       }
       
       void UGissGameNet::Initialize(FSubsystemCollectionBase& Collection)
       {
       	net_client = std::shared_ptr<Proud::CNetClient>(Proud::CNetClient::Create());
       
       	bool connected = false;
       
       	net_client->OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);
       
       			if (info->m_errorType == Proud::ErrorType::Ok)
       			{
       				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client->GetLocalHostID());
       				LogPrint(log);
       
       				connected = true;
       			}
       			else
       			{
       				auto log = "Failed to connect to server.\n";
       				LogPrint(log);
       			}
       		};
       
       	net_client->OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);
       
       			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo->m_comment).GetString());
       			LogPrint(log);
       
       			connected = false;
       			if (update_handle.IsValid())
       			{
       				FCoreDelegates::OnEndFrame.Remove(update_handle);
       				update_handle.Reset();
       			}
       		};
       
       	net_client->OnP2PMemberJoin = [this](Proud::HostID memberHostID, Proud::HostID groupHostID, int memberCount, const Proud::ByteArray& customField)
       		{
       			Proud::CriticalSectionLock lock(global_critical_section, true);
       			groupHostId = groupHostID;
       
       			UWorld* world = this->GetWorld();
       			if (!world)
       				return;
       			if (memberHostID == net_client->GetLocalHostID())
       				return;
       
       			FVector SpawnLocation(1000.f, 1000.f, 88.f);
       			FRotator SpawnRotation = FRotator::ZeroRotator;
       
       			FActorSpawnParameters SpawnParams;
       			SpawnParams.SpawnCollisionHandlingOverride =
       				ESpawnActorCollisionHandlingMethod::AlwaysSpawn;
       
       			UClass* BPClass = LoadClass<AActor>(
       				nullptr,
       				TEXT("/Game/InfimaGames/FreeFPSTemplate/Core/BP_MirageCharacter.BP_MirageCharacter_C")
       			);
       
       			// 4) ì•¡í„° ìŠ¤í°
       			ABaseMirageCharacter* character = world->SpawnActor<ABaseMirageCharacter>(
       				BPClass,
       				SpawnLocation,
       				SpawnRotation,
       				SpawnParams
       			);
       
       			if (character)
       				character->SetId((int)memberHostID);
       		};
       
       	p2p_stub.event_transform = [this](Proud::HostID userHostId, const Proud::CharacterTransformData& transformData)
       		{
       			auto character = getMirageCharacter(this, userHostId);
       			if (IsValid(character))
       				character->UpdateTransform(
       					PNFloat3_to_UVec3(transformData.pos),
       					PNFloat4_to_UQuat4(transformData.ori),
       					PNFloat3_to_UVec3(transformData.linear_velocity),
       					PNFloat3_to_UVec3(transformData.angular_velocity),
       					transformData.aim_angle
       				);
       		};
       
       	p2p_stub.event_animationParams = [this](Proud::HostID userHostId, const Proud::CharacterAnimationParams& animationParams)
       		{
       			auto character = getMirageCharacter(this, userHostId);
       			if (IsValid(character))
       				character->UpdateAnimationParameter(
       					animationParams.aiming,
       					animationParams.close_to__wall,
       					animationParams.moving,
       					animationParams.running,
       					animationParams.jump_velocity,
       					PNFloat3_to_UVec3(animationParams.mouse_sway_loc),
       					PNFloat3_to_UVec3(animationParams.move_sway_loc)
       				);
       		};
       
       	p2p_stub.event_action = [this](Proud::HostID userHostId, const Proud::CharacterAction& actionId)
       		{
       			auto character = getMirageCharacter(this, userHostId);
       			if (IsValid(character))
       				switch (actionId)
       				{
       				case Proud::CharacterAction::Reload:
       					character->OnReloaded();
       					break;
       				case Proud::CharacterAction::Shoot:
       					character->OnFired();
       					break;
       				}
       		};
       
       	net_client->AttachProxy(&p2p_proxy);
       	net_client->AttachStub(&p2p_stub);
       
       	Proud::CNetConnectionParam connection_param;
       	connection_param.m_protocolVersion = ProudSetting::GAME::version;
       	connection_param.m_serverIP = _PNT("localhost");
       	connection_param.m_serverPort = ProudSetting::GAME::server_port;
       	connection_param.m_closeNoPingPongTcpConnections = false;
       
       	net_client->Connect(connection_param);
       
       	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
       		{
       			if (net_client)
       				net_client->FrameMove();
       		}
       	);
       }
       
       void UGissGameNet::Deinitialize()
       {
       	net_client->Disconnect();
       	net_client = nullptr;
       }
       
       void UGissGameNet::UpdateCharacterTransform(FVector3f position, FQuat4f rotation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch)
       {
       	auto context = Proud::RmiContext::ReliableSend;
       	context.m_enableLoopback = false;
       
       	Proud::float3 pos(UVec3_to_PNFloat3(position));
       	Proud::float4 ori(UQuat4_to_PNFloat4(rotation));
       	Proud::float3 line_velocity(UVec3_to_PNFloat3(linearVelocity));
       	Proud::float3 angular_velocity(UVec3_to_PNFloat3(angularVelocity));
       	p2p_proxy.Transform(groupHostId, context, Proud::CharacterTransformData{ pos, ori, line_velocity, angular_velocity, aimPitch });
       }
       
       void UGissGameNet::UpdateCharacterAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation)
       {
       	auto context = Proud::RmiContext::ReliableSend;
       	context.m_enableLoopback = false;
       
       	Proud::CharacterAnimationParams params{
       		aiming,
       		moving,
       		running,
       		closeToWall,
       		jumpVelocity,
       		UVec3_to_PNFloat3(mouseSwayLocation),
       		UVec3_to_PNFloat3(moveSwayLocation)
       	};
       
       	p2p_proxy.AnimationParams(groupHostId, context, params);
       }
       
       void UGissGameNet::SendCharacterFired()
       {
       	auto context = Proud::RmiContext::ReliableSend;
       	context.m_enableLoopback = false;
       
       	p2p_proxy.Action(groupHostId, context, Proud::CharacterAction::Shoot);
       }
       
       void UGissGameNet::SendCharacterReloaded()
       {
       	auto context = Proud::RmiContext::ReliableSend;
       	context.m_enableLoopback = false;
       
       	p2p_proxy.Action(groupHostId, context, Proud::CharacterAction::Reload);
       }
       
       ```
            
3. BP_MirageCharacter ë¸”ë£¨í”„ë¦°íŠ¸ í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
   1. Update Transform ì´ë²¤íŠ¸ì˜ Positionì„ Set Actor Locationì— ë‹¤ì‹œ ì§ì ‘ ì—°ê²°í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_110.png)
        
4. ë ˆë²¨ ì—ë””í„°ì˜ ì•„ì›ƒë¼ì´ë„ˆ ì°½ì—ì„œ BP_MirageCharacter ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤.

      ![image.png](img/image_111.png)

### 6.2. í”„ë¡œì íŠ¸ ë¹Œë“œ

1. ì„œë²„ ì‹¤í–‰ íŒŒì¼ ë¹Œë“œ
   1. ë¹„ì£¼ì–¼ ìŠ¤íŠœë””ì˜¤ ìƒë‹¨ì˜ ë“œë¡­ë‹¤ìš´ì„ í†µí•´ ë¹Œë“œ êµ¬ì„±ì„ ë³€ê²½í•©ë‹ˆë‹¤.
        
      ![image.png](img/image_112.png)
        
   2. chat_serverì™€ game_server í”„ë¡œì íŠ¸ë¥¼ ê°ê° ë¹Œë“œí•©ë‹ˆë‹¤.
   3. ì†”ë£¨ì…˜ì˜ í•˜ìœ„ í´ë”ì—ì„œ ë¹Œë“œëœ ì‹¤í–‰íŒŒì¼ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_113.png)
        
2. í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ íŒŒì¼ ë¹Œë“œ
   1. ì–¸ë¦¬ì–¼ ì—ë””í„°ì˜ ë ˆë²¨ ì‹¤í–‰ ì˜† ë²„íŠ¼ì„ í†µí•´ ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
      ![image.png](img/image_114.png)
        
   2. ì§€ì •í•œ ê²½ë¡œë¥¼ í†µí•´ ë¹Œë“œëœ íŒŒì¼ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

   ![image.png](img/image_115.png)

### 6.3. í…ŒìŠ¤íŠ¸

1. ì„œë²„ í”„ë¡œì íŠ¸ì—ì„œ ë¹Œë“œ ëœ chat_server.exeì™€ game_server.exeë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
2. ì–¸ë¦¬ì–¼ í”„ë¡œì íŠ¸ì—ì„œ ë¹Œë“œ ëœ Windows í´ë”ì˜ PdnUE5ExampleClient.exeë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
    
   PCì˜ ì‚¬ì–‘ì— ë”°ë¼ ì»´í“¨í„°ì— ì‹¬í•œ ë¶€í•˜ê°€ ê±¸ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤.
    
3. ì±„íŒ… ì„œë²„ì™€ ê²Œì„ ì„œë²„ë¥¼ ì´ìš©í•˜ëŠ” ë‘ í´ë¼ì´ì–¸íŠ¸ì˜ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
   ![image.png](img/image_116.png)

---
