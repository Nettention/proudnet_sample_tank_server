<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProudNet UE5 サンプル</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/syntax-highlighting.css">
    <script src="js/image-modal.js"></script>
    <script src="js/syntax-highlighting.js"></script>
    <script src="js/language-selector.js"></script>
</head>
<body>
    <div class="md-container">
        <div class="md-header">
            <h1>ProudNet UE5 サンプル</h1>
            <p class="paragraph">ProudNetネットワーキングライブラリとUnreal Engine 5を使用してマルチプレイヤーゲームを実装するための包括的なガイドです。チャットシステム、キャラクターネットワーキング、高度なマルチプレイヤー機能をカバーしています。</p>
        </div>

        <div class="md-nav">
            <h3 class="heading-3">📋 目次</h3>
            <ul class="unordered-list">
                <li class="list-item"><a href="#project-setup" class="link">1. プロジェクトセットアップ</a>
                    <p class="paragraph">ProudNet統合のためのUnreal Engine 5プロジェクトの準備と設定</p>
                </li>
                <li class="list-item"><a href="#local-chat" class="link">2. ローカルチャットの作成</a>
                    <p class="paragraph">テストと基礎のための基本的なローカルチャットシステムの作成</p>
                </li>
                <li class="list-item"><a href="#online-chat" class="link">3. オンラインチャットの作成</a>
                    <p class="paragraph">ProudNetを使用したネットワークチャット機能の実装</p>
                </li>
                <li class="list-item"><a href="#mirage-character" class="link">4. ミラージュキャラクターの実装</a>
                    <p class="paragraph">強化されたゲームプレイ機能を持つミラージュキャラクターの構築</p>
                </li>
                <li class="list-item"><a href="#mirage-online" class="link">5. ミラージュキャラクターのオンライン統合</a>
                    <p class="paragraph">マルチプレイヤーゲームプレイのためのミラージュキャラクターとProudNetネットワーキングの統合</p>
                </li>
                <li class="list-item"><a href="#project-build" class="link">6. 最終プロジェクトビルドとテスト</a>
                    <p class="paragraph">プロジェクトの最終化、ビルド、包括的なテスト手順</p>
                    <ul class="unordered-list">
                        <li class="list-item"><a href="#test-code-modification" class="link">6.1. テストコードの修正</a></li>
                        <li class="list-item"><a href="#project-build-section" class="link">6.2. プロジェクトビルド</a></li>
                        <li class="list-item"><a href="#testing" class="link">6.3. テスト</a></li>
                    </ul>
                </li>
            </ul>
        </div>

        <section id="project-setup" class="md-section">
            <h2 class="heading-2">1. プロジェクトセットアップ</h2>
            <p class="paragraph">このセクションでは、ProudNetが有効になったUnreal Engine 5プロジェクトを作成するために必要な初期設定と構成について説明します。</p>

            <h3 class="heading-3">1.1. ProudNetのインストール</h3>
            <ol class="ordered-list">
                <li class="list-item">https://github.com/Nettention/ProudNet リポジトリから最新リリースをインストールします。
                    <ol class="ordered-list">
                        <li class="list-item">デフォルトのインストールパスは「C:\Program Files (x86)\Nettention\ProudNet」です。このガイドとUE5プラグインはこのパスに設定されているので、インストールパスを変更した場合は、プラグインソースコードを変更し、ガイドを注意深く確認する必要があります。</li>
                    </ol>
                </li>
            </ol>

            <h3 class="heading-3">1.2. Visual Studioプロジェクトの設定</h3>
            <ol class="ordered-list">
                <li class="list-item">Visual Studioで空のプロジェクトを作成します
                    <ul class="unordered-list">
                        <li class="list-item">このガイドでは以下のパス/名前を使用します。</li>
                    </ul>
                    <img src="img/image_017-1.png" alt="Visual Studioプロジェクト作成" class="image">
                    <p class="image-caption">Visual Studioプロジェクト作成</p>
                </li>
                <li class="list-item">chat_serverプロジェクトに3つの新しい項目を追加します：main.cpp、setting.cpp、setting.h。
                    <img src="img/image_017.png" alt="プロジェクトファイルの追加" class="image">
                    <p class="image-caption">プロジェクトファイルの追加</p>
                    
                    <img src="img/image_018.png" alt="プロジェクト構造" class="image">
                    <p class="image-caption">プロジェクト構造</p>
                </li>
                <li class="list-item">chat_serverプロジェクトのプロパティを変更します。
                    <ol class="ordered-list">
                        <li class="list-item">「C/C++ - 言語 - C++言語標準」
                            <ol class="ordered-list">
                                <li class="list-item">ドロップダウンから「ISO C++20標準 (/std:C++20)」を選択</li>
                            </ol>
                        </li>
                        <li class="list-item">「C/C++ - 全般 - 追加のインクルードディレクトリ」
                            <ol class="ordered-list">
                                <li class="list-item">ドロップダウンから&lt;編集…&gt;を選択</li>
                                <li class="list-item">ポップアップウィンドウで以下のパスを追加</li>
                            </ol>
                            <div class="code-block">
                                <pre>C:\Program Files (x86)\Nettention\ProudNet\include</pre>
                            </div>
                        </li>
                        <li class="list-item">「リンカー - 全般 - 追加のライブラリディレクトリ」
                            <ol class="ordered-list">
                                <li class="list-item">ドロップダウンから&lt;編集…&gt;を選択</li>
                                <li class="list-item">ポップアップウィンドウで以下のパスを追加</li>
                            </ol>
                            <div class="code-block">
                                <pre>C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)</pre>
                            </div>
                        </li>
                        <li class="list-item">「リンカー - 入力 - 追加の依存ファイル」
                            <ol class="ordered-list">
                                <li class="list-item">ドロップダウンから&lt;編集…&gt;を選択</li>
                                <li class="list-item">ポップアップウィンドウで以下のファイル名を追加</li>
                            </ol>
                            <div class="code-block">
                                <pre>ProudNetServer.lib
ProudNetClient.lib</pre>
                            </div>
                        </li>
                        <li class="list-item">「ビルドイベント - ビルド後イベント - コマンドライン」
                            <ol class="ordered-list">
                                <li class="list-item">ドロップダウンから&lt;編集…&gt;を選択</li>
                                <li class="list-item">ポップアップウィンドウで以下のコマンドを追加</li>
                            </ol>
                            <div class="code-block">
                                <pre>xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libcrypto-3-x64.dll" "$(OutDir)"
xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libssl-3-x64.dll" "$(OutDir)"</pre>
                            </div>
                        </li>
                    </ol>
                </li>
                <li class="list-item">各ソースファイルにコードを入力します。
                    <ul class="unordered-list">
                        <li class="list-item">setting.h （差分）
                            <div class="code-block">
                                <pre>+ #pragma once
+ 
+ namespace ProudSetting
+ {
+     namespace CHAT
+     {
+         extern const ::Proud::Guid version;
+         extern const int server_port;
+     }
+ }</pre>
                            </div>
                        </li>
                        <li class="list-item">setting.cpp （差分）
                            <div class="code-block">
                                <pre>+ #include &lt;ProudNetClient.h&gt;
+ #include "setting.h"
+ 
+ namespace ProudSetting
+ {
+     namespace CHAT
+     {
+         const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
+         const ::Proud::Guid version = ::Proud::Guid(guid);
+         const int server_port = 33337;
+     }
+ }</pre>
                            </div>
                        </li>
                        <li class="list-item">main.cpp （差分）
                            <div class="code-block">
                                <pre>+ #include &lt;iostream&gt;
+ #include &lt;format&gt;
+ #include &lt;memory&gt;
+ 
+ #include &lt;ProudNetServer.h&gt;
+ #include "setting.h"
+ 
+ std::shared_ptr&lt;Proud::CNetServer&gt; net_server;
+ 
+ int main()
+ {
+ 	net_server = std::shared_ptr&lt;Proud::CNetServer&gt;(Proud::CNetServer::Create());
+ 
+ 	net_server-&gt;OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
+ 		{
+ 			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] connected.\n";
+ 		};
+ 	net_server-&gt;OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
+ 		{
+ 			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] disconnected.\n";
+ 		};
+ 
+ 	Proud::CStartServerParameter start_param;
+ 	start_param.m_protocolVersion = ProudSetting::CHAT::version;
+ 	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);
+ 
+ 	try
+ 	{
+ 		net_server-&gt;Start(start_param);
+ 	}
+ 	catch (Proud::Exception&amp; error)
+ 	{
+ 		std::cout &lt;&lt; "Server start failed: " &lt;&lt; error.what() &lt;&lt; endl;
+ 		return 0;
+ 	}
+ 
+ 	std::cout &lt;&lt; ("Server started. Enterable commands:\n");
+ 	std::cout &lt;&lt; ("-q : Quit.\n");
+ 	std::string input;
+ 	while (true)
+ 	{
+ 		std::cin &gt;&gt; input;
+ 		if (input[0] == '-')
+ 		{
+ 			if (input == "-q")
+ 				break;
+ 		}
+ 	}
+ 
+ 	std::cout &lt;&lt; "Stopping server...\n";
+ 	net_server-&gt;Stop();
+ 	net_server = nullptr;
+ 	std::cout &lt;&lt; "Server stopped.\n";
+ 	return 0;
+ }</pre>
                            </div>
                        </li>
                    </ul>
                    
                    <p class="paragraph"><strong class="text-strong">完全なコード</strong></p>
                    <ul class="unordered-list">
                        <li class="list-item">setting.h
                            <div class="code-block">
                                <pre>#pragma once

namespace ProudSetting
{
    namespace CHAT
    {
        extern const ::Proud::Guid version;
        extern const int server_port;
    }
}</pre>
                            </div>
                        </li>
                        <li class="list-item">setting.cpp
                            <div class="code-block">
                                <pre>#include &lt;ProudNetClient.h&gt;
#include "setting.h"

namespace ProudSetting
{
    namespace CHAT
    {
        const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
        const ::Proud::Guid version = ::Proud::Guid(guid);
        const int server_port = 33337;
    }
}</pre>
                            </div>
                        </li>
                        <li class="list-item">main.cpp
                            <div class="code-block">
                                <pre>#include &lt;iostream&gt;
#include &lt;format&gt;
#include &lt;memory&gt;

#include &lt;ProudNetServer.h&gt;
#include "setting.h"

std::shared_ptr&lt;Proud::CNetServer&gt; net_server;

int main()
{
	net_server = std::shared_ptr&lt;Proud::CNetServer&gt;(Proud::CNetServer::Create());

	net_server-&gt;OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] connected.\n";
		};
	net_server-&gt;OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] disconnected.\n";
		};

	Proud::CStartServerParameter start_param;
	start_param.m_protocolVersion = ProudSetting::CHAT::version;
	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);

	try
	{
		net_server-&gt;Start(start_param);
	}
	catch (Proud::Exception&amp; error)
	{
		std::cout &lt;&lt; "Server start failed: " &lt;&lt; error.what() &lt;&lt; endl;
		return 0;
	}

	std::cout &lt;&lt; ("Server started. Enterable commands:\n");
	std::cout &lt;&lt; ("-q : Quit.\n");
	std::string input;
	while (true)
	{
		std::cin &gt;&gt; input;
		if (input[0] == '-')
		{
			if (input == "-q")
				break;
		}
	}

	std::cout &lt;&lt; "Stopping server...\n";
	net_server-&gt;Stop();
	net_server = nullptr;
	std::cout &lt;&lt; "Server stopped.\n";
	return 0;
}</pre>
                            </div>
                        </li>
                    </ul>
                </li>
                <li class="list-item">プロジェクトをビルドして実行（F5）すると、以下の画面が表示されます。
                    <img src="img/image_018-1.png" alt="サーバー実行画面" class="image">
                    <p class="image-caption">サーバー実行画面</p>
                </li>
            </ol>

            <h3 class="heading-3">1.3. Unreal Engineプロジェクトの設定</h3>
            <ol class="ordered-list">
                <li class="list-item"><a href="https://www.fab.com/listings/6a0af880-2b74-480c-a82c-8e597918dffe" class="link">Infima GamesのFree FPS Template</a>をライブラリに追加します。</li>
                <li class="list-item">以下の手順に従ってテンプレートプロジェクトを作成します。
                    <ol class="ordered-list">
                        <li class="list-item">Epic Games Launcherを起動</li>
                        <li class="list-item">Unreal Engineタブに移動</li>
                        <li class="list-item">ライブラリタブに移動</li>
                        <li class="list-item">Fabライブラリリストの「Free FPS Template & Tutorial」で「プロジェクトを作成」をクリック</li>
                        <li class="list-item">名前とフォルダを変更してから作成をクリック
                            <ul class="unordered-list">
                                <li class="list-item">このガイドでは以下の名前とパスを使用します。</li>
                            </ul>
                            <img src="img/image_019-0.png" alt="Unrealプロジェクト作成" class="image">
                            <p class="image-caption">Unrealプロジェクト作成</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下の手順に従ってC++クラスを作成します。
                    <ol class="ordered-list">
                        <li class="list-item">上部ツールバー - ツール - 新しいC++クラス
                            <img src="img/image_019.png" alt="C++クラス作成メニュー" class="image">
                            <p class="image-caption">C++クラス作成メニュー</p>
                        </li>
                        <li class="list-item">すべてのクラスを表示してからGameInstanceSubsystemを選択
                            <img src="img/image_020.png" alt="GameInstanceSubsystem選択" class="image">
                            <p class="image-caption">GameInstanceSubsystem選択</p>
                        </li>
                        <li class="list-item">クラスタイプ - Publicを選択してクラス名を入力し、クラスを作成
                            <ol class="ordered-list">
                                <li class="list-item">このガイドではGissChatNetを使用します。
                                    <img src="img/image_021.png" alt="クラス名入力" class="image">
                                    <p class="image-caption">クラス名入力</p>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下の手順に従ってUnrealプロジェクト用のVSソリューションを生成します。
                    <ol class="ordered-list">
                        <li class="list-item">Unreal Engineエディタを閉じます。</li>
                        <li class="list-item">Unrealプロジェクトフォルダに移動します。</li>
                        <li class="list-item">PdnUE5ExampleClient.uprojectを右クリックして「Visual Studioプロジェクトファイルを生成」を選択</li>
                    </ol>
                </li>
                <li class="list-item">スタートアッププロジェクトを変更（推奨）
                    <ul class="unordered-list">
                        <li class="list-item">ガイド画像</li>
                    </ul>
                    <img src="img/image_022.png" alt="スタートアッププロジェクトの変更" class="image">
                    <p class="image-caption">スタートアッププロジェクトの変更</p>
                </li>
                <li class="list-item">以下の手順に従ってUE5 ProudNetプラグインを適用します。
                    <ol class="ordered-list">
                        <li class="list-item">Unrealプロジェクトフォルダを開きます。
                            <p class="paragraph">ショートカット: Epic Games Launcher → マイプロジェクト → プロジェクトを右クリック → フォルダで表示</p>
                        </li>
                        <li class="list-item">以下のファイルを抽出してPluginsフォルダに配置します。
                            <p class="paragraph">Pluginsフォルダが存在しない場合は新しく作成してください。</p>
                            <p class="paragraph"><strong class="text-strong"><a href="https://github.com/Nettention/proudnet_sample_tank_server/releases/download/unreal_sample/ProudNet.UE5.Linker.Plugin.zip">ProudNet UE5 Lib Linker Plugin.zip</a></strong></p>
                            <img src="img/image_023.png" alt="プラグインフォルダ構造" class="image">
                            <p class="image-caption">プラグインフォルダ構造</p>
                        </li>
                        <li class="list-item">Visual Studioプロジェクトソリューションを再生成します。
                            <ol class="ordered-list">
                                <li class="list-item">Visual Studio IDEを閉じます。</li>
                                <li class="list-item">PdnUE5ExampleClient.uprojectを右クリックして「Visual Studioプロジェクトファイルを生成」を選択</li>
                            </ol>
                        </li>
                        <li class="list-item">PdnUE5ExampleClient.Build.csコードを修正します。
                            <ul class="unordered-list">
                                <li class="list-item">ガイド画像
                                    <img src="img/image_023-0.png" alt="Build.csファイルの場所" class="image">
                                    <p class="image-caption">Build.csファイルの場所</p>
                                </li>
                                <li class="list-item">修正内容
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

using UnrealBuildTool;

public class PdnUE5ExampleClient : ModuleRules
{
	public PdnUE5ExampleClient(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;
	
-		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore" });
+		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore", "ProudNet" });

		PrivateDependencyModuleNames.AddRange(new string[] {  });

		// Uncomment if you are using Slate UI
		// PrivateDependencyModuleNames.AddRange(new string[] { "Slate", "SlateCore" });
		
		// Uncomment if you are using online features
		// PrivateDependencyModuleNames.Add("OnlineSubsystem");

		// To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true
	}
}</pre>
                                    </div>
                                </li>
                                <li class="list-item">完全なコード
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

using UnrealBuildTool;

public class PdnUE5ExampleClient : ModuleRules
{
	public PdnUE5ExampleClient(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;
	
		PublicDependencyModuleNames.AddRange(new string[] { "Core", "CoreUObject", "Engine", "InputCore", "ProudNet" });

		PrivateDependencyModuleNames.AddRange(new string[] {  });

		// Uncomment if you are using Slate UI
		// PrivateDependencyModuleNames.AddRange(new string[] { "Slate", "SlateCore" });
		
		// Uncomment if you are using online features
		// PrivateDependencyModuleNames.Add("OnlineSubsystem");

		// To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true
	}
}</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ol>
                </li>
                <li class="list-item">GissChatNet.hと.cppコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">ガイド画像
                            <img src="img/image_023-1.png" alt="GissChatNetファイル" class="image">
                            <p class="image-caption">GissChatNetファイル</p>
                        </li>
                        <li class="list-item">GissChatNet.h （差分）
                            <div class="code-block">
                                <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Subsystems/GameInstanceSubsystem.h"
#include "GissChatNet.generated.h"

/**
 *
 */
UCLASS()
class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
{
	GENERATED_BODY()

+ private:
+	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
+	virtual void Deinitialize() override;
};</pre>
                            </div>
                        </li>
                        <li class="list-item">GissChatNet.cpp （差分）
                            <div class="code-block">
                                <pre>// Fill out your copyright notice in the Description page of Project Settings.

#include "GissChatNet.h"

+ #include &lt;format&gt;
+ #include &lt;functional&gt;
+ 
+ #include &lt;ProudNetClient.h&gt;
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.h"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.cpp"
+ 
+ static void LogPrint(const std::string& str)
+ {
+ 	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
+ }
+ 
+ static Proud::CriticalSection global_critical_section;
+ static std::shared_ptr&lt;Proud::CNetClient&gt; net_client;
+ static FDelegateHandle update_handle;
+ 
+ void UGissChatNet::Initialize(FSubsystemCollectionBase& Collection)
+ {
+ 	net_client = std::shared_ptr&lt;Proud::CNetClient&gt;(Proud::CNetClient::Create());
+ 
+ 	bool connected = false;
+ 
+ 	net_client-&gt;OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
+ 		{
+ 			Proud::CriticalSectionLock lock(global_critical_section, true);
+ 
+ 			if (info-&gt;m_errorType == Proud::ErrorType::Ok)
+ 			{
+ 				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client-&gt;GetLocalHostID());
+ 				LogPrint(log);
+ 
+ 				connected = true;
+ 			}
+ 			else
+ 			{
+ 				auto log = "Failed to connect to server.\n";
+ 				LogPrint(log);
+ 			}
+ 		};
+ 
+ 	net_client-&gt;OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
+ 		{
+ 			Proud::CriticalSectionLock lock(global_critical_section, true);
+ 
+ 			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo-&gt;m_comment).GetString());
+ 			LogPrint(log);
+ 
+ 			connected = false;
+ 			if (update_handle.IsValid())
+ 			{
+ 				FCoreDelegates::OnEndFrame.Remove(update_handle);
+ 				update_handle.Reset();
+ 			}
+ 		};
+ 
+ 	Proud::CNetConnectionParam connection_param;
+ 	connection_param.m_protocolVersion = ProudSetting::CHAT::version;
+ 	connection_param.m_serverIP = _PNT("localhost");
+ 	connection_param.m_serverPort = ProudSetting::CHAT::server_port;
+ 	connection_param.m_closeNoPingPongTcpConnections = false;
+ 
+ 	net_client-&gt;Connect(connection_param);
+ 
+ 	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
+ 		{
+ 			if (net_client)
+ 				net_client-&gt;FrameMove();
+ 		}
+ 	);
+ }
+ 
+ void UGissChatNet::Deinitialize()
+ {
+ 	net_client-&gt;Disconnect();
+ 	net_client = nullptr;
+ }</pre>
                            </div>
                        </li>
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">GissChatNet.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Subsystems/GameInstanceSubsystem.h"
#include "GissChatNet.generated.h"

/**
 *
 */
UCLASS()
class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
{
	GENERATED_BODY()

private:
	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
	virtual void Deinitialize() override;
};</pre>
                                    </div>
                                </li>
                                <li class="list-item">GissChatNet.cpp
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#include "GissChatNet.h"

#include &lt;format&gt;
#include &lt;functional&gt;

#include &lt;ProudNetClient.h&gt;
#include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.h"
#include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_server/setting.cpp"

static void LogPrint(const std::string& str)
{
	UE_LOG(LogTemp, Log, TEXT("%s"), UTF8_TO_TCHAR(str.c_str()));
}

static Proud::CriticalSection global_critical_section;
static std::shared_ptr&lt;Proud::CNetClient&gt; net_client;
static FDelegateHandle update_handle;

void UGissChatNet::Initialize(FSubsystemCollectionBase& Collection)
{
	net_client = std::shared_ptr&lt;Proud::CNetClient&gt;(Proud::CNetClient::Create());

	bool connected = false;

	net_client-&gt;OnJoinServerComplete = [&](Proud::ErrorInfo* info, const Proud::ByteArray& replyFromServer)
		{
			Proud::CriticalSectionLock lock(global_critical_section, true);

			if (info-&gt;m_errorType == Proud::ErrorType::Ok)
			{
				auto log = std::format("Succeed to connect server. Allocated hostID={}\n", (int)net_client-&gt;GetLocalHostID());
				LogPrint(log);

				connected = true;
			}
			else
			{
				auto log = "Failed to connect to server.\n";
				LogPrint(log);
			}
		};

	net_client-&gt;OnLeaveServer = [&](Proud::ErrorInfo* errorInfo)
		{
			Proud::CriticalSectionLock lock(global_critical_section, true);

			auto log = std::format("OnLeaveServer. {}  \n", StringT2A(errorInfo-&gt;m_comment).GetString());
			LogPrint(log);

			connected = false;
			if (update_handle.IsValid())
			{
				FCoreDelegates::OnEndFrame.Remove(update_handle);
				update_handle.Reset();
			}
		};

	Proud::CNetConnectionParam connection_param;
	connection_param.m_protocolVersion = ProudSetting::CHAT::version;
	connection_param.m_serverIP = _PNT("localhost");
	connection_param.m_serverPort = ProudSetting::CHAT::server_port;
	connection_param.m_closeNoPingPongTcpConnections = false;

	net_client-&gt;Connect(connection_param);

	update_handle = FCoreDelegates::OnEndFrame.AddStatic([]()
		{
			if (net_client)
				net_client-&gt;FrameMove();
		}
	);
}

void UGissChatNet::Deinitialize()
{
	net_client-&gt;Disconnect();
	net_client = nullptr;
}</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="list-item">テスト
                    <ol class="ordered-list">
                        <li class="list-item">PdnUE5ExampleServerからchat_serverをビルドして実行します。
                            <img src="img/image_024.png" alt="chat_server実行" class="image">
                            <p class="image-caption">chat_server実行</p>
                        </li>
                        <li class="list-item">PdnUE5ExampleClientをビルドし、Unreal Engineエディタでレベルを実行します。
                            <img src="img/image_025.png" alt="Unrealエディタ実行" class="image">
                            <p class="image-caption">Unrealエディタ実行</p>
                        </li>
                        <li class="list-item">以下のようにクライアントとサーバーが接続すれば成功です。
                            <img src="img/image_026.png" alt="サーバー接続成功" class="image">
                            <p class="image-caption">サーバー接続成功</p>
                            
                            <img src="img/image_027.png" alt="クライアント接続成功" class="image">
                            <p class="image-caption">クライアント接続成功</p>
                        </li>
                    </ol>
                </li>
            </ol>
        </section>

        <section id="local-chat" class="md-section">
            <h2 class="heading-2">2. ローカルチャットの作成</h2>
            <p class="paragraph">このセクションでは、ローカルチャットウィンドウの作成とUnreal Engine 5での基本的なチャット機能の実装について説明します。</p>

            <h3 class="heading-3">2.1. チャットウィジェットの作成</h3>
            <ol class="ordered-list">
                <li class="list-item">以下の手順に従ってBP_ChatWidgetウィジェットブループリントを作成します
                    <ol class="ordered-list">
                        <li class="list-item">コンテンツブラウザの空いている場所を右クリックしてコンテキストメニューを開きます。</li>
                        <li class="list-item">「高度なアセットを作成 - ユーザーインターフェース - ウィジェットブループリント」を選択します。
                            <img src="img/image_028.png" alt="ウィジェットブループリント作成" class="image">
                            <p class="image-caption">ウィジェットブループリント作成</p>
                        </li>
                        <li class="list-item">「ユーザーウィジェット」を選択</li>
                        <li class="list-item">名前をBP_ChatWidgetに変更
                            <img src="img/image_029.png" alt="ウィジェット名変更" class="image">
                            <p class="image-caption">ウィジェット名変更</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下の手順に従ってBP_ChatWidgetウィジェットの外観を設定します。
                    <ol class="ordered-list">
                        <li class="list-item">BP_ChatWidgetをダブルクリックしてブループリントエディタを開きます。</li>
                        <li class="list-item">以下の構造に従ってウィジェットを設定します。
                            <ul class="unordered-list">
                                <li class="list-item">ウィジェット要素構造
                                    <div class="directory-tree">
                                        <pre>&gt;&gt; Canvas Panel
	&gt;&gt; Canvas Panel
		- Anchor: Bottom Left
		- Position: [x: 100, y: -200]
		- Size: [x: 640, y: 360]
		- Alignment: [x: 0, y: 1]
		&gt;&gt; Scroll Box
			- Anchor: Top
			- Position: [x: 0, y: 0]
			- Size: [x: 640, y: 300]
			- Alignment: [x: 0.5, y: 0]
		&gt;&gt; Canvas Panel
			- Anchor: Bottom
			- Position: [x: 0, y: 0]
			- Size: [x: 640, y: 48]
			- Alignment: [x: 0.5, y: 1]
			&gt;&gt; Text Box
				- Anchor: Left
				- Position: [x: 0, y: 0]
				- Size: [x: 520, y: 48]
				- Alignment: [x: 0, y: 0.5]
			&gt;&gt; Button
				- Anchor: Right
				- Position: [x: 0, y: 0]
				- Size: [x: 100, y: 48]
				- Alignment: [x: 1, y: 0.5]
				&gt;&gt; Text
					- Text: "Send"</pre>
                                    </div>
                                </li>
                            </ul>
                            <p class="paragraph">設定完了時の外観は以下の通りです。</p>
                            <img src="img/image_030.png" alt="チャットウィジェット設定" class="image">
                            <p class="image-caption">チャットウィジェット設定</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下の手順に従ってBP_ChatWidgetをビューポートに追加します。
                    <ol class="ordered-list">
                        <li class="list-item">レベルブループリントエディタを開きます。
                            <img src="img/image_031.png" alt="レベルブループリントエディタを開く" class="image">
                            <p class="image-caption">レベルブループリントエディタを開く</p>
                        </li>
                        <li class="list-item">Create Widgetノードを追加し、クラスをBP_ChatWidgetに変更します。
                            <img src="img/image_032.png" alt="Create Widgetノードの追加" class="image">
                            <p class="image-caption">Create Widgetノードの追加</p>
                            
                            <img src="img/image_033.png" alt="クラス設定" class="image">
                            <p class="image-caption">クラス設定</p>
                        </li>
                        <li class="list-item">Add to Viewportノードを追加して接続します。
                            <img src="img/image_034.png" alt="Add to Viewportノードの追加" class="image">
                            <p class="image-caption">Add to Viewportノードの追加</p>
                            
                            <img src="img/image_035.png" alt="ノード接続" class="image">
                            <p class="image-caption">ノード接続</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベルを実行してチャットウィンドウが追加されたことを確認します。
                    <img src="img/image_036.png" alt="チャットウィンドウが追加された画面" class="image">
                    <p class="image-caption">チャットウィンドウが追加された画面</p>
                </li>
            </ol>

            <h3 class="heading-3">2.2. チャット機能の実装</h3>
            <ol class="ordered-list">
                <li class="list-item">新しいウィジェットブループリントBP_ChatBlockを作成し、外観を設定します。
                    <ol class="ordered-list">
                        <li class="list-item">以下の構造に従ってウィジェットを設定します。
                            <ul class="unordered-list">
                                <li class="list-item">ウィジェット要素構造
                                    <div class="directory-tree">
                                        <pre>&gt;&gt; Canvas Panel
	&gt;&gt; Border
		- Anchor: Top Left
		- Position: [x: 0, y: 0]
		- Size: [x: 640, y: 40]
		- Alignment: [x: 0, y: 0]
		- Brush Color: [R: 1, G: 1, B: 1, A: 0.5]
		&gt;&gt; Text
			&gt; Name: ChatText
			&gt; Check Variable
			- Horizontal Alignment: Left
			- Vertical Alignment: Center
			- Font-Size: 20</pre>
                                    </div>
                                </li>
                            </ul>
                            <p class="paragraph">設定完了時の外観は以下の通りです。</p>
                            <img src="img/image_037.png" alt="BP_ChatBlock設定" class="image">
                            <p class="image-caption">BP_ChatBlock設定</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下の手順に従ってBP_ChatBlockウィジェットのブループリントを設定します。
                    <ol class="ordered-list">
                        <li class="list-item">ブループリントグラフモードに切り替えます。
                            <img src="img/image_038.png" alt="ブループリントグラフモード" class="image">
                            <p class="image-caption">ブループリントグラフモード</p>
                        </li>
                        <li class="list-item">SetChatText関数を設定します。
                            <ol class="ordered-list">
                                <li class="list-item">ブループリントウィンドウで関数を作成します。
                                    <img src="img/image_039.png" alt="関数作成" class="image">
                                    <p class="image-caption">関数作成</p>
                                </li>
                                <li class="list-item">詳細ウィンドウで関数パラメータを設定します。
                                    <img src="img/image_040.png" alt="関数パラメータ設定" class="image">
                                    <p class="image-caption">関数パラメータ設定</p>
                                </li>
                                <li class="list-item">ブループリントウィンドウの変数リストからChatTextをドラッグしてGet ChatTextを選択します。</li>
                                <li class="list-item">SetText (Text)ノードを作成して接続します。他の項目を誤って選択しないよう注意してください。
                                    <img src="img/image_041.png" alt="SetTextノードの追加" class="image">
                                    <p class="image-caption">SetTextノードの追加</p>
                                    
                                    <img src="img/image_042.png" alt="ノード接続完了" class="image">
                                    <p class="image-caption">ノード接続完了</p>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下の手順に従ってBP_ChatWidgetウィジェットを設定します。
                    <ol class="ordered-list">
                        <li class="list-item">BP_ChatWidgetブループリントエディタを開いてデザイナーモードに切り替えます。</li>
                        <li class="list-item">以下を参考にしてウィジェットを修正します。
                            <ul class="unordered-list">
                                <li class="list-item">ウィジェット要素構造
                                    <div class="directory-tree">
                                        <pre>-&gt; Canvas Panel
	-&gt; Canvas Panel
		-&gt; Scroll Box
			&gt; Name: ChatBlockArea
			&gt; Check Variable
		-&gt; Canvas Panel
			-&gt; Button
				&gt; Name: SendButton
				&gt; Check Variable
			-&gt; Text Box
				&gt; Name: ChatTextBox
				&gt; Check Variable</pre>
                                    </div>
                                </li>
                            </ul>
                            <p class="paragraph">修正後の外観は以下の通りです。</p>
                            <img src="img/image_043.png" alt="BP_ChatWidget修正完了" class="image">
                            <p class="image-caption">BP_ChatWidget修正完了</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">ブループリントエディタをグラフモードに切り替えます。</li>
                <li class="list-item">PrintChat関数を設定します。
                    <ol class="ordered-list">
                        <li class="list-item">関数を追加します。
                            <img src="img/image_044.png" alt="PrintChat関数の追加" class="image">
                            <p class="image-caption">PrintChat関数の追加</p>
                        </li>
                        <li class="list-item">Create Widgetノードを追加し、クラスにBP_ChatBlockを指定します。</li>
                        <li class="list-item">BP_ChatBlockのSetChatTextノードを追加して接続します。</li>
                        <li class="list-item">ChatBlockArea変数をドラッグして追加します。</li>
                        <li class="list-item">Add Childノードを追加して接続します。
                            <img src="img/image_045.png" alt="PrintChat関数設定" class="image">
                            <p class="image-caption">PrintChat関数設定</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">チャットメッセージ送信イベントを実装します。
                    <ol class="ordered-list">
                        <li class="list-item">変数からSendButtonを選択してクリックイベントを追加します。
                            <img src="img/image_046.png" alt="ボタンクリックイベントの追加" class="image">
                            <p class="image-caption">ボタンクリックイベントの追加</p>
                        </li>
                        <li class="list-item">ChatTextBox変数とPrintChat関数をドラッグして追加します。</li>
                        <li class="list-item">Get Text (Text Box)ノードを追加してすべてを接続します。
                            <img src="img/image_047.png" alt="チャット送信イベント完了" class="image">
                            <p class="image-caption">チャット送信イベント完了</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">以下のようにブループリントグラフを修正して追加機能を実装できます（オプション）。
                    <img src="img/image_048.png" alt="追加機能実装 1" class="image">
                    <p class="image-caption">追加機能実装 1</p>
                    
                    <img src="img/image_049.png" alt="追加機能実装 2" class="image">
                    <p class="image-caption">追加機能実装 2</p>
                    
                    <ol class="ordered-list">
                        <li class="list-item">メッセージが入力されていない場合は送信を無視</li>
                        <li class="list-item">送信後に入力メッセージを自動削除</li>
                        <li class="list-item">新しいチャットが到着したときにチャットウィンドウを下部に自動スクロール</li>
                    </ol>
                </li>
                <li class="list-item">レベルを実行してチャット機能が追加されたことを確認します。
                    <img src="img/image_050.png" alt="チャット機能確認" class="image">
                    <p class="image-caption">チャット機能確認</p>
                </li>
            </ol>
        </section>

        <section id="online-chat" class="md-section">
            <h2 class="heading-2">3. オンラインチャットの作成</h2>
            <p class="paragraph">このセクションでは、ProudNetを使用したネットワークチャット機能の実装について説明します。</p>

            <h3 class="heading-3">3.1. Visual Studioプロジェクト作業</h3>
            <ol class="ordered-list">
                <li class="list-item">PdnUE5ExampleServerに新しい空のプロジェクトchat_pidlを追加します。</li>
                <li class="list-item">2つのファイルC2S.PIDL、S2C.PIDLを追加し、プロパティを変更します。
                    <ol class="ordered-list">
                        <li class="list-item">「全般 - 項目の種類」ドロップダウンから「カスタムビルドツール」を選択</li>
                        <li class="list-item">「カスタムビルドツール - 全般 - コマンドライン」にテキストを入力
                            <div class="code-block">
                                <pre>C:\"Program Files (x86)"\Nettention\ProudNet\util\PIDL.exe "%(FullPath)" -cpp</pre>
                            </div>
                        </li>
                        <li class="list-item">「カスタムビルドツール - 全般 - 説明」にテキストを入力
                            <div class="code-block">
                                <pre>%(Filename).PIDL Compiling...</pre>
                            </div>
                        </li>
                        <li class="list-item">「カスタムビルドツール - 全般 - 出力」ドロップダウンから&lt;編集…&gt;を選択し、ポップアップウィンドウで以下のパスを追加
                            <div class="code-block">
                                <pre>%(RootDir)%(Directory)\%(Filename)_common.cpp
%(RootDir)%(Directory)\%(Filename)_common.h
%(RootDir)%(Directory)\%(Filename)_proxy.cpp
%(RootDir)%(Directory)\%(Filename)_proxy.h
%(RootDir)%(Directory)\%(Filename)_stub.cpp
%(RootDir)%(Directory)\%(Filename)_stub.h</pre>
                            </div>
                        </li>
                    </ol>
                </li>
                <li class="list-item">各ファイルにコードを入力します。
                    <ul class="unordered-list">
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">C2S.PIDL
                                    <div class="code-block">
                                        <pre>[access=public]
global CHAT_C2S 3000
{
    Chat([in] Proud::String message);
}</pre>
                                    </div>
                                </li>
                                <li class="list-item">S2C.PIDL
                                    <div class="code-block">
                                        <pre>[access=public]
global CHAT_S2C 4000
{
    SystemChat([in] Proud::String message);
    BroadcastChat([in] int sender_id, [in] Proud::String message);
}</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="list-item">chat_pidlプロジェクトをビルドします。chat_pidlプロジェクトフォルダでビルドされたソースコードファイルを確認できます。
                    <img src="img/image_051.png" alt="PIDLビルド結果" class="image">
                    <p class="image-caption">PIDLビルド結果</p>
                </li>
                <li class="list-item">chat_serverプロジェクトのmain.cppソースコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">修正内容
                            <div class="code-block">
                                <pre>#include &lt;iostream&gt;
#include &lt;format&gt;
#include &lt;memory&gt;

#include &lt;ProudNetServer.h&gt;
#include "setting.h"

+ #include "../chat_pidl/S2C_common.h"
+ #include "../chat_pidl/S2C_common.cpp"
+ #include "../chat_pidl/S2C_proxy.h"
+ #include "../chat_pidl/S2C_proxy.cpp"
+ 
+ #include "../chat_pidl/C2S_common.h"
+ #include "../chat_pidl/C2S_common.cpp"
+ #include "../chat_pidl/C2S_stub.h"
+ #include "../chat_pidl/C2S_stub.cpp"
+ 
+ 
+ Proud::HostID group_host_id = Proud::HostID_None;
+ CHAT_S2C::Proxy s2c_proxy;
+ 
+ struct CHAT_C2S_Stub : public CHAT_C2S::Stub
+ {
+ public:
+ 	DECRMI_CHAT_C2S_Chat;
+ };
+ 
+ DEFRMI_CHAT_C2S_Chat(CHAT_C2S_Stub)
+ {
+ 	Proud::RmiContext rmi_context;
+ 	rmi_context.m_enableLoopback = false;
+ 	s2c_proxy.BroadcastChat(group_host_id, rmi_context, (int)remote, message);
+ 	std::cout &lt;&lt; std::format("Player[{}] say {}\n", (int)remote, StringT2A(message).GetString());
+ 	return true;
+ }
+ 
+ CHAT_C2S_Stub c2s_stub;
std::shared_ptr&lt;Proud::CNetServer&gt; net_server;

int main()
{
	net_server = std::shared_ptr&lt;Proud::CNetServer&gt;(Proud::CNetServer::Create());

	net_server-&gt;OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] connected.\n";
+ 
+ 			Proud::HostID list[100];
+ 			int listCount = net_server-&gt;GetClientHostIDs(list, 100);
+ 			group_host_id = net_server-&gt;CreateP2PGroup(list, listCount, Proud::ByteArray());
+ 
+ 			auto message = std::format("Player[{}] has joined.", (int)clientInfo-&gt;m_HostID);
+ 			Proud::RmiContext rmi_context;
+ 			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
		};
	net_server-&gt;OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] disconnected.\n";
+ 
+ 			auto message = std::format("Player[{}] has left the game.", (int)clientInfo-&gt;m_HostID);
+ 			Proud::RmiContext rmi_context;
+ 			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
		};

+ 	net_server-&gt;AttachProxy(&amp;s2c_proxy);
+ 	net_server-&gt;AttachStub(&amp;c2s_stub);
+ 
	Proud::CStartServerParameter start_param;
	start_param.m_protocolVersion = ProudSetting::CHAT::version;
	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);

	try
	{
		net_server-&gt;Start(start_param);
	}
	catch (Proud::Exception&amp; error)
	{
		std::cout &lt;&lt; "Server start failed: " &lt;&lt; error.what() &lt;&lt; endl;
		return 0;
	}

	std::cout &lt;&lt; ("Server started. Enterable commands:\n");
	std::cout &lt;&lt; ("-q : Quit.\n");
	std::string input;
	while (true)
	{
		std::cin &gt;&gt; input;
		if (input[0] == '-')
		{
			if (input == "-q")
				break;
		}
+ 		else
+ 		{
+ 			Proud::RmiContext rmi_context;
+ 			s2c_proxy.SystemChat(group_host_id, rmi_context, input);
+ 		}
	}

	std::cout &lt;&lt; "Stopping server...\n";
	net_server-&gt;Stop();
	net_server = nullptr;
	std::cout &lt;&lt; "Server stopped.\n";
	return 0;
}</pre>
                            </div>
                        </li>
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">main.cpp
                                    <div class="code-block">
                                        <pre>#include &lt;iostream&gt;
#include &lt;format&gt;
#include &lt;memory&gt;

#include &lt;ProudNetServer.h&gt;
#include "setting.h"

#include "../chat_pidl/S2C_common.h"
#include "../chat_pidl/S2C_common.cpp"
#include "../chat_pidl/S2C_proxy.h"
#include "../chat_pidl/S2C_proxy.cpp"

#include "../chat_pidl/C2S_common.h"
#include "../chat_pidl/C2S_common.cpp"
#include "../chat_pidl/C2S_stub.h"
#include "../chat_pidl/C2S_stub.cpp"

Proud::HostID group_host_id = Proud::HostID_None;
CHAT_S2C::Proxy s2c_proxy;

struct CHAT_C2S_Stub : public CHAT_C2S::Stub
{
public:
	DECRMI_CHAT_C2S_Chat;
};

DEFRMI_CHAT_C2S_Chat(CHAT_C2S_Stub)
{
	Proud::RmiContext rmi_context;
	rmi_context.m_enableLoopback = false;
	s2c_proxy.BroadcastChat(group_host_id, rmi_context, (int)remote, message);
	std::cout &lt;&lt; std::format("Player[{}] say {}\n", (int)remote, StringT2A(message).GetString());
	return true;
}

CHAT_C2S_Stub c2s_stub;
std::shared_ptr&lt;Proud::CNetServer&gt; net_server;

int main()
{
	net_server = std::shared_ptr&lt;Proud::CNetServer&gt;(Proud::CNetServer::Create());

	net_server-&gt;OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] connected.\n";

			Proud::HostID list[100];
			int listCount = net_server-&gt;GetClientHostIDs(list, 100);
			group_host_id = net_server-&gt;CreateP2PGroup(list, listCount, Proud::ByteArray());

			auto message = std::format("Player[{}] has joined.", (int)clientInfo-&gt;m_HostID);
			Proud::RmiContext rmi_context;
			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
		};
	net_server-&gt;OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] disconnected.\n";

			auto message = std::format("Player[{}] has left the game.", (int)clientInfo-&gt;m_HostID);
			Proud::RmiContext rmi_context;
			s2c_proxy.SystemChat(group_host_id, rmi_context, message);
		};

	net_server-&gt;AttachProxy(&amp;s2c_proxy);
	net_server-&gt;AttachStub(&amp;c2s_stub);

	Proud::CStartServerParameter start_param;
	start_param.m_protocolVersion = ProudSetting::CHAT::version;
	start_param.m_tcpPorts.Add(ProudSetting::CHAT::server_port);

	try
	{
		net_server-&gt;Start(start_param);
	}
	catch (Proud::Exception&amp; error)
	{
		std::cout &lt;&lt; "Server start failed: " &lt;&lt; error.what() &lt;&lt; endl;
		return 0;
	}

	std::cout &lt;&lt; ("Server started. Enterable commands:\n");
	std::cout &lt;&lt; ("-q : Quit.\n");
	std::string input;
	while (true)
	{
		std::cin &gt;&gt; input;
		if (input[0] == '-')
		{
			if (input == "-q")
				break;
		}
		else
		{
			Proud::RmiContext rmi_context;
			s2c_proxy.SystemChat(group_host_id, rmi_context, input);
		}
	}

	std::cout &lt;&lt; "Stopping server...\n";
	net_server-&gt;Stop();
	net_server = nullptr;
	std::cout &lt;&lt; "Server stopped.\n";
	return 0;
}</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>

            <h3 class="heading-3">3.2. Unrealプロジェクト作業</h3>
            <ol class="ordered-list">
                <li class="list-item">Unreal Engineエディタで、UserWidgetを継承するC++クラスBaseChatWidgetを作成します。</li>
                <li class="list-item">作成されたBaseChatWidgetクラスのソースコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">修正内容
                            <ul class="unordered-list">
                                <li class="list-item">BaseChatWidget.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Blueprint/UserWidget.h"
#include "BaseChatWidget.generated.h"

/**
 * 
 */
UCLASS()
class PDNUE5EXAMPLECLIENT_API UBaseChatWidget : public UUserWidget
{
	GENERATED_BODY()

+ public:
+ 	UFUNCTION(BlueprintImplementableEvent)
+ 	void PrintChat(const FText&amp; message);
};</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">BaseChatWidget.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Blueprint/UserWidget.h"
#include "BaseChatWidget.generated.h"

/**
 * 
 */
UCLASS()
class PDNUE5EXAMPLECLIENT_API UBaseChatWidget : public UUserWidget
{
	GENERATED_BODY()
	
public:
	UFUNCTION(BlueprintImplementableEvent)
	void PrintChat(const FText&amp; message);
};</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="list-item">GissChatNetクラスのソースコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">修正内容（主要部分のみ表示）
                            <ul class="unordered-list">
                                <li class="list-item">GissChatNet.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Subsystems/GameInstanceSubsystem.h"
#include "GissChatNet.generated.h"

/**
 *
 */
UCLASS()
class PDNUE5EXAMPLECLIENT_API UGissChatNet : public UGameInstanceSubsystem
{
	GENERATED_BODY()

+ public:
+ 	UFUNCTION(BlueprintCallable)
+ 	void SendChat(const FText&amp; message);

private:
	virtual void Initialize(FSubsystemCollectionBase&amp; Collection) override;
	virtual void Deinitialize() override;
};</pre>
                                    </div>
                                </li>
                                <li class="list-item">GissChatNet.cpp (main addition parts)
                                    <div class="code-block">
                                        <pre>+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_common.h"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_common.cpp"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_proxy.h"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/C2S_proxy.cpp"
+ 
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_common.h"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_common.cpp"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_stub.h"
+ #include "C:/proudnet_ue5_example/PdnUE5ExampleServer/chat_pidl/S2C_stub.cpp"
+ 
+ static Proud::HostID pop_group_host_id = Proud::HostID_None;
+ static CHAT_C2S::Proxy c2s_proxy;
+ 
+ void UGissChatNet::SendChat(const FText&amp; message)
+ {
+ 	Proud::String message_pstr(*message.ToString());
+ 	Proud::RmiContext context;
+ 	context.m_enableLoopback = true;
+ 	c2s_proxy.Chat(Proud::HostID_Server, context, message_pstr);
+ }</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="list-item">BP_ChatWidgetのブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">PrintChat関数をイベントに変換します。
                            <img src="img/image_052.png" alt="PrintChatイベント変換" class="image">
                            <p class="image-caption">PrintChatイベント変換</p>
                        </li>
                        <li class="list-item">BP_ChatWidgetの親クラスをBaseChatWidgetに変更します。
                            <img src="img/image_053.png" alt="親クラス変更" class="image">
                            <p class="image-caption">親クラス変更</p>
                        </li>
                        <li class="list-item">SendButtonクリック時のイベントグラフを修正します。
                            <ol class="ordered-list">
                                <li class="list-item">Get GissChatNetノードとSend Chatノードを追加します
                                    <img src="img/image_054.png" alt="GissChatNetノードの追加" class="image">
                                    <p class="image-caption">GissChatNetノードの追加</p>
                                </li>
                                <li class="list-item">既存のPrint ChatノードをSend Chatノードに置き換えます。</li>
                            </ol>
                        </li>
                        <li class="list-item">BP_ChatWidgetブループリントグラフの最終的な外観は以下の通りです。
                            <img src="img/image_055.png" alt="BP_ChatWidget最終外観" class="image">
                            <p class="image-caption">BP_ChatWidget最終外観</p>
                        </li>
                    </ol>
                </li>
            </ol>

            <h3 class="heading-3">3.3. チャットテスト</h3>
            <ol class="ordered-list">
                <li class="list-item">chat_serverプロジェクトをビルドして実行します。</li>
                <li class="list-item">Unreal Engineプロジェクトレベルを実行してチャット機能を確認します。
                    <img src="img/image_056.png" alt="チャット機能テスト 1" class="image">
                    <p class="image-caption">チャット機能テスト 1</p>
                    
                    <img src="img/image_057.png" alt="チャット機能テスト 2" class="image">
                    <p class="image-caption">チャット機能テスト 2</p>
                </li>
            </ol>
        </section>

        <section id="mirage-character" class="md-section">
            <h2 class="heading-2">4. ミラージュキャラクターの実装</h2>
            <p class="paragraph">このセクションでは、強化されたゲームプレイ機能を持つミラージュキャラクターの構築について説明します。</p>

            <h3 class="heading-3">4.1. ミラージュブループリントキャラクターの追加</h3>
            <ol class="ordered-list">
                <li class="list-item">2つのブループリントクラスを複製します。
                    <ol class="ordered-list">
                        <li class="list-item">コンテンツブラウザで「All - Content - InfimaGames - FreeFPSTemplate - Core」に移動します。</li>
                        <li class="list-item">BP_CharacterとABP_Characterの2つのブループリントクラスを複製します。</li>
                        <li class="list-item">それぞれBP_MirageCharacterとABP_MirageCharacterに名前を変更します。</li>
                    </ol>
                </li>
                <li class="list-item">BP_MirageCharacterブループリントエディタを開いて以下の手順を実行します。
                    <ol class="ordered-list">
                        <li class="list-item">コンポーネントウィンドウでCharacterArmsを選択します。</li>
                        <li class="list-item">AnimationのAnim ClassをABP_MirageCharacterに変更します。</li>
                        <li class="list-item">メッシュのSkeletal Mesh AssetをSKM_Manny_Simpleに設定します。
                            <img src="img/image_058.png" alt="BP_MirageCharacter設定" class="image">
                            <p class="image-caption">BP_MirageCharacter設定</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">BP_MirageCharacterをレベルに配置して実行し、動作を確認します。
                    <p class="paragraph">以下のように配置されていれば、現時点では正常です。</p>
                    <img src="img/image_059.png" alt="ミラージュキャラクター配置確認" class="image">
                    <p class="image-caption">ミラージュキャラクター配置確認</p>
                </li>
            </ol>

            <h3 class="heading-3">4.2. 移動アニメーションミラーリング</h3>

            <h4 class="heading-4">4.2.1. アニメーション変数の複製</h4>
            <ol class="ordered-list">
                <li class="list-item">BaseMirageCharacter C++クラスを実装します。
                    <ol class="ordered-list">
                        <li class="list-item">Characterを継承するBaseMirageCharacterクラスを作成します</li>
                        <li class="list-item">作成されたクラスのソースコードを修正します。
                            <ul class="unordered-list">
                                <li class="list-item">修正内容
                                    <ul class="unordered-list">
                                        <li class="list-item">BaseMirageCharacter.h
                                            <div class="code-block">
                                                <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "BaseMirageCharacter.generated.h"

UCLASS()
class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
{
	GENERATED_BODY()

public:
	// Sets default values for this character's properties
	ABaseMirageCharacter();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	// Called to bind functionality to input
	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;

+ 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
+ 	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);

};</pre>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                                <li class="list-item">完全なコード
                                    <ul class="unordered-list">
                                        <li class="list-item">BaseMirageCharacter.h
                                            <div class="code-block">
                                                <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "BaseMirageCharacter.generated.h"

UCLASS()
class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
{
	GENERATED_BODY()

public:
	// Sets default values for this character's properties
	ABaseMirageCharacter();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	// Called to bind functionality to input
	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);

};</pre>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ol>
                </li>
                <li class="list-item">BP_MirageCharacterの親クラスとしてBaseMirageCharacterを指定します</li>
                <li class="list-item">イベント関数を使用したアニメーション変数の複製を実装します。
                    <ol class="ordered-list">
                        <li class="list-item">ABP_Characterブループリントを修正します。
                            <ol class="ordered-list">
                                <li class="list-item">ABP_Characterブループリントエディタを開き、イベントグラフタブに移動します。</li>
                                <li class="list-item">BlueprintUpdateAnimationイベント実行フローの終端部分に移動します。
                                                                <img src="img/image_060.png" alt="BlueprintUpdateAnimationイベント" class="image">
                            <p class="image-caption">BlueprintUpdateAnimationイベント</p>
                                </li>
                                <li class="list-item">Get Actor Of Classノードを作成・接続し、ClassにBP_MirageCharacterを指定します。</li>
                                <li class="list-item">Update Animation Parameterノードを作成・接続し、すべての変数を接続します。すべての変数はブループリントの変数リストから取得できます。
                                    <img src="img/image_061.png" alt="Update Animation Parameterノード" class="image">
                                    <p class="image-caption">Update Animation Parameterノード</p>
                                    
                                    <img src="img/image_062.png" alt="変数接続完了" class="image">
                                    <p class="image-caption">変数接続完了</p>
                                </li>
                            </ol>
                        </li>
                        <li class="list-item">BP_MirageCharacterブループリントを修正します。
                            <ol class="ordered-list">
                                <li class="list-item">BP_MirageCharacterブループリントエディタを開き、イベントグラフタブに移動します。</li>
                                <li class="list-item">4つの変数を追加します。
                                    <img src="img/image_063.png" alt="変数追加" class="image">
                                    <p class="image-caption">変数追加</p>
                                </li>
                                <li class="list-item">Event UpdateAnimationParameterノードを追加します。</li>
                                <li class="list-item">イベントのパラメータをブループリント変数に保存します。
                                    <img src="img/image_064.png" alt="パラメータ保存" class="image">
                                    <p class="image-caption">パラメータ保存</p>
                                </li>
                                <li class="list-item">Event Tickノードの接続を切断します。
                                    <img src="img/image_065.png" alt="Event Tick接続切断" class="image">
                                    <p class="image-caption">Event Tick接続切断</p>
                                </li>
                            </ol>
                        </li>
                        <li class="list-item">ABP_MirageCharacterブループリントを修正します。
                            <ol class="ordered-list">
                                <li class="list-item">ABP_MirageCharacterブループリントエディタを開き、イベントグラフタブに移動します。</li>
                                <li class="list-item">Try Get Pawn Ownerノードを追加します。</li>
                                <li class="list-item">Cast To BP_MirageCharacterノードを追加して接続します。</li>
                                <li class="list-item">キャストされたキャラクターから変数を取得し、アニメーションブループリント変数に保存します。
                                    <img src="img/image_066.png" alt="アニメーション変数接続" class="image">
                                    <p class="image-caption">アニメーション変数接続</p>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベル実行とアニメーション複製動作の確認
                    <p class="paragraph">走行、ジャンプ、照準などの動作時にミラージュキャラクターがモーションを真似る様子を観察できます。</p>
                    <img src="img/image_067.png" alt="アニメーション複製確認" class="image">
                    <p class="image-caption">アニメーション複製確認</p>
                </li>
            </ol>

            <h4 class="heading-4">4.2.2. 補正アニメーションの適用</h4>
            <ol class="ordered-list">
                <li class="list-item">補正アニメーションの準備
                    <ol class="ordered-list">
                        <li class="list-item">アニメーションファイルをダウンロードします。
                            <p class="paragraph"><strong><a href="https://github.com/Nettention/proudnet_sample_tank_server/releases/download/unreal_sample_extra_asset/Invert.fbx">Invert.fbx</a></strong> (ファイルダウンロード必要)</p>
                        </li>
                        <li class="list-item">ダウンロードしたファイルをUnrealエディタのコンテンツブラウザにドラッグします。</li>
                        <li class="list-item">AnimationsタブのSkeletonアイテムにSKEL_UE5_Mannequinを指定します。
                            <img src="img/image_068.png" alt="スケルトン指定" class="image">
                            <p class="image-caption">スケルトン指定</p>
                        </li>
                        <li class="list-item">インポートボタンをクリックします。</li>
                        <li class="list-item">生成された2つのアニメーションのうち1つを削除します。（オプション）
                            <img src="img/image_069.png" alt="アニメーション削除" class="image">
                            <p class="image-caption">アニメーション削除</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">補正アニメーションを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Inver_Anim_Sceneアニメーションシーケンスのブループリントエディタを開きます。</li>
                        <li class="list-item">アセット詳細ウィンドウのアディティブ設定を修正します。
                            <ol class="ordered-list">
                                <li class="list-item">アディティブアニメーションタイプ - Mesh Space選択</li>
                                <li class="list-item">ベースポーズタイプ - Selected animation frame選択</li>
                                <li class="list-item">ベースポーズアニメーション - A_FP_AssaultRifle_Idle_Loop選択
                                    <img src="img/image_070.png" alt="アディティブ設定" class="image">
                                    <p class="image-caption">アディティブ設定</p>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li class="list-item">ABP_MirageCharacterブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Apply AdditiveノードとInvert_Anim_Sceneアニメーションノードを追加します。</li>
                        <li class="list-item">A_FP_AssaultRifle_Idle_Loopアニメーションノードと接続します。
                            <img src="img/image_071.png" alt="Apply Additiveノード接続" class="image">
                            <p class="image-caption">Apply Additiveノード接続</p>
                        </li>
                        <li class="list-item">残り4つのアニメーションノードに対して同じ作業を進行します。すべて同様にInver_Anim_Scene、Apply Additiveを使用します。
                            <img src="img/image_072.png" alt="すべてのアニメーションノード修正" class="image">
                            <p class="image-caption">すべてのアニメーションノード修正</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベル実行とアニメーション補正結果の確認
                    <p class="paragraph">腕骨格の位置が正常範囲内に補正されたことを確認できます。</p>
                    <img src="img/image_073.png" alt="アニメーション補正結果" class="image">
                    <p class="image-caption">アニメーション補正結果</p>
                </li>
            </ol>

            <h4 class="heading-4">4.2.3. 移動時の脚アニメーション適用</h4>
            <ol class="ordered-list">
                <li class="list-item">ABP_MirageCharacter - AnimGraphブループリントグラフのA_FP_AssaultRifle_Run_Loopと接続された部分を以下の手順に従って修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Layered blend per boneノードを追加します。</li>
                        <li class="list-item">追加したノードの詳細を修正します。
                            <ol class="ordered-list">
                                <li class="list-item">設定 - レイヤー設定 - インデックス[0]に2つの分岐フィルターを追加します。</li>
                                <li class="list-item">それぞれのボーン名をthigh_l、thigh_rに指定します。
                                    <img src="img/image_074.png" alt="Layered blend per bone設定" class="image">
                                    <p class="image-caption">Layered blend per bone設定</p>
                                </li>
                            </ol>
                        </li>
                        <li class="list-item">既存のApply Additiveノードを上記ノードのBase Poseに接続します。</li>
                        <li class="list-item">MM_Run_Fwdアニメーションノードを追加し、上記ノードのBlend Poses 0に接続します。</li>
                        <li class="list-item">MM_Run_Fwdノードの詳細ウィンドウでアニメーションループを有効化します。
                            <img src="img/image_075.png" alt="アニメーションループ有効化" class="image">
                            <p class="image-caption">アニメーションループ有効化</p>
                        </li>
                        <li class="list-item">最終的な様子は以下の通りです。コメントノードのサイズ調整は任意です。
                            <img src="img/image_076.png" alt="A_FP_AssaultRifle_Run_Loop最終様子" class="image">
                            <p class="image-caption">A_FP_AssaultRifle_Run_Loop最終様子</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">上記のプロセスを残りの4つのアニメーションノードにも同様に適用します。
                    <ol class="ordered-list">
                        <li class="list-item">Layered blend per boneノードの設定は同一なので、コピーして使用できます。</li>
                        <li class="list-item">MM_Run_Fwdノードの代わりに、場合によってMM_Walk_FwdまたはMM_Idleを使用する必要があります。</li>
                        <li class="list-item">すべてのプロセスを完了した後のグラフは以下の通りです。
                            <img src="img/image_077.png" alt="全体グラフ1" class="image">
                            <p class="image-caption">全体グラフ1</p>
                            
                            <img src="img/image_078.png" alt="全体グラフ2" class="image">
                            <p class="image-caption">全体グラフ2</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベル実行と脚アニメーション適用の確認
                    <p class="paragraph">歩きと走りのアニメーションが再生されることを確認できます。</p>
                    <img src="img/image_079.png" alt="脚アニメーション確認" class="image">
                    <p class="image-caption">脚アニメーション確認</p>
                </li>
            </ol>

            <h3 class="heading-3">4.3. アクションアニメーションと動作複製</h3>
            <ol class="ordered-list">
                <li class="list-item">BaseMirageCharacterクラスのソースコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">修正内容
                            <ul class="unordered-list">
                                <li class="list-item">BaseMirageCharacter.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "BaseMirageCharacter.generated.h"

UCLASS()
class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
{
	GENERATED_BODY()

public:
	// Sets default values for this character's properties
	ABaseMirageCharacter();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	// Called to bind functionality to input
	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);

+ 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
+ 	void OnFired();
+ 
+ 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
+ 	void OnReloaded();

};</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="list-item">BP_Characterブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">リロード時にミラージュキャラクターのリロードイベントを呼び出すグラフを作成します。
                            <ol class="ordered-list">
                                <li class="list-item">グラフ上部でReloadと関連した区域に移動します。
                                    <img src="img/image_080.png" alt="Reload関連区域" class="image">
                                    <p class="image-caption">Reload関連区域</p>
                                </li>
                                <li class="list-item">Get Actor Of Classノードを生成し、クラスにBP_MirageCharacterを指定します。</li>
                                <li class="list-item">On Reloaded関数ノードで連携します。
                                    <img src="img/image_081.png" alt="On Reloadedノード追加" class="image">
                                    <p class="image-caption">On Reloadedノード追加</p>
                                </li>
                                <li class="list-item">ReloadとDelay関数の間で接続します。
                                    <img src="img/image_082.png" alt="Reloadイベント接続" class="image">
                                    <p class="image-caption">Reloadイベント接続</p>
                                </li>
                            </ol>
                        </li>
                        <li class="list-item">射撃時にミラージュキャラクターの射撃イベントを呼び出すグラフを作成します。
                            <ol class="ordered-list">
                                <li class="list-item">グラフ右側でShootと関連した区域の終端部に移動します。
                                    <img src="img/image_083.png" alt="Shoot関連区域" class="image">
                                    <p class="image-caption">Shoot関連区域</p>
                                </li>
                                <li class="list-item">Get Actor Of Classノードを生成し、クラスにBP_MirageCharacterを指定します。</li>
                                <li class="list-item">On Fired関数ノードで連携します。</li>
                                <li class="list-item">(Current Ammunition) SetとDelay関数の間で接続します。
                                    <img src="img/image_084.png" alt="Shootイベント接続" class="image">
                                    <p class="image-caption">Shootイベント接続</p>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li class="list-item">BP_MirageCharacterブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">グラフ上部でReloadと関連した区域に移動します。</li>
                        <li class="list-item">Play Montageノードの前にOn Reloadedイベントノードを接続します。
                            <img src="img/image_085.png" alt="On Reloadedイベント接続" class="image">
                            <p class="image-caption">On Reloadedイベント接続</p>
                        </li>
                        <li class="list-item">グラフ右側でShootと関連した区域に移動します。</li>
                        <li class="list-item">Shootノードの前にOn Firedイベントノードを接続します。
                            <img src="img/image_086.png" alt="On Firedイベント接続" class="image">
                            <p class="image-caption">On Firedイベント接続</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベルを実行し、ミラージュキャラクターがリロードと射撃を模倣する様子を確認できます。
                    <img src="img/image_087.png" alt="アクションアニメーションテスト" class="image">
                    <p class="image-caption">アクションアニメーションテスト</p>
                </li>
            </ol>

            <h3 class="heading-3">4.4. 位置、回転などその他の複製</h3>
            <ol class="ordered-list">
                <li class="list-item">BaseMirageCharacterクラスのソースコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">修正内容
                            <ul class="unordered-list">
                                <li class="list-item">BaseMirageCharacter.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "BaseMirageCharacter.generated.h"

UCLASS()
class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
{
	GENERATED_BODY()

public:
	// Sets default values for this character's properties
	ABaseMirageCharacter();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	// Called to bind functionality to input
	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;

+ 	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
+ 	void UpdateTransform(FVector3f position, FQuat4f orientation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void OnFired();

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void OnReloaded();

};</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">BaseMirageCharacter.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "BaseMirageCharacter.generated.h"

UCLASS()
class PDNUE5EXAMPLECLIENT_API ABaseMirageCharacter : public ACharacter
{
	GENERATED_BODY()

public:
	// Sets default values for this character's properties
	ABaseMirageCharacter();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	// Called to bind functionality to input
	virtual void SetupPlayerInputComponent(class UInputComponent* PlayerInputComponent) override;

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void UpdateTransform(FVector3f position, FQuat4f orientation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void UpdateAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void OnFired();

	UFUNCTION(BlueprintCallable, BlueprintImplementableEvent)
	void OnReloaded();

};</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="list-item">BP_Characterブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Float型のAimPitch変数を追加します。
                            <img src="img/image_088.png" alt="AimPitch変数追加" class="image">
                            <p class="image-caption">AimPitch変数追加</p>
                        </li>
                        <li class="list-item">Tickイベントのコードが終わる部分に移動します。</li>
                        <li class="list-item">2つのRerouteノードを生成し、BranchノードのFalse、Stop Runningの2つのノードを接続します。
                            <img src="img/image_089.png" alt="Rerouteノード1" class="image">
                            <p class="image-caption">Rerouteノード1</p>
                            
                            <img src="img/image_090.png" alt="Rerouteノード2" class="image">
                            <p class="image-caption">Rerouteノード2</p>
                        </li>
                        <li class="list-item">Rerouteノードを移動します。
                            <img src="img/image_091.png" alt="Rerouteノード移動" class="image">
                            <p class="image-caption">Rerouteノード移動</p>
                        </li>
                        <li class="list-item">BP_MirageCharacterのUpdate Transformを呼び出すグラフを作成します。
                            
                            グラフ作成が完了した様子は以下の通りで、下記でプロセスを確認できます。
                            
                            <img src="img/image_092.png" alt="Update Transformグラフ完成" class="image">
                            <p class="image-caption">Update Transformグラフ完成</p>
                            
                            <details class="expandable-section">
                                <summary>プロセス表示</summary>
                                <ol class="ordered-list">
                                    <li class="list-item">Get Actor Of Classノードを生成し、クラスにBP_MirageCharacterを指定します。</li>
                                    <li class="list-item">Update Transform関数ノードで連携します。
                                        <img src="img/image_093.png" alt="Update Transformノード追加" class="image">
                                        <p class="image-caption">Update Transformノード追加</p>
                                    </li>
                                    <li class="list-item">Get Actor Location、Get Actor Rotationで移動/回転値を取得するノードを生成します。
                                        <img src="img/image_094.png" alt="位置/回転ノード追加" class="image">
                                        <p class="image-caption">位置/回転ノード追加</p>
                                    </li>
                                    <li class="list-item">Get Actor RotationはTo Quaternionノードで連携します。
                                        <img src="img/image_095.png" alt="To Quaternion接続" class="image">
                                        <p class="image-caption">To Quaternion接続</p>
                                    </li>
                                    <li class="list-item">Get Character Armsノードを生成し、速度と角速度を取得するノードで連携します。
                                        <img src="img/image_096.png" alt="Character Armsノード" class="image">
                                        <p class="image-caption">Character Armsノード</p>
                                        
                                        <img src="img/image_097.png" alt="速度/角速度ノード" class="image">
                                        <p class="image-caption">速度/角速度ノード</p>
                                    </li>
                                    <li class="list-item">Get Control Rotationノードを生成し、戻り値からPitch回転値を演算します。
                                        すべてのノードはノード名を通じて連携可能です。
                                        中間の乗算ノードはMultiplyで生成可能です。
                                        
                                        <img src="img/image_098.png" alt="Control RotationとPitch計算" class="image">
                                        <p class="image-caption">Control RotationとPitch計算</p>
                                    </li>
                                    <li class="list-item">追加されたすべてのノードをUpdate Transformの適切な引数と接続します。
                                        Get Physics Linear Velocityノードは実行ピンが接続される必要があります。</li>
                                </ol>
                            </details>
                        </li>
                    </ol>
                </li>
                <li class="list-item">BP_MirageCharacterブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Float形式のAimPitch変数を追加します。</li>
                        <li class="list-item">UpdateTransformイベントノードを追加します。</li>
                        <li class="list-item">イベントノードに合わせて各ノードを追加し接続します。
                            <img src="img/image_099.png" alt="BP_MirageCharacter UpdateTransform実装" class="image">
                            <p class="image-caption">BP_MirageCharacter UpdateTransform実装</p>
                        </li>
                        <li class="list-item">Positionノードの接続を切断し、Make Vectorノードを追加して接続します。
                            
                            シングルテスト環境でのバグ動作を防止するための措置です。
                            
                            <img src="img/image_100.png" alt="Position Make Vector接続" class="image">
                            <p class="image-caption">Position Make Vector接続</p>
                        </li>
                        <li class="list-item">Shootと関連する部分に移動します。</li>
                        <li class="list-item">以下のようにグラフを構成し接続します。
                            <img src="img/image_101.png" alt="Shoot関連グラフ構成" class="image">
                            <p class="image-caption">Shoot関連グラフ構成</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">ABP_MirageCharacterブループリントのイベントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Float形式のAimPitch変数を追加します。</li>
                        <li class="list-item">型変換されたBP_MirageCharacterから値を取得し保存します。
                            <img src="img/image_102.png" alt="ABP_MirageCharacter AimPitch変数" class="image">
                            <p class="image-caption">ABP_MirageCharacter AimPitch変数</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">ABP_MirageCharacterブループリントのAnimGraphを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Mouse Sway関連部分に移動します。
                            <img src="img/image_103.png" alt="Mouse Sway関連部分" class="image">
                            <p class="image-caption">Mouse Sway関連部分</p>
                        </li>
                        <li class="list-item">Transform (Modify) Boneノードを追加し、Mouse Swayコメントノードの前に接続します。</li>
                        <li class="list-item">AimPitch変数値でRotatorを作成し、ノードのRotationに適用します。
                            <img src="img/image_104.png" alt="Transform Boneノード適用" class="image">
                            <p class="image-caption">Transform Boneノード適用</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベルを実行し機能をテストします。
                    
                    ミラージュキャラクターがプレイヤーキャラクターと同じ方向を照準し射撃するようになりました。

                    <img src="img/image_105.png" alt="位置回転複製テスト" class="image">
                    <p class="image-caption">位置回転複製テスト</p>
                </li>
            </ol>
        </section>

        <!-- セクション 5: ミラージュキャラクターのオンライン統合 -->
        <section id="section-5" class="section">
            <h2 class="heading-2">5. ミラージュキャラクターのオンライン統合</h2>
            <p class="description">このセクションでは、マルチプレイヤーゲームプレイのためのミラージュキャラクターとProudNetネットワーキングの統合について説明します。</p>

            <h3 class="heading-3">5.1. Visual Studioプロジェクト作業</h3>

            <h4 class="heading-4">5.1.1. game_serverプロジェクトの作成</h4>
            <ol class="ordered-list">
                <li class="list-item">VisualStudioで空のプロジェクトgame_serverを作成します</li>
                
                <li class="list-item">game_serverプロジェクトに3つの新しいアイテムmain.cpp、setting.cpp、setting.hを追加します。</li>
                
                <li class="list-item">game_serverプロジェクトのプロパティを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">「C/C++ - 言語 - C++言語標準」
                            ドロップダウンから「ISO C++20標準 (/std:C++20)」を選択</li>
                        <li class="list-item">「C/C++ - 全般 - 追加のインクルードディレクトリ」
                            ドロップダウンから&lt;編集…&gt;を選択
                            ポップアップウィンドウで以下のパスを追加
                            <div class="code-block">
                                <pre>C:\Program Files (x86)\Nettention\ProudNet\include</pre>
                            </div>
                        </li>
                        <li class="list-item">「リンカー - 全般 - 追加のライブラリディレクトリ」
                            ドロップダウンから&lt;編集…&gt;を選択
                            ポップアップウィンドウで以下のパスを追加
                            <div class="code-block">
                                <pre>C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)</pre>
                            </div>
                        </li>
                        <li class="list-item">「リンカー - 入力 - 追加の依存ファイル」
                            ドロップダウンから&lt;編集…&gt;を選択
                            ポップアップウィンドウで以下のファイル名を追加
                            <div class="code-block">
                                <pre>ProudNetServer.lib
ProudNetClient.lib</pre>
                            </div>
                        </li>
                        <li class="list-item">「ビルドイベント - ビルド後イベント - コマンドライン」
                            ドロップダウンから&lt;編集…&gt;を選択
                            ポップアップウィンドウで以下のコマンドを追加
                            <div class="code-block">
                                <pre>xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libcrypto-3-x64.dll" "$(OutDir)"
xcopy /Y "C:\Program Files (x86)\Nettention\ProudNet\lib\$(Platform)\v140\$(Configuration)\libssl-3-x64.dll" "$(OutDir)"</pre>
                            </div>
                        </li>
                    </ol>
                </li>
                <li class="list-item">各ソースファイルにコードを入力します。
                    <ul class="unordered-list">
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">setting.h
                                    <div class="code-block">
                                        <pre>#pragma once

namespace ProudSetting
{
    namespace GAME
    {
        extern const ::Proud::Guid version;
        extern const int server_port;
    }
}</pre>
                                    </div>
                                </li>
                                <li class="list-item">setting.cpp
                                    <div class="code-block">
                                        <pre>#include &lt;ProudNetClient.h&gt;
#include "setting.h"

namespace ProudSetting
{
    namespace GAME
    {
        const ::Proud::PNGUID guid = { 0x3ae33249, 0xecc6, 0x4980, { 0xbc, 0x5d, 0x7b, 0xa, 0x99, 0x9c, 0x7, 0x39 } };
        const ::Proud::Guid version = ::Proud::Guid(guid);
        const int server_port = 33338;
    }
}</pre>
                                    </div>
                                </li>
                                <li class="list-item">main.cpp
                                    <div class="code-block">
                                        <pre>#include &lt;iostream&gt;
#include &lt;format&gt;
#include &lt;memory&gt;

#include &lt;ProudNetServer.h&gt;
#include "setting.h"

std::shared_ptr&lt;Proud::CNetServer&gt; net_server;

int main()
{
	net_server = std::shared_ptr&lt;Proud::CNetServer&gt;(Proud::CNetServer::Create());

	net_server-&gt;OnClientJoin = [](Proud::CNetClientInfo* clientInfo)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] connected.\n";
		};
	net_server-&gt;OnClientLeave = [](Proud::CNetClientInfo* clientInfo, Proud::ErrorInfo* error, const Proud::ByteArray byte_arr)
		{
			std::cout &lt;&lt; "Client[" &lt;&lt; (int)clientInfo-&gt;m_HostID &lt;&lt; "] disconnected.\n";
		};

	Proud::CStartServerParameter start_param;
	start_param.m_protocolVersion = ProudSetting::GAME::version;
	start_param.m_tcpPorts.Add(ProudSetting::GAME::server_port);

	try
	{
		net_server-&gt;Start(start_param);
	}
	catch (Proud::Exception&amp; error)
	{
		std::cout &lt;&lt; "Server start failed: " &lt;&lt; error.what() &lt;&lt; endl;
		return 0;
	}

	std::cout &lt;&lt; ("Server started. Enterable commands:\n");
	std::cout &lt;&lt; ("-q : Quit.\n");
	std::string input;
	while (true)
	{
		std::cin &gt;&gt; input;
		if (input[0] == '-')
		{
			if (input == "-q")
				break;
		}
	}

	std::cout &lt;&lt; "Stopping server...\n";
	net_server-&gt;Stop();
	net_server = nullptr;
	std::cout &lt;&lt; "Server stopped.\n";
	return 0;
}</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>

            <h4 class="heading-4">5.1.2. game_pidlプロジェクトの作成</h4>
            <ol class="ordered-list">
                <li class="list-item">PdnUE5ExampleServerで新しい空のプロジェクトgame_pidlを追加します。</li>

                <li class="list-item">ファイルP2P.PIDLを追加し、プロパティを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">「全般 - 項目の種類」
                            ドロップダウンから「カスタムビルドツール」を選択</li>
                        <li class="list-item">「カスタムビルドツール - 全般 - コマンドライン」
                            テキストを入力
                            <div class="code-block">
                                <pre>C:\"Program Files (x86)"\Nettention\ProudNet\util\PIDL.exe "%(FullPath)" -cpp</pre>
                            </div>
                        </li>
                        <li class="list-item">「カスタムビルドツール - 全般 - 説明」
                            テキストを入力
                            <div class="code-block">
                                <pre>%(Filename).PIDL Compiling...</pre>
                            </div>
                        </li>
                        <li class="list-item">「カスタムビルドツール - 全般 - 出力」
                            ドロップダウンから&lt;編集…&gt;を選択
                            ポップアップウィンドウで以下のパスを追加
                            <div class="code-block">
                                <pre>%(RootDir)%(Directory)\%(Filename)_common.cpp
%(RootDir)%(Directory)\%(Filename)_common.h
%(RootDir)%(Directory)\%(Filename)_proxy.cpp
%(RootDir)%(Directory)\%(Filename)_proxy.h
%(RootDir)%(Directory)\%(Filename)_stub.cpp
%(RootDir)%(Directory)\%(Filename)_stub.h</pre>
                            </div>
                        </li>
                    </ol>
                </li>

                <li class="list-item">ファイルにコードを入力します。
                    <ul class="unordered-list">
                        <li class="list-item">完全なコード
                            <ul class="unordered-list">
                                <li class="list-item">P2P.PIDL
                                    <div class="code-block">
                                        <pre>[access=public]
global GAME_P2P 3000
{
    Transform([in] Proud::CharacterTransformData transformData);
    AnimationParams([in] Proud::CharacterAnimationParams animationParams);
    Action([in] Proud::CharacterAction actionId);
}</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li class="list-item">game_pidlプロジェクトをビルドします。</li>
            </ol>

            <h4 class="heading-4">5.1.3. game_serverプロジェクトのソースコード修正</h4>
            <ol class="ordered-list">
                <li class="list-item">game_serverプロジェクトのソースコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">修正内容を適用してP2Pグループ管理機能を追加します。</li>
                        <li class="list-item">データ構造体とシリアル化関数をsetting.hとsetting.cppに追加します。</li>
                    </ul>
                </li>
            </ol>

            <h3 class="heading-3">5.2. Unrealプロジェクト作業</h3>
            <ol class="ordered-list">
                <li class="list-item">GissGameNet C++クラスの作成
                    <ol class="ordered-list">
                        <li class="list-item">GameInstanceSubsystemを継承するC++クラスGissGameNetを作成します。</li>
                        <li class="list-item">GissGameNetクラスのソースコードを修正します。
                            <ul class="unordered-list">
                                <li class="list-item">GissGameNet.h
                                    <div class="code-block">
                                        <pre>// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Subsystems/GameInstanceSubsystem.h"
#include "GissGameNet.generated.h"

/**
 * 
 */
UCLASS()
class PDNUE5EXAMPLECLIENT_API UGissGameNet : public UGameInstanceSubsystem
{
	GENERATED_BODY()

public:
	UFUNCTION(BlueprintCallable)
	void UpdateCharacterTransform(FVector3f position, FQuat4f rotation, FVector3f linearVelocity, FVector3f angularVelocity, float aimPitch);

	UFUNCTION(BlueprintCallable)
	void UpdateCharacterAnimationParameter(bool aiming, bool closeToWall, bool moving, bool running, float jumpVelocity, FVector3f mouseSwayLocation, FVector3f moveSwayLocation);

	UFUNCTION(BlueprintCallable)
	void SendCharacterFired();

	UFUNCTION(BlueprintCallable)
	void SendCharacterReloaded();

private:
	virtual void Initialize(FSubsystemCollectionBase& Collection) override;
	virtual void Deinitialize() override;
};</pre>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ol>
                </li>

                <li class="list-item">BP_Characterブループリントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">BP_MirageCharacterのUpdate Transformを呼び出すグラフをGissGameNetのUpdate Character Transformを呼び出すグラフに置き換えます。
                            <img src="img/image_106.png" alt="Update Character Transform変更" class="image">
                            <p class="image-caption">Update Character Transform変更</p>
                        </li>
                        <li class="list-item">BP_MirageCharacterのOn Firedを呼び出すグラフをGissGameNetのSend Character Firedを呼び出すグラフに置き換えます。
                            <img src="img/image_107.png" alt="Send Character Fired変更" class="image">
                            <p class="image-caption">Send Character Fired変更</p>
                        </li>
                        <li class="list-item">BP_MirageCharacterのOn Reloadedを呼び出すグラフをGissGameNetのSend Character Reloadedを呼び出すグラフに置き換えます。
                            <img src="img/image_108.png" alt="Send Character Reloaded変更" class="image">
                            <p class="image-caption">Send Character Reloaded変更</p>
                        </li>
                    </ol>
                </li>

                <li class="list-item">ABP_Characterブループリントのイベントグラフを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">BP_MirageCharacterのUpdate Animation Parameterを呼び出すグラフをGissGameNetのUpdate Character Animation Parameterを呼び出すグラフに置き換えます。
                            <img src="img/image_109.png" alt="Update Character Animation Parameter変更" class="image">
                            <p class="image-caption">Update Character Animation Parameter変更</p>
                        </li>
                    </ol>
                </li>

                <li class="list-item">サーバーのビルドと実行後、レベル実行時に連動作業以前と同じ結果を確認できます。</li>
            </ol>
        </section>

        <!-- セクション 6: 最終プロジェクトビルドとテスト -->
        <section id="section-6" class="section">
            <h2 class="heading-2">6. 最終プロジェクトビルドとテスト</h2>
            <p class="description">このセクションでは、プロジェクトの最終化、ビルド、包括的なテスト手順について説明します。</p>

            <h3 class="heading-3">6.1. テストコードの修正</h3>
            <ol class="ordered-list">
                <li class="list-item">BaseMirageCharacterクラスのコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">キャラクターID管理のためのSetIdとGetId関数を追加します。</li>
                    </ul>
                </li>
                <li class="list-item">GissGameNetクラスのコードを修正します。
                    <ul class="unordered-list">
                        <li class="list-item">マルチプレイヤー環境でキャラクター別識別のためのIDベース管理システムを実装します。</li>
                        <li class="list-item">P2Pメンバー参加時に自動的にミラージュキャラクターを生成する機能を追加します。</li>
                        <li class="list-item">ループバック無効化により、自分の動作が自分に再送信されないように修正します。</li>
                    </ul>
                </li>
                <li class="list-item">BP_MirageCharacterブループリントクラスを修正します。
                    <ol class="ordered-list">
                        <li class="list-item">Update TransformイベントのPositionをSet Actor Locationに再度直接接続します。
                            <img src="img/image_110.png" alt="Position直接接続" class="image">
                            <p class="image-caption">Position直接接続</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">レベルエディタのアウトライナーウィンドウからBP_MirageCharacterインスタンスを削除します。
                    <img src="img/image_111.png" alt="MirageCharacterインスタンス削除" class="image">
                    <p class="image-caption">MirageCharacterインスタンス削除</p>
                </li>
            </ol>

            <h3 class="heading-3">6.2. プロジェクトビルド</h3>
            <ol class="ordered-list">
                <li class="list-item">サーバー実行ファイルのビルド
                    <ol class="ordered-list">
                        <li class="list-item">Visual Studio上部のドロップダウンからビルド構成を変更します。
                            <img src="img/image_112.png" alt="ビルド構成変更" class="image">
                            <p class="image-caption">ビルド構成変更</p>
                        </li>
                        <li class="list-item">chat_serverとgame_serverプロジェクトをそれぞれビルドします。</li>
                        <li class="list-item">ソリューションのサブフォルダーでビルドされた実行ファイルを確認できます。
                            <img src="img/image_113.png" alt="ビルドされた実行ファイル" class="image">
                            <p class="image-caption">ビルドされた実行ファイル</p>
                        </li>
                    </ol>
                </li>
                <li class="list-item">クライアント実行ファイルのビルド
                    <ol class="ordered-list">
                        <li class="list-item">Unrealエディタのレベル実行横のボタンを通じてUnrealプロジェクトをビルドできます。
                            <img src="img/image_114.png" alt="Unrealプロジェクトビルド" class="image">
                            <p class="image-caption">Unrealプロジェクトビルド</p>
                        </li>
                        <li class="list-item">指定したパスでビルドされたファイルを確認できます。
                            <img src="img/image_115.png" alt="ビルドされたクライアントファイル" class="image">
                            <p class="image-caption">ビルドされたクライアントファイル</p>
                        </li>
                    </ol>
                </li>
            </ol>

            <h3 class="heading-3">6.3. テスト</h3>
            <ol class="ordered-list">
                <li class="list-item">サーバープロジェクトでビルドされたchat_server.exeとgame_server.exeを実行します。</li>
                <li class="list-item">UnrealプロジェクトでビルドされたWindowsフォルダのPdnUE5ExampleClient.exeを実行します。
                    
                    PCの仕様によってコンピューターに大きな負荷がかかる場合があるので注意が必要です。
                </li>
                <li class="list-item">チャットサーバーとゲームサーバーを利用する2つのクライアントの様子を確認できます。
                    <img src="img/image_116.png" alt="最終テスト結果" class="image">
                    <p class="image-caption">最終テスト結果</p>
                </li>
            </ol>
        </section>

    </div>

    

    <!-- Image modal component include -->
    <!-- Image modal - Common component reusable in all HTML documents -->
    <div id="imageModal" class="image-modal">
        <div class="image-modal-content">
            <button class="image-modal-close" onclick="closeImageModal()">&times;</button>
            <img id="modalImage" class="image-modal-image" src="" alt="">
            <div id="modalCaption" class="image-modal-caption"></div>
        </div>
    </div>
    <!-- JavaScript is automatically loaded from js/image-modal.js and js/syntax-highlighting.js -->
</body>
</html> 